TITLE: Defining and Initializing VoltAgent (TypeScript)
DESCRIPTION: Example code from src/index.ts showing how to define a simple agent using @voltagent/core and initialize the VoltAgent server with it, using example providers and models.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/cli/README.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Example provider
import { openai } from "@ai-sdk/openai"; // Example model

// Define a simple agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // Note: You can swap VercelAIProvider and openai with other supported providers/models
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Initialize VoltAgent with your agent(s)
new VoltAgent({
  agents: {
    agent
  }
});
```

----------------------------------------

TITLE: Generating Structured Objects with Voltagent and Vercel AI SDK (TypeScript)
DESCRIPTION: Provides a complete example function main that instantiates a voltagent Agent using VercelProvider and an OpenAI model, defines a Zod schema for the desired output structure, and calls agent.generateObject with a prompt and the schema. It logs the generated object and usage information. Requires @voltagent/core, @voltagent/vercel-ai, @ai-sdk/openai, and zod.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_9

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
import { z } from "zod"; // Import Zod

// Define a schema for the desired object structure
const personSchema = z.object({
  name: z.string().describe("The person's full name"),
  age: z.number().describe("The person's age"),
  city: z.string().describe("The city they live in"),
});

async function main() {
  const vercelProvider = new VercelProvider();

  // Ensure the model supports object generation (e.g., gpt-4o)
  const agent = new Agent({
    name: "Vercel Object Agent",
    instructions: "An agent that generates structured data via Vercel AI SDK",
    llm: vercelProvider,
    model: openai("gpt-4o"),
  });

  const prompt =
    "Generate details for a software engineer named Alex who is 30 years old and lives in London.";

  try {
    // Call generateObject with the prompt and schema
    const response = await agent.generateObject(prompt, personSchema);

    console.log("Generated Object:");
    console.log(response.object);
    console.log("Usage:", response.usage);
  } catch (error) {
    console.error("Error generating object:", error);
  }
}

main();
```

----------------------------------------

TITLE: Defining an LLM Agent with a Framework in JavaScript
DESCRIPTION: This snippet illustrates how an LLM agent framework simplifies application development by abstracting complex boilerplate code. It shows the definition of an `Agent` instance with a name, instructions, a list of tools (e.g., `orderTool`, `refundTool`), and a memory component (`conversationMemory`). The framework handles underlying complexities like error handling, memory management, and tool orchestration, allowing developers to focus on business logic.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_1

LANGUAGE: javascript
CODE:
```
// Define agent once, complexity handled by framework
const agent = new Agent({
  name: "customer-support",
  instructions: "Do customer support",
  tools: [orderTool, refundTool],
  memory: conversationMemory,
});
```

----------------------------------------

TITLE: Configuring VoltAgentExporter for Production Tracing (TypeScript)
DESCRIPTION: This TypeScript example demonstrates how to integrate the VoltAgentExporter into a VoltAgent application. It shows the necessary imports, agent definition, and how to instantiate VoltAgentExporter with public and secret keys (typically from environment variables) to send telemetry data to the VoltAgent cloud platform for production monitoring and analysis.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/observability/developer-console.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { Agent, VoltAgent, VoltAgentExporter } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const agent = new Agent({
  name: "My Production Agent",
  instructions: "You are a helpful assistant designed for production.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});

const voltagentPublicKey = process.env.VOLTAGENT_PUBLIC_KEY;
const voltagentSecretKey = process.env.VOLTAGENT_SECRET_KEY;

new VoltAgent({
  agents: {
    mainAgent: agent,
  },
  // highlight-start
  telemetryExporter: new VoltAgentExporter({
    publicKey: voltagentPublicKey,
    secretKey: voltagentSecretKey,
    baseUrl: "https://server.voltagent.dev", // Default URL for the VoltAgent cloud service
  }),
  // highlight-end
});

// Your agent is now configured to send traces to the VoltAgent cloud.
// You can view them in your project dashboard on console.voltagent.dev.
```

----------------------------------------

TITLE: Streaming Structured Objects with Voltagent (TypeScript)
DESCRIPTION: Shows how to stream updates to a structured JSON object as it is being generated. It defines a `travelPlanSchema`, initializes an `Agent`, and calls `streamObject`. It then iterates over the `objectStream` to log partial object updates as they are received.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_13

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { XsAIProvider } from "@voltagent/xsai";
import { z } from "zod";

const travelPlanSchema = z.object({
  destination: z.string(),
  durationDays: z.number().int(),
  activities: z.array(z.string()),
  budget: z.string().optional(),
});

async function main() {
  const provider = new XsAIProvider({ apiKey: process.env.OPENAI_API_KEY! });

  const agent = new Agent({
    name: "xsAI Object Streaming Agent",
    instructions: "Streams structured objects",
    llm: provider,
    model: "gpt-4o",
  });

  const prompt = "Generate a 3-day travel plan for Tokyo.";

  try {
    const response = await agent.streamObject(prompt, travelPlanSchema);
    console.log("Streaming Object Updates:");
    for await (const partialObject of response.objectStream) {
      console.log("Partial:", partialObject);
    }
    // Final object/usage might be available via callbacks or provider result
    console.log("\n--- Object Stream Finished ---");
  } catch (error) {
    console.error("Error streaming object:", error);
  }
}

main();
```

----------------------------------------

TITLE: Defining a Basic VoltAgent AI Agent in TypeScript
DESCRIPTION: This code defines a basic AI agent using VoltAgent, specifying its core configuration. It imports necessary modules for agent creation, an LLM provider (VercelAIProvider), and a specific OpenAI model (gpt-4o). The agent is configured with a name, detailed instructions for its behavior, and the language model to use for generating responses.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-26-llm-agents/index.md#_snippet_5

LANGUAGE: typescript
CODE:
```
// src/agent.ts
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

export const myAgent = new Agent({
  name: "My First Agent",
  instructions: `
    You are a helpful assistant. For users:
    - Give clear and understandable answers
    - Explain with examples
    - If you don't know something, say you don't know
  `,
  llm: new VercelAIProvider(),
  model: openai("gpt-4o")
});
```

----------------------------------------

TITLE: Initializing a VoltAgent Agent in TypeScript
DESCRIPTION: This snippet demonstrates how to create a basic VoltAgent `Agent` instance. It requires a name, instructions to guide its behavior, an LLM Provider (like `VercelAIProvider`) to bridge to the AI service, and a specific model (e.g., `openai('gpt-4o')`) to use for interactions. This setup forms the core of any VoltAgent application.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Handles communication
import { openai } from "@ai-sdk/openai"; // Defines the specific model source

const agent = new Agent({
  name: "My Assistant",
  instructions: "A helpful and friendly assistant that can answer questions clearly and concisely.",
  // The LLM Provider acts as the bridge to the AI service
  llm: new VercelAIProvider(),
  // The model specifies which AI model to use (e.g., from OpenAI via Vercel AI SDK)
  model: openai("gpt-4o")
});
```

----------------------------------------

TITLE: Initializing a Basic VoltAgent
DESCRIPTION: This snippet demonstrates how to initialize a basic VoltAgent instance using the core framework and integrate an AI provider (Vercel AI) and a specific language model (OpenAI's gpt-4o-mini). It sets up an agent with a name and instructions.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/overview.md#_snippet_0

LANGUAGE: tsx
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";

import { openai } from "@ai-sdk/openai";

const agent = new Agent({
  name: "my-voltagent-app",
  instructions: "A helpful assistant that answers questions without using tools",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});
```

----------------------------------------

TITLE: Defining a Basic VoltAgent and Agent (TypeScript)
DESCRIPTION: This TypeScript code defines a simple AI agent using VoltAgent. It imports necessary classes, initializes an `Agent` with a name, instructions, an LLM provider (VercelAIProvider), and a specific model (openai 'gpt-4o-mini'). Finally, it initializes the `VoltAgent` framework with the defined agent, making it ready to run.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/README.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Example provider
import { openai } from "@ai-sdk/openai"; // Example model

// Define a simple agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // Note: You can swap VercelAIProvider and openai with other supported providers/models
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Initialize VoltAgent with your agent(s)
new VoltAgent({
  agents: {
    agent
  }
});
```

----------------------------------------

TITLE: Configuring VoltAgent with Peaka MCP (TypeScript)
DESCRIPTION: This TypeScript code snippet demonstrates how to configure VoltAgent to integrate with the Peaka data tool via the Microservice Communication Protocol (MCP). It sets up the MCP connection using `npx` to run the Peaka server, retrieves the available tools from Peaka, creates a VoltAgent `Agent` instance with instructions, an LLM provider (Vercel AI), a specific model (gpt-4o-mini), and crucially, assigns the discovered Peaka tools to the agent. Finally, it initializes the main `VoltAgent` instance with the configured agent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-26-peaka-mcp-voltagent/index.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent, MCPConfiguration } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Using Vercel's helper stuff for the AI
import { openai } from "@ai-sdk/openai"; // And using OpenAI's model

// 1. Set up the connection to the Peaka MCP tool
const mcp = new MCPConfiguration({
  id: "peaka-mcp", // Just a nickname for this setup
  servers: {
    // Here's the info for the Peaka tool
    peaka: {
      type: "stdio", // Means it runs like a command-line program
      command: "npx", // The command to start it
      // npx is neat, it grabs the latest Peaka MCP tool automatically
      args: ["-y", "@peaka/mcp-server-peaka@latest"],
      // Gotta give it my Peaka API key (stored safely elsewhere!)
      env: { PEAKA_API_KEY: process.env.PEAKA_API_KEY || "" },
    },
  },
});

// 2. Find out what the Peaka tool can actually *do*
// (Need this `async` stuff because it takes a moment to connect)
(async () => {
  // Ask the MCP connection: "What tools does Peaka give us?"
  const tools = await mcp.getTools();

  // 3. Create our actual chatbot agent
  const agent = new Agent({
    name: "Peaka Data Agent",
    instructions: "I can look things up in Peaka's data.",
    llm: new VercelAIProvider(), // Which AI service to use
    model: openai("gpt-4o-mini"), // Which specific AI brain
    tools, // <-- Super important! Give the agent the tools from Peaka!
  });

  // 4. Fire up VoltAgent
  new VoltAgent({
    agents: {
      // Make our agent live
      agent,
    },
  });

  console.log("VoltAgent is running with Peaka powers!");
})();
```

----------------------------------------

TITLE: Refactoring Agent Definition: Using 'instructions' Field in JavaScript
DESCRIPTION: This snippet illustrates the updated approach for defining an `Agent` instance, replacing the `description` field with `instructions`. The `instructions` field is now the preferred method for providing behavioral guidance to the agent's underlying Large Language Model (LLM), aligning with the latest API usage and anticipating the eventual deprecation of `description` for `Agent` class definitions. It shows the initialization of an `Agent` with `name`, `instructions`, `llm` (VercelAIProvider), and `model` (openai 'gpt-4o-mini').
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_14

LANGUAGE: javascript
CODE:
```
const agent = new Agent({
  name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});
```

----------------------------------------

TITLE: Example of a Well-Described Tool (TypeScript)
DESCRIPTION: Provides an example of a tool definition following best practices, including a clear overall description and detailed descriptions for each parameter using Zod's `.describe()` method, crucial for the LLM's understanding.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_6

LANGUAGE: TypeScript
CODE:
```
const goodTool = createTool({
  name: "search_web",
  description:
    "Searches the web for current information on a topic. Use this when you need to find recent or factual information that may not be in your training data.", // Clear purpose and usage guidance
  parameters: z.object({
    query: z
      .string()
      .describe("The search query. Should be specific and focused on what information is needed."),
    results_count: z
      .number()
      .min(1)
      .max(10)
      .optional()
      .describe("Number of results to return. Defaults to 3 if not specified."),
  }),
  execute: async (args) => {
    /* ... */
  },
});
```

----------------------------------------

TITLE: Creating New VoltAgent Project (Bash)
DESCRIPTION: Use the create-voltagent-app CLI tool to quickly scaffold a new VoltAgent project with a basic structure.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/cli/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest
```

----------------------------------------

TITLE: Creating a New VoltAgent Project (Bash)
DESCRIPTION: This command sequence initializes a new VoltAgent application using `npm create voltagent-app` in a specified directory (`my-agent-app`) and then changes the current directory into the newly created project folder. It's the standard first step to set up a VoltAgent development environment.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CONSOLE.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest my-agent-app
cd my-agent-app
```

----------------------------------------

TITLE: Setting Up VoltAgent Project with npm
DESCRIPTION: This snippet demonstrates the initial setup steps for a new VoltAgent project. It involves creating a new application using the `voltagent-app` CLI, navigating into the newly created project directory, and installing all necessary dependencies.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-26-llm-agents/index.md#_snippet_4

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest my-first-agent
cd my-first-agent
npm install
```

----------------------------------------

TITLE: Initializing a New VoltAgent Project (CLI)
DESCRIPTION: This command uses the `create-voltagent-app` CLI tool to quickly set up a new VoltAgent project. It guides the user through the initial project configuration, creating the necessary file structure and starter code.
SOURCE: https://github.com/voltagent/voltagent/blob/main/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest
```

----------------------------------------

TITLE: Defining and Initializing a Basic VoltAgent
DESCRIPTION: This TypeScript snippet demonstrates how to define a simple AI agent using `@voltagent/core` and integrate it with an LLM provider like `VercelAIProvider` and a model such as `openai('gpt-4o-mini')`. It initializes the `VoltAgent` instance with the defined agent, making it ready for interaction.
SOURCE: https://github.com/voltagent/voltagent/blob/main/README.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Example provider
import { openai } from "@ai-sdk/openai"; // Example model

// Define a simple agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // Note: You can swap VercelAIProvider and openai with other supported providers/models
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Initialize VoltAgent with your agent(s)
new VoltAgent({
  agents: {
    agent
  }
});
```

----------------------------------------

TITLE: Generate Structured Object with Groq and Voltagent (TypeScript)
DESCRIPTION: Illustrates how to use the generateObject method with a Zod schema to instruct the Groq model to return a structured JSON object based on a prompt, highlighting the need for a JSON-mode compatible model and appropriate temperature settings.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/groq-ai.md#_snippet_8

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { GroqProvider } from "@voltagent/groq-ai";
import { z } from "zod"; // Import Zod

// Define a Zod schema for the desired object structure
const citySchema = z.object({
  name: z.string().describe("The city name"),
  country: z.string().describe("The country the city is in"),
  population: z.number().int().positive().describe("Estimated population"),
  landmarks: z.array(z.string()).describe("List of famous landmarks")
});

async function main() {
  const groqProvider = new GroqProvider();

  // Use a model supporting JSON mode
  const agent = new Agent({
    name: "Groq Object Agent",
    instructions: "Generates structured data using Groq AI",
    llm: groqProvider,
    model: "llama3-70b-8192",
  });

  const prompt = "Generate details for Paris, France.";

  try {
    // Call generateObject with the prompt and Zod schema
    const response = await agent.generateObject(prompt, citySchema, {
      provider: {
        temperature: 0.1, // Low temperature for JSON mode
      },
    });

    console.log("Generated Object:");
    console.log(response.object);
    console.log("Usage:", response.usage);
    console.log("Finish Reason:", response.finishReason);
  } catch (error) {
    console.error("Error generating object:", error);
  }
}

main();
```

----------------------------------------

TITLE: Stream Structured Object from Agent (curl)
DESCRIPTION: This `curl` command sends a POST request to the agent's stream-object endpoint. It includes input text, a JSON representation of a Zod schema defining the expected output structure, and optional parameters like userId and conversationId. The `-N` flag disables buffering, allowing the SSE stream to be processed as data arrives.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/api/overview.md#_snippet_9

LANGUAGE: bash
CODE:
```
curl -N -X POST http://localhost:3141/agents/your-agent-id/stream-object \
     -H "Content-Type: application/json" \
     -d '{ "input": "Generate user profile: Name: Alice, City: Wonderland", "schema": {"type":"object", "properties": {"name": {"type": "string"}, "city": {"type": "string"}}, "required": ["name", "city"]}, "options": { "userId": "user-123", "conversationId": "your-unique-conversation-id" } }'
```

----------------------------------------

TITLE: Initializing E-commerce Customer Support Agent in Voltagent (TypeScript)
DESCRIPTION: This snippet initializes a `supportAgent` using the Voltagent `Agent` class, configured for e-commerce customer support. It defines the agent's name, instructions, and integrates specific tools like `orderLookupTool`, `refundProcessTool`, and `humanHandoffTool` for order tracking and refunds, along with `ConversationMemory` for context. This setup aims to reduce human escalation and improve response times.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_18

LANGUAGE: typescript
CODE:
```
const supportAgent = new Agent({
  name: "support-bot",
  instructions: "E-commerce customer support, can track orders",
  tools: [orderLookupTool, refundProcessTool, humanHandoffTool],
  memory: new ConversationMemory(),
});
```

----------------------------------------

TITLE: Implementing a Simple RAG Agent (TypeScript)
DESCRIPTION: Defines a custom `KnowledgeBaseRetriever` and an `Agent` that uses it for Retrieval-Augmented Generation, then initializes the VoltAgent server.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-24-rag-chatbot/index.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent, BaseRetriever, type BaseMessage } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// --- Simple Knowledge Base Retriever ---

class KnowledgeBaseRetriever extends BaseRetriever {
  // Our tiny "knowledge base"
  private documents = [
    {
      id: "doc1",
      content: "What is VoltAgent? VoltAgent is a TypeScript framework for building AI agents.",
    },
    {
      id: "doc2",
      content:
        "What features does VoltAgent support? VoltAgent supports tools, memory, sub-agents, and retrievers for RAG.",
    },
    { id: "doc3", content: "What is RAG? RAG stands for Retrieval-Augmented Generation." },
    {
      id: "doc4",
      content:
        "How can I test my agent? You can test VoltAgent agents using the VoltAgent Console.",
    },
  ];

  // Reverting to simple retrieve logic
  async retrieve(input: string | BaseMessage[]): Promise<string> {
    const query = typeof input === "string" ? input : (input[input.length - 1].content as string);
    const queryLower = query.toLowerCase();
    console.log(`[KnowledgeBaseRetriever] Searching for context related to: "${query}"`);

    // Simple includes check
    const relevantDocs = this.documents.filter((doc) =>
      doc.content.toLowerCase().includes(queryLower)
    );

    if (relevantDocs.length > 0) {
      const contextString = relevantDocs.map((doc) => `- ${doc.content}`).join("\n");
      console.log(`[KnowledgeBaseRetriever] Found context:\n${contextString}`);
      return `Relevant Information Found:\n${contextString}`;
    }

    console.log("[KnowledgeBaseRetriever] No relevant context found.");
    return "No relevant information found in the knowledge base.";
  }
}

// --- Agent Definition ---

// Instantiate the retriever
const knowledgeRetriever = new KnowledgeBaseRetriever();

// Define the agent that uses the retriever directly
const simpleAgent = new Agent({
  name: "Simple Assistant",
  instructions: "A chatbot that answers questions based on its internal knowledge base.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  // Attach the retriever directly
  retriever: knowledgeRetriever,
});

// --- VoltAgent Initialization ---

new VoltAgent({
  agents: {
    // Make the agent available under the key 'simpleAgent'
    simpleAgent,
  },
});
```

----------------------------------------

TITLE: Stream Text with Groq and Voltagent (TypeScript)
DESCRIPTION: Shows how to set up a Voltagent Agent with GroqProvider and use the streamText method to receive the AI's response in real-time chunks via an async iterator, printing each chunk as it arrives.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/groq-ai.md#_snippet_7

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { GroqProvider } from "@voltagent/groq-ai";

async function main() {
  const groqProvider = new GroqProvider({
    // Or provide apiKey directly
    // apiKey: 'YOUR_GROQ_API_KEY'
  });

  const agent = new Agent({
    name: "Groq Streaming Agent",
    instructions: "Streams text using Groq AI",
    llm: groqProvider,
    model: "llama3-8b-8192", // Example model
  });

  const prompt = "Write a haiku about speed.";

  try {
    const streamResponse = await agent.streamText(prompt);

    console.log(`Streaming agent response to "${prompt}":`);
    let fullText = "";
    for await (const chunk of streamResponse.textStream) {
      fullText += chunk;
      process.stdout.write(chunk);
    }
    console.log("\n--- Stream Finished ---");
    // Note: Usage info might be available via callbacks (onFinish/onStepFinish)
    // or attached to the stream result in the provider implementation.
    // Check GroqProvider source for specifics if needed.
  } catch (error) {
    console.error("Error streaming text:", error);
  }
}

main();
```

----------------------------------------

TITLE: Streaming Text with Voltagent and Vercel AI SDK (TypeScript)
DESCRIPTION: Provides a complete example function main that instantiates a voltagent Agent using VercelProvider and an Anthropic model, then calls agent.streamText with a prompt and streams the response chunks to the console. Requires @voltagent/core, @voltagent/vercel-ai, and @ai-sdk/anthropic.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_8

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelProvider } from "@voltagent/vercel-ai";
import { anthropic } from "@ai-sdk/anthropic";

async function main() {
  const vercelProvider = new VercelProvider();

  const agent = new Agent({
    name: "Vercel Streaming Agent",
    instructions: "A streaming agent powered by Vercel AI SDK",
    llm: vercelProvider,
    model: anthropic("claude-3-haiku-20240307"),
  });

  const prompt = "Write a short story about a robot learning to paint.";

  try {
    const streamResponse = await agent.streamText(prompt);

    console.log(`Streaming agent response to "${prompt}":`);
    for await (const chunk of streamResponse.textStream) {
      process.stdout.write(chunk);
    }
    console.log();
  } catch (error) {
    console.error("Error streaming text:", error);
  }
}

main();
```

----------------------------------------

TITLE: Creating and Using a Basic Voltagent (TypeScript)
DESCRIPTION: This snippet shows the straightforward process of creating a basic Voltagent 'Agent' with a name, instructions, LLM provider, and model. It also demonstrates how to use the agent to generate text and log the response.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_5

LANGUAGE: typescript
CODE:
```
const agent = new Agent({
  name: "My Assistant",
  instructions: "Helpful and friendly assistant",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o")
});

// Usage is also simple
const response = await agent.generateText("Hello!");
console.log(response.text);
```

----------------------------------------

TITLE: Defining Basic Calculator Tool (VoltAgent)
DESCRIPTION: Demonstrates how to use the `createTool` helper function to define a simple, type-safe calculator tool. It shows how to specify the tool's name, description, parameters using a Zod schema, and the asynchronous `execute` function that performs the tool's logic.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
import { createTool } from "@voltagent/core";
import { z } from "zod";

const calculatorTool = createTool({
  name: "calculate",
  description: "Perform a mathematical calculation",
  parameters: z.object({
    expression: z.string().describe("The mathematical expression to evaluate, e.g. (2 + 2) * 3")
  }),
  execute: async (args) => {
    try {
      // In production, use a secure math parser instead of eval
      const result = eval(args.expression);
      return { result };
    } catch (error) {
      throw new Error(`Invalid expression: ${args.expression}`);
    }
  }
});
```

----------------------------------------

TITLE: Creating Repository Analysis Agent in Voltagent (TypeScript)
DESCRIPTION: This code defines a `codeAnalyzer` agent within the Voltagent framework, designed to analyze code repositories and provide suggestions. It is configured with instructions to 'Analyze repository, make suggestions' and integrates tools such as `githubConnector`, `codeQualityAnalyzer`, and `documentationChecker` to perform its tasks. This demonstrates rapid development of production-ready tools.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_19

LANGUAGE: typescript
CODE:
```
const codeAnalyzer = new Agent({
  name: "code-analyzer",
  instructions: "Analyze repository, make suggestions",
  tools: [githubConnector, codeQualityAnalyzer, documentationChecker],
});
```

----------------------------------------

TITLE: Integrating Reasoning Tools into a VoltAgent Instance
DESCRIPTION: This example illustrates how to integrate the `reasoningToolkit` into a new `Agent` instance within the VoltAgent framework. It initializes an agent named "MyThinkingAgent" with specific instructions, an LLM provider (VercelAIProvider with `gpt-4o-mini`), and passes the `reasoningToolkit` directly to the agent's `tools` array. This setup ensures the agent's system message automatically includes the reasoning instructions, enabling structured thinking capabilities.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_12

LANGUAGE: TypeScript
CODE:
```
// Example: Using the new reasoning tools helper
import { Agent, createReasoningTools, type Toolkit } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const reasoningToolkit: Toolkit = createReasoningTools({
  addInstructions: true,
});

const agent = new Agent({
  name: "MyThinkingAgent",
  instructions: "An agent equipped with reasoning tools.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  tools: [reasoningToolkit], // Pass the toolkit
});

// Agent's system message will include reasoning instructions.
```

----------------------------------------

TITLE: Attaching a Retriever Directly to a VoltAgent
DESCRIPTION: This code demonstrates how to integrate a custom retriever with a VoltAgent by assigning an instance of the retriever to the `retriever` property in the Agent's configuration. In this setup, the retriever's `retrieve` method is automatically called before every LLM interaction, and the retrieved context is added to the prompt sent to the LLM.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/retriever.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
// Assuming MySimpleRetriever is defined as above

// Create an instance of your retriever (tool options are ignored here)
const retrieverInstance = new MySimpleRetriever();

// Define a placeholder provider for the example
const provider = new VercelAIProvider();

// Create an agent and attach the retriever directly
const agent = new Agent({
  name: "RAG Assistant",
  instructions: "A helpful assistant with access to document knowledge",
  llm: provider,
  model: openai("gpt-4o"),
  // Attach the retriever instance directly
  // highlight-next-line
  retriever: retrieverInstance,
});

// Example Usage:
// When generateText is called, MySimpleRetriever.retrieve() runs first automatically.
// The returned context string is added to the prompt sent to the LLM.
// const response = await agent.generateText("What features does VoltAgent support?");
// console.log(response.text); // Response should incorporate info from doc3
```

----------------------------------------

TITLE: Propagating User Context to Sub-Agents and Tools (TypeScript)
DESCRIPTION: This snippet demonstrates how to pass `userContext` from a supervisor agent to its sub-agents and their tools, ensuring consistent contextual data across delegated tasks. It shows how to set `userContext` when initiating an operation and how to access it within a sub-agent's `onStart` hook and a tool's `execute` function via `OperationContext`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_0

LANGUAGE: typescript
CODE:
```
// Supervisor Agent initiates an operation with userContext:
const supervisorContext = new Map<string | symbol, unknown>();
supervisorContext.set("globalTransactionId", "tx-supervisor-12345");

await supervisorAgent.generateText(
  "Delegate analysis of transaction tx-supervisor-12345 to the financial sub-agent.",
  { userContext: supervisorContext }
);

// In your sub-agent's hook definition (e.g., within createHooks):
onStart: ({ agent, context }: OnStartHookArgs) => {
  const inheritedUserContext = context.userContext; // Access the OperationContext's userContext
  const transactionId = inheritedUserContext.get("globalTransactionId");
  console.log(`[${agent.name}] Hook: Operating with Transaction ID: ${transactionId}`);
  // Expected log: [FinancialSubAgent] Hook: Operating with Transaction ID: tx-supervisor-12345
};

// Example: Inside a Tool executed by the Sub-Agent
// In your sub-agent tool's execute function:
execute: async (params: { someParam: string }, options?: ToolExecutionContext) => {
  if (options?.operationContext?.userContext) {
    const inheritedUserContext = options.operationContext.userContext;
    const transactionId = inheritedUserContext.get("globalTransactionId");
    console.log(`[SubAgentTool] Tool: Processing with Transaction ID: ${transactionId}`);
    // Expected log: [SubAgentTool] Tool: Processing with Transaction ID: tx-supervisor-12345
    return `Processed ${params.someParam} for transaction ${transactionId}`;
  }
  return "Error: OperationContext not available for tool";
};
```

----------------------------------------

TITLE: Refactoring Agent Definition with Instructions Field (TypeScript)
DESCRIPTION: This snippet illustrates the refactoring of `Agent` definitions to use the `instructions` field instead of `description`. The `instructions` field is now the preferred way to provide behavioral guidance to the agent/LLM, aligning with updated API usage and preparing for the eventual deprecation of the `description` field specifically for `Agent` instances.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/google-ai/CHANGELOG.md#_snippet_1

LANGUAGE: typescript
CODE:
```
const agent = new Agent({
  name: "My Assistant",
  instructions: "A helpful assistant.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});
```

----------------------------------------

TITLE: Refactoring Agent Definition: `description` to `instructions` - Diff
DESCRIPTION: This diff snippet illustrates the refactoring of the `Agent` class definition in VoltAgent. It shows the change from using the `description` field to the `instructions` field, which is now the preferred API for providing behavioral guidance to the agent. This change aligns with updated API usage and prepares for the deprecation of the `description` field for `Agent` instances.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_19

LANGUAGE: diff
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Refactoring Agent Definition: Using instructions field (TypeScript)
DESCRIPTION: This code snippet shows the change in defining a VoltAgent Agent instance, replacing the 'description' field with the 'instructions' field to align with the preferred API for providing behavioral guidance to the agent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/langfuse-exporter/CHANGELOG.md#_snippet_0

LANGUAGE: diff
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Defining and Using Tools with VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to define and integrate custom tools with VoltAgent to allow agents to interact with external systems. It shows creating a `weatherTool` using `createTool` with a Zod schema for parameters and an `execute` function, then configuring an Agent to use this tool for dynamic information retrieval based on user prompts.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_5

LANGUAGE: ts
CODE:
```
import { Agent, createTool } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
import { z } from "zod";

// Create a weather tool using the helper function
const weatherTool = createTool({
  name: "get_weather",
  description: "Get the current weather for a specific location",
  parameters: z.object({
    location: z.string().describe("The city and state, e.g., San Francisco, CA"),
  }),
  // The function the agent executes when using the tool
  execute: async ({ location }) => {
    console.log(`Tool: Getting weather for ${location}`);
    // In a real scenario, call a weather API here
    // Returning mock data for demonstration
    if (location.toLowerCase().includes("london")) {
      return { temperature: 55, conditions: "cloudy" };
    }
    return { temperature: 72, conditions: "sunny" };
  },
});

const agent = new Agent({
  name: "Weather Assistant",
  instructions: "An assistant that can check the weather using available tools.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"), // Models supporting tool use are required
  tools: [weatherTool], // Provide the list of tools to the agent
});

// Example: Call streamText and the agent might use the tool
const response = await agent.generateText("What's the weather in London?");
console.log(response.text);
// The agent should call the 'get_weather' tool during the generation.
```

----------------------------------------

TITLE: Implementing RAG System with Voltagent Agents (TypeScript)
DESCRIPTION: This example demonstrates a Retrieval-Augmented Generation (RAG) system using two interconnected Voltagent agents. The `retrieverAgent` is configured to find relevant documents from a vector database using `vectorSearchTool` and `rankingTool`. The `responderAgent` then utilizes the `retrieverAgent` as a sub-agent to generate detailed answers based on the retrieved context, showcasing a multi-agent architecture for complex tasks.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_20

LANGUAGE: typescript
CODE:
```
const retrieverAgent = new Agent({
  name: "document-finder",
  instructions: "Find relevant documents from vector DB",
  tools: [vectorSearchTool, rankingTool],
});
```

LANGUAGE: typescript
CODE:
```
const responderAgent = new Agent({
  name: "answer-generator",
  instructions: "Create detailed answer using context",
  subAgents: [retrieverAgent],
});
```

----------------------------------------

TITLE: Defining and Initializing a Simple VoltAgent
DESCRIPTION: This TypeScript snippet shows the basic structure of a VoltAgent application. It defines a simple agent with instructions, an LLM provider (VercelAIProvider), and a model (openai), then initializes the VoltAgent instance with this agent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/voice/README.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Example provider
import { openai } from "@ai-sdk/openai"; // Example model

// Define a simple agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // Note: You can swap VercelAIProvider and openai with other supported providers/models
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Initialize VoltAgent with your agent(s)
new VoltAgent({
  agents: {
    agent,
  },
});
```

----------------------------------------

TITLE: Defining and Initializing Basic VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to import necessary components, define a simple agent with instructions and an LLM provider/model, and initialize the VoltAgent instance with the defined agent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/vercel-ai/README.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Example provider
import { openai } from "@ai-sdk/openai"; // Example model

// Define a simple agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // Note: You can swap VercelAIProvider and openai with other supported providers/models
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Initialize VoltAgent with your agent(s)
new VoltAgent({
  agents: {
    agent,
  },
});
```

----------------------------------------

TITLE: Configuring an Agent with Vercel AI Provider in TypeScript
DESCRIPTION: This snippet demonstrates how to configure a VoltAgent `Agent` instance to use an LLM Provider, specifically the `VercelAIProvider`. It shows the steps for importing the necessary classes, instantiating the provider, and then creating an `Agent` by assigning the provider to the `llm` property and specifying a model from the Vercel AI SDK. It also includes an example of using the configured agent to generate text.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/providers.md#_snippet_0

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";

// 1. Import your chosen provider
// Example: using the VercelAIProvider
import { VercelAIProvider } from "@voltagent/vercel-ai";
// Import the model definition from the Vercel AI SDK
import { openai } from "@ai-sdk/openai";

// 2. Instantiate and configure the provider
// VercelAIProvider often requires no constructor arguments (relies on env vars)
const myProvider = new VercelAIProvider();

// 3. Create the Agent, passing the provider and model ID
const agent = new Agent({
  name: "My Configured Agent",
  instructions: "An agent ready to interact via the specified provider",
  llm: myProvider, // Assign the provider instance
  model: openai("gpt-4o-mini"), // Pass the model object from Vercel AI SDK
});

// 4. Now you can use the agent's methods (generateText, streamText, etc.)
async function run() {
  const response = await agent.generateText("How does the provider architecture help?");
  console.log(response.text);
}

run();
```

----------------------------------------

TITLE: Instantiating Agent with AnthropicProvider and Generating Text (TypeScript)
DESCRIPTION: This example illustrates how to create an `Agent` instance using the `AnthropicProvider` and then use it to generate text. It sets up the agent with a specific Claude model and demonstrates an asynchronous call to `generateText` to get a response.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/anthropic-ai/README.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { AnthropicProvider } from "@voltagent/anthropic-ai";

const anthropicProvider = new AnthropicProvider({ apiKey: "YOUR_ANTHROPIC_API_KEY" });

const agent = new Agent({
  name: "Claude Agent",
  instructions: "An agent powered by Claude",
  llm: anthropicProvider,
  model: "claude-3-sonnet-20240229" // Specify the desired Claude model
});

// Example call
async function run() {
  const response = await agent.generateText("What is the capital of France?");
  console.log(response.text);
}

run();
```

----------------------------------------

TITLE: Defining and Using Multiple Tools (VoltAgent)
DESCRIPTION: Shows how to define multiple tools (a calculator and a weather tool) using `createTool` and Zod, and then configure a single `Agent` instance to include both tools. This enables the agent to select and use the appropriate tool(s) based on the user's request.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_2

LANGUAGE: TypeScript
CODE:
```
import { Agent, createTool } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
import { z } from "zod";

// Calculator tool
const calculatorTool = createTool({
  name: "calculate",
  description: "Perform a mathematical calculation",
  parameters: z.object({
    expression: z.string().describe("The mathematical expression to evaluate")
  }),
  execute: async (args) => {
    try {
      // args is automatically typed as { expression: string }
      const result = eval(args.expression);
      return { result };
    } catch (error) {
      throw new Error(`Invalid expression: ${args.expression}`);
    }
  }
});

// Weather tool
const weatherTool = createTool({
  name: "get_weather",
  description: "Get the current weather for a location",
  parameters: z.object({
    location: z.string().describe("The city name")
  }),
  execute: async (args) => {
    // args is automatically typed as { location: string }
    const { location } = args;

    // In a real implementation, you would call a weather API
    // This is a simplified example
    return {
      location,
      temperature: 22,
      conditions: "sunny"
    };
  }
});

// Create an agent with multiple tools
const multiToolAgent = new Agent({
  name: "Multi-Tool Assistant",
  description: "An assistant that can check weather and perform calculations",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  tools: [calculatorTool, weatherTool]
});

// The agent can now use both tools in the same conversation
const response = await multiToolAgent.generateText(
  "What's the weather in Paris today? Also, what is 24 * 7?"
);
console.log(response.text);

// Example response:
// "The current weather in Paris is 22°C and sunny. As for your calculation, 24 * 7 = 168."
```

----------------------------------------

TITLE: Initializing a Basic AI Agent with VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to create and configure a simple AI agent using VoltAgent. It initializes an Agent instance with a name, instructions, a language model provider (Vercel AI), and a specific OpenAI model (gpt-4o). The agent can then generate text responses based on user queries.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-26-llm-agents/index.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const agent = new Agent({
  name: "My Helper",
  instructions: "A friendly assistant. Gives clear and genuine answers to questions.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o")
});

// Usage
const response = await agent.generateText("How's the weather today?");
```

----------------------------------------

TITLE: Creating a New VoltAgent Project (Bash)
DESCRIPTION: Use the `create-voltagent-app` CLI tool to quickly scaffold a new VoltAgent project. This command initiates an interactive setup process.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/xsai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest
```

----------------------------------------

TITLE: Creating a Supervisor Agent with Subagents in @voltagent/core (TypeScript)
DESCRIPTION: This snippet shows how to create a supervisor agent that orchestrates tasks among specialized subagents. A new `Agent` instance is created for the supervisor, defining its name, instructions, LLM provider, and model. The key step is passing an array of the previously created specialized agents (`storyAgent`, `translatorAgent`) to the `subAgents` property during initialization. This configuration automatically enhances the supervisor's prompt and adds a `delegate_task` tool.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/subagents.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Create a supervisor agent with specialized agents as subagents
const supervisorAgent = new Agent({
  name: "Supervisor Agent",
  instructions: "You manage a workflow between specialized agents.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  // Specify subagents during initialization
  subAgents: [storyAgent, translatorAgent],
});
```

----------------------------------------

TITLE: Creating a New VoltAgent Project (CLI)
DESCRIPTION: Use the `create-voltagent-app` CLI tool to quickly scaffold a new VoltAgent project with a specified name.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-24-rag-chatbot/index.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest with-rag-chatbot
```

----------------------------------------

TITLE: Implementing a Custom Retriever in VoltAgent for RAG (TypeScript)
DESCRIPTION: This snippet illustrates how to create and integrate a custom `BaseRetriever` into a VoltAgent. The `SimpleRetriever` class demonstrates fetching relevant documents based on a query, which are then automatically added to the LLM's system prompt to enable Retrieval-Augmented Generation (RAG), allowing the agent to answer questions using external knowledge.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_9

LANGUAGE: TypeScript
CODE:
```
import { BaseRetriever } from "@voltagent/core";
import type { BaseMessage } from "@voltagent/core";
import { Agent }M from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Create a simple retriever (replace with actual vector search in production)
class SimpleRetriever extends BaseRetriever {
  // Sample knowledge base
  private documents = [
    { id: "doc1", content: "VoltAgent is a TypeScript framework for building AI agents." },
    { id: "doc2", content: "Agents can use tools, memory, and sub-agents." },
    { id: "doc3", content: "Retrievers enhance AI agents with external knowledge using RAG." },
  ];

  // Method to fetch relevant documents
  async retrieve(input: string | BaseMessage[]): Promise<string> {
    // Extract the query text
    const query = typeof input === "string" ? input : (input[input.length - 1].content as string);
    console.log(`Retriever: Searching for "${query}"`);

    // Simple keyword matching (use vector embeddings for real applications)
    const results = this.documents.filter((doc) =>
      doc.content.toLowerCase().includes(query.toLowerCase())
    );

    if (results.length === 0) return "No relevant information found in documents.";

    // Format results for the LLM
    return results.map((doc) => `Document ${doc.id}: ${doc.content}`).join("\n\n");
  }
}

// Create agent with the retriever
const agent = new Agent({
  name: "Knowledge Assistant",
  instructions: "An assistant that uses retrieved documents to answer questions.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  retriever: new SimpleRetriever(), // Add the retriever instance
});

// Example: Ask a question using streamText
const response = await agent.generateText("What are Retrievers in VoltAgent?");
console.log(response.text);
// The agent will use SimpleRetriever *before* calling the LLM,
// then generate an answer based on the retrieved context.
```

----------------------------------------

TITLE: Defining and Initializing a Basic VoltAgent (TypeScript)
DESCRIPTION: This TypeScript code defines a simple AI agent named 'my-agent' using the `@voltagent/core` library. It configures the agent with instructions, an LLM provider (VercelAIProvider), and a specific OpenAI model (gpt-4o-mini), then initializes the VoltAgent framework with this agent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/langfuse-exporter/README.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Example provider
import { openai } from "@ai-sdk/openai"; // Example model

// Define a simple agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // Note: You can swap VercelAIProvider and openai with other supported providers/models
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Initialize VoltAgent with your agent(s)
new VoltAgent({
  agents: {
    agent
  }
});
```

----------------------------------------

TITLE: Defining and initializing a VoltAgent
DESCRIPTION: Example TypeScript code demonstrating how to import core components, define a simple agent with instructions and an LLM, and initialize the VoltAgent framework with the agent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/supabase/README.md#_snippet_4

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Example provider
import { openai } from "@ai-sdk/openai"; // Example model

// Define a simple agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // Note: You can swap VercelAIProvider and openai with other supported providers/models
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Initialize VoltAgent with your agent(s)
new VoltAgent({
  agents: {
    agent,
  }
});
```

----------------------------------------

TITLE: Configuring VoltAgent with Langfuse Exporter (TypeScript)
DESCRIPTION: This TypeScript code demonstrates how to import and configure the LangfuseExporter, passing it to the VoltAgent constructor via the 'telemetryExporter' option to enable automatic OpenTelemetry tracing and export to Langfuse. It requires Langfuse environment variables to be set.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/langfuse-exporter/CHANGELOG.md#_snippet_2

LANGUAGE: typescript
CODE:
```
import { Agent, VoltAgent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

import { LangfuseExporter } from "@voltagent/langfuse-exporter";

// Ensure LANGFUSE_SECRET_KEY and LANGFUSE_PUBLIC_KEY are set in your environment

// Define your agent(s)
const agent = new Agent({
  name: "my-voltagent-app",
  instructions: "A helpful assistant that answers questions without using tools",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});

// Configure the Langfuse Exporter
const langfuseExporter = new LangfuseExporter({
  publicKey: process.env.LANGFUSE_PUBLIC_KEY,
  secretKey: process.env.LANGFUSE_SECRET_KEY,
  baseUrl: process.env.LANGFUSE_BASE_URL, // Optional: Defaults to Langfuse Cloud
  // debug: true // Optional: Enable exporter logging
});

// Initialize VoltAgent with the exporter
// This automatically sets up OpenTelemetry tracing
new VoltAgent({
  agents: {
    agent, // Register your agent(s)
  },
  telemetryExporter: langfuseExporter, // Pass the exporter instance
});

console.log("VoltAgent initialized with Langfuse exporter.");

// Now, any operations performed by 'agent' (e.g., agent.generateText(...))
// will automatically generate traces and send them to Langfuse.
```

----------------------------------------

TITLE: Generating Structured Data with Voltagent (TypeScript)
DESCRIPTION: This snippet demonstrates how to use the 'agent.generateObject' method with a defined Zod schema ('personSchema') to extract structured data from a prompt. The output 'result.object' is a type-safe JSON object.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_7

LANGUAGE: typescript
CODE:
```
const result = await agent.generateObject(
  "Create a profile for a software developer named Alex.",
  personSchema
);

console.log(result.object); // Type-safe JSON object
```

----------------------------------------

TITLE: Sending Multi-modal Messages to VoltAgent Agents
DESCRIPTION: This snippet demonstrates how to construct and send multi-modal messages to a VoltAgent agent using `generateText` or `streamText`. It shows how to create a `messages` array with a user message containing both text and image content parts. It requires `Agent` and `VercelProvider` from `@voltagent/core` and `@voltagent/vercel-ai` respectively.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/multi-modal.md#_snippet_4

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelProvider } from "@voltagent/vercel-ai";

// Assume 'agent' is an initialized Agent instance using the Vercel provider
declare const agent: Agent<VercelProvider>;

async function askAboutImage(imageUrlOrBase64: string, question: string) {
  const messages: BaseMessage[] = [
    {
      role: "user",
      content: [
        { type: "text", text: question },
        {
          type: "image",
          image: imageUrlOrBase64, // Can be Data URI or Base64 string
          // Ensure you provide mimeType if not using a Data URI
          // mimeType: 'image/jpeg'
        },
      ],
    },
  ];

  try {
    // Use generateText for a single response
    const response = await agent.generateText(messages);
    console.log("Agent Response:", response);

    // Or use streamText for streaming responses
    // const streamResponse = await agent.streamText(messages);
    // for await (const chunk of streamResponse.textStream) {
    //   process.stdout.write(chunk);
    // }
    // console.log(); // Newline after stream
  } catch (error) {
    console.error("Error generating response:", error);
  }
}

// Example usage:
const catImageBase64 = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQE...";
askAboutImage(catImageBase64, "What breed is this cat?");
```

----------------------------------------

TITLE: Generating Structured Data with VoltAgent and Zod (TypeScript)
DESCRIPTION: This snippet demonstrates how to use VoltAgent's `generateObject` and `streamObject` methods to produce LLM output conforming to a Zod schema. It initializes an Agent with a VercelAIProvider and OpenAI model, defines a `personSchema` using Zod, and then shows synchronous and streaming generation of structured data based on prompts.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_3

LANGUAGE: ts
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
import { z } from "zod";

const agent = new Agent({
  name: "Data Extractor",
  instructions: "Extracts structured data.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"), // Ensure model supports structured output/function calling
});

// Define a simple schema with Zod
const personSchema = z.object({
  name: z.string().describe("Full name"), // Descriptions help the LLM
  age: z.number(),
  occupation: z.string(),
  skills: z.array(z.string()),
});

// Example using generateObject
const objectResponse = await agent.generateObject(
  "Create a profile for a talented software developer named Alex.",
  personSchema
);
console.log("Complete object:", objectResponse.object);

// Example using streamObject
const streamObjectResponse = await agent.streamObject(
  "Generate details for a data scientist named Jamie.",
  personSchema
);

for await (const partial of streamObjectResponse.objectStream) {
  console.log("Received update:", partial); // Shows the object being built incrementally
}

const finalObject = await streamObjectResponse.object;
console.log("Final streamed object:", finalObject);
```

----------------------------------------

TITLE: Implementing Multi-Agent Coordination in VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to define and coordinate multiple specialized agents (e.g., 'Researcher', 'Writer') within VoltAgent using the sub-agent system. The 'Coordinator' agent automatically delegates tasks to its sub-agents, streamlining complex workflows and leveraging their specific instructions and tools. This enables breaking down large tasks into manageable, expert-driven sub-tasks.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_14

LANGUAGE: typescript
CODE:
```
const researchAgent = new Agent({
  name: "Researcher",
  instructions: "Research topics thoroughly using web search",
  tools: [webSearchTool],
});

const writerAgent = new Agent({
  name: "Writer",
  instructions: "Write engaging content based on research",
  tools: [contentGenerator],
});

const coordinator = new Agent({
  name: "Coordinator",
  instructions: "Coordinate research and writing tasks",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  subAgents: [researchAgent, writerAgent], // Automatic delegate_task tool
});

// Complex workflow in a single call
await coordinator.generateText("Write a blog post about quantum computing");
// Coordinator will give research to researcher, writing to writer
```

----------------------------------------

TITLE: Implementing Error Handling in Tool Execute Function (TypeScript)
DESCRIPTION: Demonstrates how to implement basic error handling within a tool's `execute` function using a `try...catch` block to catch potential errors and throw a new Error with a descriptive message for the agent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_7

LANGUAGE: TypeScript
CODE:
```
execute: async (args) => {
  try {
    // Tool implementation
    return result;
  } catch (error) {
    throw new Error(`Failed to process request: ${error.message}`);
  }
};
```

----------------------------------------

TITLE: Implementing Lifecycle Hooks in Voltagent Agents (TypeScript)
DESCRIPTION: This snippet illustrates how to define and attach lifecycle hooks to a Voltagent agent using `createHooks`. It shows examples of `onStart`, `onEnd`, `onToolStart`, and `onToolEnd` hooks, which allow observing and reacting to different stages of an agent's execution, such as interaction start/end and tool execution. These hooks provide context about the agent, operation, and any outputs or errors.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_7

LANGUAGE: TypeScript
CODE:
```
import {
  Agent,
  createHooks,
  type OnStartHookArgs,
  type OnEndHookArgs,
  type OnToolStartHookArgs,
  type OnToolEndHookArgs,
} from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const hooks = createHooks({
  // Called when any agent interaction starts (generateText, streamText, etc.)
  onStart: async ({ agent, context }: OnStartHookArgs) => {
    console.log(`Agent ${agent.name} starting interaction... Context:`, context);
  },
  // Called when the interaction finishes (successfully or with an error)
  onEnd: async ({ agent, output, error, context }: OnEndHookArgs) => {
    if (error) {
      console.error(`Agent ${agent.name} finished with error:`, error);
    } else if (output) {
      // Output format depends on the method called (e.g., { text: ..., usage: ... } for generateText)
      console.log(
        `Agent ${agent.name} finished successfully. Final output:`,
        output.text ?? output.object // Access 'text' or 'object' based on the operation type
      );
    }
    console.log("Finished context:", context);
  },
  // Called before a tool is executed
  onToolStart: async ({ agent, tool, context }: OnToolStartHookArgs) => {
    console.log(`Agent ${agent.name} starting tool: ${tool.name}. Context:`, context);
  },
  // Called after a tool finishes execution (successfully or with an error)
  onToolEnd: async ({ agent, tool, output, error, context }: OnToolEndHookArgs) => {
    if (error) {
      console.error(`Agent ${agent.name} failed tool: ${tool.name}. Error:`, error);
    } else {
      console.log(
        `Agent ${agent.name} finished tool: ${tool.name}. Result:`,
        output // Tool output is directly available
      );
    }
    console.log("Tool context:", context);
  },
  // Note: There is no top-level 'onError' hook. Errors are handled within onEnd and onToolEnd.
  // The 'onHandoff' hook (not shown here) is called when control is passed between agents (e.g., sub-agents).
});

const agent = new Agent({
  name: "Observable Agent",
  instructions: "An agent with logging hooks.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  hooks // Attach the defined hooks
});
```

----------------------------------------

TITLE: Creating Specialized Agents with @voltagent/core (TypeScript)
DESCRIPTION: This snippet demonstrates how to create individual specialized agents using the `@voltagent/core` library. Each agent is instantiated with a name, specific instructions defining its role, an LLM provider (like `VercelAIProvider`), and a language model (like `openai("gpt-4o-mini")`). These agents are designed to perform distinct tasks and will later be used as subagents under a supervisor.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/subagents.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Create a specialized agent for writing stories
const storyAgent = new Agent({
  name: "Story Agent",
  instructions: "You are a creative story writer. Create original, engaging short stories.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});

// Create a specialized agent for translation
const translatorAgent = new Agent({
  name: "Translator Agent",
  instructions: "You are a skilled translator. Translate text accurately.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});
```

----------------------------------------

TITLE: Defining a Tool with Zod Parameters for Type Safety (TypeScript)
DESCRIPTION: Demonstrates how to define a tool using `createTool` where the `args` parameter's type in the `execute` function is automatically inferred from the Zod schema provided in the `parameters` property, enabling type safety and IDE features.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_3

LANGUAGE: TypeScript
CODE:
```
const weatherTool = createTool({
  name: "get_weather",
  description: "Get the current weather for a location",
  parameters: z.object({
    location: z.string().describe("The city name"),
    unit: z.enum(["celsius", "fahrenheit"]).optional().describe("Temperature unit"),
  }),
  execute: async (args) => {
    // args is typed as { location: string; unit?: "celsius" | "fahrenheit" }
    const { location, unit = "celsius" } = args;
    // ...
  },
});
```

----------------------------------------

TITLE: Implementing User Context with Agent Hooks and Tools in TypeScript
DESCRIPTION: This snippet demonstrates how to utilize `userContext` within `@voltagent/core` to pass custom, operation-specific data. It shows setting `requestId` and `traceId` in `onStart` and retrieving them in `onEnd` hooks, as well as accessing this context within a `createTool`'s `execute` method for logging purposes. The context is isolated per agent operation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_5

LANGUAGE: typescript
CODE:
```
import {
  Agent,
  createHooks,
  createTool,
  type OperationContext,
  type ToolExecutionContext,
} from "@voltagent/core";
import { z } from "zod";

// Define hooks that set and retrieve data
const hooks = createHooks({
  onStart: (agent: Agent<any>, context: OperationContext) => {
    // Set data needed throughout the operation and potentially by tools
    const requestId = `req-${Date.now()}`;
    const traceId = `trace-${Math.random().toString(16).substring(2, 8)}`;
    context.userContext.set("requestId", requestId);
    context.userContext.set("traceId", traceId);
    console.log(
      `[${agent.name}] Operation started. RequestID: ${requestId}, TraceID: ${traceId}`
    );
  },
  onEnd: (agent: Agent<any>, result: any, context: OperationContext) => {
    // Retrieve data at the end of the operation
    const requestId = context.userContext.get("requestId");
    const traceId = context.userContext.get("traceId"); // Can retrieve traceId here too
    console.log(
      `[${agent.name}] Operation finished. RequestID: ${requestId}, TraceID: ${traceId}`
    );
    // Use these IDs for logging, metrics, cleanup, etc.
  },
});

// Define a tool that uses the context data set in onStart
const customContextTool = createTool({
  name: "custom_context_logger",
  description: "Logs a message using trace ID from the user context.",
  parameters: z.object({
    message: z.string().describe("The message to log."),
  }),
  execute: async (params: { message: string }, options?: ToolExecutionContext) => {
    // Access userContext via options.operationContext
    const traceId = options?.operationContext?.userContext?.get("traceId") || "unknown-trace";
    const requestId =
      options?.operationContext?.userContext?.get("requestId") || "unknown-request"; // Can access requestId too
    const logMessage = `[RequestID: ${requestId}, TraceID: ${traceId}] Tool Log: ${params.message}`;
    console.log(logMessage);
    // In a real scenario, you might interact with external systems using these IDs
    return `Logged message with RequestID: ${requestId} and TraceID: ${traceId}`;
  },
});

// Create an agent with the tool and hooks
const agent = new Agent({
  name: "MyCombinedAgent",
  llm: myLlmProvider, // Your LLM provider instance
  model: myModel, // Your model instance
  tools: [customContextTool],
  hooks: hooks,
});

// Trigger the agent. The LLM might decide to use the tool.
await agent.generateText(
  "Log the following information using the custom logger: 'User feedback received.'"
);

// Console output will show logs from onStart, the tool (if called), and onEnd,
// demonstrating context data flow.
```

----------------------------------------

TITLE: Defining a Basic VoltAgent and Agent
DESCRIPTION: This TypeScript code defines a simple `Agent` named 'my-agent' with specific instructions, using `VercelAIProvider` and `openai` (gpt-4o-mini) as the LLM. It then initializes `VoltAgent` by registering this agent, making it available for interaction.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_11

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Example provider
import { openai } from "@ai-sdk/openai"; // Example model

// Define a simple agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // Note: You can swap VercelAIProvider and openai with other supported providers/models
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});

// Initialize VoltAgent with your agent(s)
new VoltAgent({
  agents: {
    agent,
  },
});
```

----------------------------------------

TITLE: Refactoring Agent Definition to Use 'instructions' Field (Diff)
DESCRIPTION: This diff snippet illustrates the change from using the `description` field to the `instructions` field when defining an `Agent` instance. This update aligns with the preferred API usage, where `instructions` is used to provide behavioral guidance to the agent or LLM, anticipating the deprecation of `description` for `Agent` class definitions.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_1

LANGUAGE: diff
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Updating Agent Definition with Instructions Field in JavaScript
DESCRIPTION: This snippet demonstrates the refactoring of `Agent` instance definitions to use the `instructions` field instead of `description`. This change aligns with the preferred API usage for providing behavioral guidance to the agent/LLM and anticipates the deprecation of the `description` field for `Agent` class definitions. It shows how to initialize an `Agent` with `name`, `instructions`, `llm` provider, and `model`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_20

LANGUAGE: diff
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Installing VoltAgent Dependencies (npm)
DESCRIPTION: These npm commands install both development and production dependencies required for a VoltAgent project. Development dependencies include TypeScript, tsx, and the VoltAgent CLI, while production dependencies cover core VoltAgent libraries, Vercel AI integration, AI SDK, and Zod for schema validation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_6

LANGUAGE: bash
CODE:
```
# Install development dependencies
npm install --save-dev typescript tsx @types/node @voltagent/cli

# Install dependencies
npm install @voltagent/core @voltagent/vercel-ai @ai-sdk/openai zod
```

----------------------------------------

TITLE: Handling Asynchronous Streaming Errors with onError Callback in VoltAgent
DESCRIPTION: This snippet illustrates how to use the `onError` callback within the `provider` options of VoltAgent methods (e.g., `streamText`) to handle asynchronous errors that occur _during_ the streaming process. This callback provides a direct way to be notified of errors specific to that particular agent call, enabling real-time error handling without interrupting the main execution flow.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_22

LANGUAGE: TypeScript
CODE:
```
// Example with streamText
const response = await agent.streamText("Another request", {
  provider: {
    onError: async (error) => {
      console.error("onError callback: Stream encountered an error:", error);
      // Implement specific error handling for this call
    }
  }
});
```

----------------------------------------

TITLE: Initializing Agent with Google AI Provider (TypeScript)
DESCRIPTION: Configure and instantiate the `GoogleGenAIProvider` using an API key and then create a VoltAgent `Agent` instance, specifying the provider and the desired Google model. Ensure the API key is loaded securely, preferably from environment variables.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/google-ai/README.md#_snippet_2

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { GoogleGenAIProvider } from "@voltagent/google-ai";

// Ensure your API key is stored securely, e.g., in environment variables
const googleApiKey = process.env.GOOGLE_API_KEY;

// Instantiate the provider
const googleProvider = new GoogleGenAIProvider({
  apiKey: googleApiKey,
});

// Create an agent using a Google model
const agent = new Agent({
  name: "Google Assistant",
  instructions: "A helpful and friendly assistant that can answer questions clearly and concisely.",
  llm: googleProvider,
  model: "gemini-1.5-pro-latest", // Specify the desired Google model
});
```

----------------------------------------

TITLE: Using OpenAI Provider with VoltAgent
DESCRIPTION: Shows how to configure VoltAgent to use OpenAI as the language model provider instead of Amazon Bedrock. Requires an OpenAI API key, typically provided via an environment variable.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-zapier-mcp/README.md#_snippet_0

LANGUAGE: typescript
CODE:
```
import { OpenAIProvider } from "@voltagent/openai";

const openai = new OpenAIProvider({
  apiKey: process.env.OPENAI_API_KEY!,
});
```

----------------------------------------

TITLE: Configuring AnthropicProvider with Direct API Key (TypeScript)
DESCRIPTION: This snippet demonstrates how to initialize the `AnthropicProvider` by directly passing the Anthropic API key. This method is suitable for environments where the API key can be securely managed and provided at instantiation time.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/anthropic-ai/README.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { AnthropicProvider } from "@voltagent/anthropic-ai";

// Option 1: Direct API Key
const anthropicProvider = new AnthropicProvider({
  apiKey: "YOUR_ANTHROPIC_API_KEY"
});
```

----------------------------------------

TITLE: Initializing Agent with OpenAI Provider (TypeScript)
DESCRIPTION: This snippet demonstrates how to initialize a Voltagent 'Agent' using an OpenAI model via 'VercelAIProvider', showcasing the framework's provider-agnostic design for easy LLM switching.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_3

LANGUAGE: typescript
CODE:
```
const openaiAgent = new Agent({
  llm: new VercelAIProvider(),
  model: openai("gpt-4o")
});
```

----------------------------------------

TITLE: Define VoltAgent Agents and Hierarchy - TypeScript
DESCRIPTION: This snippet defines the core agents and their relationships for a GitHub repository analysis system using VoltAgent. It includes mock tool definitions, agents for fetching stars and contributors, an analyzer agent, and a supervisor agent that coordinates the sub-agents and initializes the VoltAgent system.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-21-first-ai-agent-github-repo-analyzer/index.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Assume these tools are defined elsewhere (e.g., src/tools.ts)
// import { fetchRepoContributorsTool, fetchRepoStarsTool } from "./tools";

// --- Mock Tools for Demonstration ---
// In a real scenario, you'd use actual tool implementations.
// We use simple functions here to illustrate agent structure.
const mockFetchRepoStarsTool = {
  name: "fetchRepoStars",
  description: "Fetches the star count for a given GitHub repository (owner/repo).",
  parameters: {
    type: "object",
    properties: {
      repo: { type: "string", description: 'Repository name (e.g., "voltagent/core")' },
    },
    required: ["repo"],
  },
  execute: async ({ repo }: { repo: string }) => ({ stars: Math.floor(Math.random() * 5000) }), // Mock data
};

const mockFetchRepoContributorsTool = {
  name: "fetchRepoContributors",
  description: "Fetches the contributors for a given GitHub repository (owner/repo).",
  parameters: {
    type: "object",
    properties: {
      repo: { type: "string", description: 'Repository name (e.g., "voltagent/core")' },
    },
    required: ["repo"],
  },
  execute: async ({ repo }: { repo: string }) => ({ contributors: ["UserA", "UserB", "UserC"] }), // Mock data
};
// --- End Mock Tools ---

// 1. Create the stars fetcher agent
const starsFetcherAgent = new Agent({
  name: "StarsFetcher",
  instructions: "Fetches the number of stars for a GitHub repository using a tool.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  tools: [mockFetchRepoStarsTool], // Use the mock tool
});

// 2. Create the contributors fetcher agent
const contributorsFetcherAgent = new Agent({
  name: "ContributorsFetcher",
  instructions: "Fetches the list of contributors for a GitHub repository using a tool.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  tools: [mockFetchRepoContributorsTool], // Use the mock tool
});

// 3. Create the analyzer agent (no tools needed)
const analyzerAgent = new Agent({
  name: "RepoAnalyzer",
  instructions: "Analyzes repository statistics (stars, contributors) and provides insights.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  // This agent doesn't need tools; it processes data provided by the supervisor.
});

// 4. Create the supervisor agent that coordinates all the sub-agents
const supervisorAgent = new Agent({
  name: "Supervisor",
  instructions: `You are a GitHub repository analyzer. When given a GitHub repository URL or owner/repo format, you will:
1. Extract the owner/repo name.
2. Use the StarsFetcher agent to get the repository's star count.
3. Use the ContributorsFetcher agent to get the repository's contributors.
4. Pass the collected data (stars, contributors) to the RepoAnalyzer agent.
5. Return the analysis provided by the RepoAnalyzer.

Example input: https://github.com/vercel/ai-sdk or vercel/ai-sdk
`,
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  subAgents: [starsFetcherAgent, contributorsFetcherAgent, analyzerAgent], // Assign sub-agents
});

// 5. Initialize the VoltAgent with the agent hierarchy
new VoltAgent({
  agents: {
    // We only expose the supervisor externally.
    // The supervisor will internally call the other agents.
    supervisor: supervisorAgent,
  },
});

console.log("GitHub Repo Analyzer Agent system started.");
```

----------------------------------------

TITLE: Generating Structured Objects with Voltagent (TypeScript)
DESCRIPTION: Illustrates generating a structured JSON object based on a Zod schema. It defines a `recipeSchema`, initializes an `Agent`, and calls `generateObject` with a prompt and the schema. The resulting object is logged after generation is complete.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_12

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { XsAIProvider } from "@voltagent/xsai";
import { z } from "zod";

const recipeSchema = z.object({
  dishName: z.string(),
  ingredients: z.array(z.object({ name: z.string(), quantity: z.string() })),
  steps: z.array(z.string()),
});

async function main() {
  const provider = new XsAIProvider({ apiKey: process.env.OPENAI_API_KEY! });

  const agent = new Agent({
    name: "xsAI Object Agent",
    instructions: "Generates structured objects",
    llm: provider,
    model: "gpt-4o", // Use a model known for good JSON output
  });

  const prompt = "Generate a simple recipe for pancakes as a JSON object.";

  try {
    const response = await agent.generateObject(prompt, recipeSchema);
    console.log("Generated Object:");
    console.log(JSON.stringify(response.object, null, 2));
    console.log("Usage:", response.usage);
    console.log("Finish Reason:", response.finishReason);
  } catch (error) {
    console.error("Error generating object:", error);
  }
}

main();
```

----------------------------------------

TITLE: Adding Subagent to Supervisor Agent (TypeScript)
DESCRIPTION: Demonstrates how to create a new specialized agent instance and add it as a subagent to an existing supervisor agent using the `addSubAgent` method. This process also registers the relationship in the AgentRegistry.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/subagents.md#_snippet_5

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Create a new specialized agent
const factCheckerAgent = new Agent({
  name: "Fact Checker Agent",
  instructions: "You verify facts and provide accurate information.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Add the agent as a subagent to the supervisor
// This also registers the relationship in AgentRegistry
supervisorAgent.addSubAgent(factCheckerAgent);
```

----------------------------------------

TITLE: Generating Structured Objects with Voltagent and Google AI (TypeScript)
DESCRIPTION: This snippet demonstrates how to use Voltagent's `generateObject` method to create a structured JSON object based on a Zod schema and a natural language prompt. It initializes an `Agent` with `GoogleGenAIProvider`, defines a `characterSchema` using Zod, and then calls `agent.generateObject` to generate character details. It also includes error handling and logs the generated object, usage, and finish reason.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/google-ai.md#_snippet_7

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { GoogleGenAIProvider } from "@voltagent/google-ai";
import { z } from "zod"; // Import Zod

// Define a Zod schema for the desired object structure
const characterSchema = z.object({
  name: z.string().describe("The character's name"),
  species: z.string().describe("The character's species"),
  abilities: z.array(z.string()).describe("List of key abilities"),
  homePlanet: z.string().optional().describe("The character's home planet (if known)"),
});

async function main() {
  const googleProvider = new GoogleGenAIProvider({
    apiKey: process.env.GEMINI_API_KEY,
  });

  // Ensure the model supports function calling/JSON mode
  const agent = new Agent({
    name: "Google Object Agent",
    instructions: "Generates structured data using Google AI",
    llm: googleProvider,
    model: "gemini-1.5-pro", // Models like Pro are generally better for structured output
  });

  const prompt =
    "Generate details for a sci-fi character: a veteran space pilot named Commander Valerius, who is human and known for exceptional navigation skills and piloting expertise.";

  try {
    // Call generateObject with the prompt and Zod schema
    const response = await agent.generateObject(prompt, characterSchema, {
      provider: {
        temperature: 0.2 // Lower temperature often helps with structured formats
      }
    });

    console.log("Generated Object:");
    console.log(response.object);
    console.log("Usage:", response.usage);
    console.log("Finish Reason:", response.finishReason);
  } catch (error) {
    console.error("Error generating object:", error);
  }
}

main();
```

----------------------------------------

TITLE: Demonstrating User Context Access in Agent Hooks and Tools (TypeScript)
DESCRIPTION: This snippet illustrates how to set and retrieve values from `userContext` within an agent's lifecycle hooks (`onStart`, `onEnd`) and a custom tool. It shows context propagation across different components of an agent operation, allowing for operation-specific data to be shared and accessed consistently throughout its execution.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/context.md#_snippet_3

LANGUAGE: TypeScript
CODE:
```
// Logger tool using context
const simpleContextTool = createTool({
  name: "log_with_context",
  description: "Logs a message using an ID from userContext.",
  parameters: z.object({ message: z.string() }),
  execute: async (params: { message: string }, options?: ToolExecutionContext) => {
    const operationIdFromContext = options?.operationContext?.userContext?.get("myOperationId");
    const logMessage = `[Tool Log][OpID: ${operationIdFromContext || "N/A"}] Message: ${params.message}`;
    console.log(logMessage);
    return `Logged: ${params.message} (OpID: ${operationIdFromContext || "N/A"})`;
  },
});

const agentWithToolContext = new Agent({
  name: "ToolContextAgent",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  tools: [simpleContextTool],
  hooks: createHooks({
    // Using hooks from the first "Quick Example"
    onStart: ({ agent, context }: OnStartHookArgs) => {
      const operationSpecificId = `op-${agent.name}-${Date.now()}`;
      context.userContext.set("myOperationId", operationSpecificId);
      console.log(`[${agent.name}] HOOK: Operation started. OpID set to: ${operationSpecificId}`);
    },
    onEnd: ({ agent, context }: OnEndHookArgs) => {
      const opId = context.userContext.get("myOperationId");
      console.log(`[${agent.name}] HOOK: Operation finished. Retrieved OpID: ${opId}`);
    }
  }),
  instructions: "Use the log_with_context tool to log your thoughts."
});

async function runToolContextTask() {
  await agentWithToolContext.generateText(
    "Log this message: 'Hello from the tool, using context!'"
  );
}
// runToolContextTask();
```

----------------------------------------

TITLE: Streaming Object Parts via Core API (Basic cURL)
DESCRIPTION: Demonstrates initiating an SSE stream for generating parts of a structured JSON object using the `/agents/{id}/stream-object` endpoint. Requires a JSON representation of a Zod schema for the `schema` parameter.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/api/overview.md#_snippet_8

LANGUAGE: bash
CODE:
```
# Note: SSE streams are continuous.
# Replace '{"type":"object", ...}' with the JSON representation of your Zod schema
curl -N -X POST http://localhost:3141/agents/your-agent-id/stream-object \
     -H "Content-Type: application/json" \
     -d '{ "input": "Generate user profile: Name: Alice, City: Wonderland", "schema": {"type":"object", "properties": {"name": {"type": "string"}, "city": {"type": "string"}}, "required": ["name", "city"]} }'
```

----------------------------------------

TITLE: Building an AI Calculator UI Component in Next.js (TypeScript)
DESCRIPTION: This client-side React component handles user input for an AI calculator. It uses `useState` for managing `result`, `loading`, and `expression` states. The `handleSubmit` function asynchronously calls a `calculateExpression` server action, updates the UI with the result, and manages loading states and error handling. It renders a form for expression input and displays the calculation result.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/integrations/nextjs.md#_snippet_7

LANGUAGE: TypeScript
CODE:
```
"use client";

import { useState } from "react";
import { calculateExpression } from "../actions";

export function Calculator() {
  const [result, setResult] = useState<string | null>(null);
  const [loading, setLoading] = useState(false);
  const [expression, setExpression] = useState("");

  async function handleSubmit(formData: FormData) {
    const expr = formData.get("expression") as string;
    if (!expr.trim()) return;

    setLoading(true);
    try {
      const calcResult = await calculateExpression(expr);
      setResult(calcResult);
      setExpression(expr);
    } catch (error) {
      console.error("Calculation error:", error);
      setResult("Error calculating expression");
    } finally {
      setLoading(false);
    }
  }

  return (
    <div>
      <h2>AI Calculator</h2>
      <form action={handleSubmit}>
        <label htmlFor="expression">Enter calculation:</label>
        <input
          id="expression"
          name="expression"
          type="text"
          placeholder="E.g. (5 + 3) * 2"
          required
        />
        <button type="submit" disabled={loading}>
          {loading ? "Calculating..." : "Calculate"}
        </button>
      </form>

      {result && (
        <div>
          <h3>Result:</h3>
          <p>{expression} = {result}</p>
        </div>
      )}
    </div>
  );
}
```

----------------------------------------

TITLE: Overriding Anthropic Generation Parameters Per Request (TypeScript)
DESCRIPTION: This example shows how to dynamically adjust Anthropic-specific generation parameters, such as `temperature` and `max_tokens`, for individual `generateText` calls. This allows fine-grained control over the model's behavior for specific prompts, overriding the default agent configuration.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/anthropic-ai/README.md#_snippet_5

LANGUAGE: typescript
CODE:
```
// Example: Overriding temperature for a specific call
const response = await agent.generateText("Write a creative story.", {
  provider: {
    temperature: 0.9,
    max_tokens: 1024
    // Any other valid Anthropic parameters
  }
});
```

----------------------------------------

TITLE: Initializing Agent with Anthropic Provider (TypeScript)
DESCRIPTION: This snippet illustrates initializing a Voltagent 'Agent' with an Anthropic model using 'AnthropicProvider', further emphasizing the framework's flexibility in integrating different LLM providers.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_4

LANGUAGE: typescript
CODE:
```
const anthropicAgent = new Agent({
  llm: new AnthropicProvider(),
  model: anthropic("claude-3-5-sonnet")
});
```

----------------------------------------

TITLE: Defining and Initializing Basic VoltAgent (TypeScript)
DESCRIPTION: Demonstrates how to import necessary classes, define a simple agent with instructions and an LLM, and initialize the VoltAgent instance with the defined agent. Shows example provider and model usage.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/create-voltagent-app/README.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Example provider
import { openai } from "@ai-sdk/openai"; // Example model

// Define a simple agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // Note: You can swap VercelAIProvider and openai with other supported providers/models
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Initialize VoltAgent with your agent(s)
new VoltAgent({
  agents: {
    agent,
  },
});
```

----------------------------------------

TITLE: Using Groq AI Provider with VoltAgent (TypeScript)
DESCRIPTION: Shows how to instantiate a VoltAgent `Agent` using the configured `GroqProvider`. It sets the agent's name, instructions, LLM provider, and specifies a Groq model ID. Includes an example asynchronous function call to `agent.generateText`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/groq-ai.md#_snippet_4

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { GroqProvider } from "@voltagent/groq-ai";

// Using environment variable configuration from above
const groqProvider = new GroqProvider();

const agent = new Agent({
  name: "Groq Speed Agent",
  instructions: "An agent powered by Groq's fast inference",
  llm: groqProvider,
  // Specify the desired Groq model ID (e.g., Llama3, Mixtral)
  // Find available models: https://console.groq.com/docs/models
  model: "llama3-8b-8192",
});

// Example call
async function run() {
  const response = await agent.generateText("Explain what makes Groq's inference engine fast.");
  console.log(response.text);
}

run();
```

----------------------------------------

TITLE: Initializing VoltAgent with Groq Provider
DESCRIPTION: Demonstrates how to import necessary classes and configure a VoltAgent with a GroqProvider instance, specifying an agent name, instructions, and a model. Requires a Groq API key.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/groq-ai/README.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { GroqProvider } from "@voltagent/groq-ai";

const agent = new Agent({
  name: "finance",
  instructions: "A helpful assistant that answers questions without using tools",
  llm: new GroqProvider(),
  model: "meta-llama/llama-4-scout-17b-16e-instruct",
});

new VoltAgent({
  agents: {
    agent,
  },
});
```

----------------------------------------

TITLE: Configuring VoltAgent with Vercel AI SDK Provider (TypeScript)
DESCRIPTION: This snippet demonstrates how to initialize a VoltAgent `Agent` instance using the `VercelAIProvider` to connect with Vercel AI SDK models. It shows importing necessary modules from `@voltagent/core`, `@voltagent/vercel-ai`, and `@ai-sdk/openai`, and configuring the agent with a name, instructions, the Vercel AI provider, and an OpenAI model. The commented-out section illustrates how to use the agent for text generation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-21-vercel-ai-sdk/index.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
// Model definitions come from Vercel AI SDK's respective packages
import { openai } from "@ai-sdk/openai";
// If you want to use a different model, for example Anthropic:
// import { anthropic } from "@ai-sdk/anthropic";

// An example agent using an OpenAI model via Vercel AI SDK
const agent = new Agent({
  name: "Vercel Powered Assistant",
  instructions: "This assistant uses an OpenAI model via Vercel AI SDK.",
  llm: new VercelAIProvider(), // The Vercel AI Provider
  model: openai("gpt-4o") // OpenAI model defined with Vercel AI SDK
});

// Now you can call methods like generateText, streamText on this 'agent' instance
// using the Vercel AI SDK infrastructure.
// For example:
// async function testAgent() {
//   const response = await agent.generateText("Hello, world!");
//   console.log(response.text);
// }
// testAgent();
```

----------------------------------------

TITLE: Generating and Streaming Text with VoltAgent and Tools in TypeScript
DESCRIPTION: This example illustrates the use of `generateText` and `streamText` methods for interacting with a VoltAgent, including how to integrate custom tools. It defines a `weatherTool` using `createTool` and `zod` for parameter validation, then configures the agent with this tool. The `chat` function demonstrates streaming responses, while `generateText` is shown for complete, non-streaming responses, showcasing how the agent can orchestrate tool calls based on the prompt.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
import { Agent, createTool } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
import { z } from "zod";

// Example Tool (see Tools section for details)
const weatherTool = createTool({
  name: "get_weather",
  description: "Get the current weather for a specific location",
  parameters: z.object({ location: z.string().describe("City and state") }),
  execute: async ({ location }) => {
    console.log(`Tool: Getting weather for ${location}`);
    // Call API... return mock data
    return { temperature: 72, conditions: "sunny" };
  }
});

const agent = new Agent({
  name: "Chat Assistant",
  instructions: "A helpful assistant that can check the weather.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  tools: [weatherTool]
});

// Example using streamText for a chat-like interaction
async function chat(input: string) {
  console.log(`User: ${input}`);
  // Use streamText for interactive responses
  const stream = await agent.streamText(input);

  for await (const chunk of stream.textStream) {
    console.log(chunk);
  }
}

// Example usage that might trigger the weather tool
await chat("What's the weather like in London?");

// Example using generateText for a complete response
const completeResponse = await agent.generateText("Explain machine learning briefly.");
console.log("Complete Response:", completeResponse.text);
```

----------------------------------------

TITLE: Propagating User Context (Session ID) in Agent Delegation (TypeScript)
DESCRIPTION: This snippet demonstrates how `userContext` is automatically cloned and passed from a supervisor agent to a sub-agent during delegation in a Vercel AI agent framework. It specifically shows how a `sessionId` set in the supervisor's context is accessible by the sub-agent's hooks and tools, ensuring contextual coherence across delegated tasks.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/context.md#_snippet_4

LANGUAGE: TypeScript
CODE:
```
// Assume VercelAIProvider, openai, createTool, z, Agent, createHooks,\n// OnStartHookArgs, ToolExecutionContext are imported as in previous examples.\n\n// Sub-Agent that will use the context\nconst subAgentProcessingTool = createTool({\n  name: "sub_task_processor_with_session",\n  description: "Processes a sub-task using an inherited session ID from context.",\n  parameters: z.object({ task_details: z.string() }),\n  execute: async (params, options?: ToolExecutionContext) => {\n    const sessionId = options?.operationContext?.userContext?.get("sessionId") || "unknown-session";\n    const logMessage = `[Sub-Agent TOOL][SessionID: ${sessionId}] Processing: ${params.task_details}`;\n    console.log(logMessage);\n    return `Sub-task for session ${sessionId} processed successfully.`;\n  },\n});\n\nconst workerAgentWithContext = new Agent({\n  name: "WorkerAgentWithContext",\n  llm: new VercelAIProvider(),\n  model: openai("gpt-4o"),\n  tools: [subAgentProcessingTool],\n  hooks: createHooks({\n    onStart: ({ agent, context }: OnStartHookArgs) => {\n      const sessionId = context.userContext.get("sessionId");\n      console.log(`[${agent.name} HOOK] Operation started. Inherited SessionID: ${sessionId}`);\n    },\n    onEnd: ({ agent, context }: OnStartHookArgs) => {\n      const sessionId = context.userContext.get("sessionId");\n      console.log(`[${agent.name} HOOK] Operation finished for SessionID: ${sessionId}`);\n    }\n  }),\n  instructions: "You are a worker agent. Use your tools to process tasks based on session ID."
});\n\n// Supervisor Agent\nconst supervisorAgentWithDelegation = new Agent({\n  name: "SupervisorAgentWithDelegation",\n  llm: new VercelAIProvider(),\n  model: openai("gpt-4o"),\n  hooks: createHooks({\n    onStart: ({ agent, context }: OnStartHookArgs) => {\n      const sessionId = context.userContext.get("sessionId");\n      console.log(`[${agent.name} HOOK] Supervisor Operation started. SessionID set to: ${sessionId}`);\n    },\n  }),\n  subAgents: [workerAgentWithContext], // This makes delegate_task available\n  instructions: "You are a supervisor. Delegate tasks to WorkerAgentWithContext."
});\n\nasync function runDelegationWithContext() {\n  const supervisorSessionMap = new Map<string | symbol, unknown>();\n  const newSessionId = `session-${Date.now()}`;\n  supervisorSessionMap.set("sessionId", newSessionId);\n\n  console.log(`\n--- Supervisor starting operation with SessionID: ${newSessionId} ---`);\n  // Supervisor's generateText call includes the userContext.\n  // If it calls delegate_task for WorkerAgentWithContext, this context will be passed.\n  await supervisorAgentWithDelegation.generateText(\n    `Delegate processing of 'important financial data' to WorkerAgentWithContext for session ${newSessionId}.`,\n    { userContext: supervisorSessionMap }\n  );\n  console.log("--- Supervisor operation finished ---");\n}\n\n// runDelegationWithContext();
```

----------------------------------------

TITLE: Performing Text-to-Speech with OpenAI Voice Provider
DESCRIPTION: This snippet illustrates how to use the `speak` method of the `OpenAIVoiceProvider` to convert a given text string into an audio stream. The resulting `Readable` stream of audio data is then piped to a local MP3 file, demonstrating how to save the synthesized speech.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_15

LANGUAGE: TypeScript
CODE:
```
// Text to Speech (TTS) -> Returns a Readable stream of audio data
const audioStream = await openaiVoice.speak("Hello from OpenAI voice!");
// Example: Pipe the audio stream to a file
await pipeline(audioStream, createWriteStream("openai_output.mp3"));
```

----------------------------------------

TITLE: Initializing userContext with Agent Hooks (TypeScript)
DESCRIPTION: This snippet demonstrates how an agent can internally manage and populate its `userContext` using `onStart` and `onEnd` hooks. The `onStart` hook sets an `internalOpId` in the `userContext`, which is then retrieved and logged by the `onEnd` hook, showcasing the lifecycle of context data within a single operation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/context.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
// Filename: agentHooksContext.ts
import {
  Agent,
  createHooks,
  VercelAIProvider,
  type OnStartHookArgs,
  type OnEndHookArgs,
} from "@voltagent/core";
import { openai } from "@ai-sdk/openai";

// Agent populates userContext internally via hooks
const agentManagingInternally = new Agent({
  name: "InternalContextAgent",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  hooks: createHooks({
    onStart: ({ agent, context }: OnStartHookArgs) => {
      const operationSpecificId = `op-${agent.name}-${Date.now()}`;
      context.userContext.set("internalOpId", operationSpecificId);
      console.log(
        `[${agent.name}] HOOK: Operation started. OpID set internally: ${operationSpecificId}`
      );
    },
    onEnd: ({ agent, context }: OnEndHookArgs) => {
      const opId = context.userContext.get("internalOpId");
      console.log(`[${agent.name}] HOOK: Operation ended. Retrieved internal OpID: ${opId}`);
    },
  }),
});

async function runInternalContextTask() {
  console.log("\n--- Running Task: Context Managed by Hooks ---");
  await agentManagingInternally.generateText("Tell me a story about a brave otter.");
}
// runInternalContextTask();
```

----------------------------------------

TITLE: Configuring Voltagent Agent with Different Models (TypeScript)
DESCRIPTION: Demonstrates how to create Agent instances configured with different language models (OpenAI, Anthropic) using the Vercel AI SDK model packages. It shows basic usage for generating text and streaming text with the configured agents. Requires @voltagent/core, @voltagent/vercel-ai, and specific AI SDK model packages.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_6

LANGUAGE: typescript
CODE:
```
// Make sure to import model definitions
import { openai } from "@ai-sdk/openai";
import { anthropic } from "@ai-sdk/anthropic";

// Example: Agent configured with OpenAI model
const openAIAgent = new Agent({
  id: "openai-agent",
  llm: new VercelProvider(),
  model: openai("gpt-4o"),
  instructions: "Uses OpenAI",
});

// Example: Agent configured with Anthropic model
const anthropicAgent = new Agent({
  id: "anthropic-agent",
  llm: new VercelProvider(),
  model: anthropic("claude-3-sonnet-20240229"),
  instructions: "Uses Anthropic",
});

// Example: Using generateText with the configured agent
const response = await openAIAgent.generateText("Translate 'hello' to French.");

console.log(response);

// Example: Streaming with a different configured agent
const streamResponse = await anthropicAgent.streamText("Write a poem about clouds.");

for await (const chunk of streamResponse.textStream) {
  process.stdout.write(chunk);
}
```

----------------------------------------

TITLE: Configuring VoltAgent with Vercel AI and XsAI Providers
DESCRIPTION: This snippet demonstrates how to initialize VoltAgent `Agent` instances using two different LLM providers: `VercelAIProvider` and `XsAIProvider`. It shows the configuration of agents with specific provider instances and models (e.g., OpenAI's gpt-4o, Anthropic's claude-3-5-sonnet, and a generic 'xsai-model-name'), highlighting the flexibility to integrate with various LLM backends. The example concludes with generating text using the configured agents.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_10

LANGUAGE: TypeScript
CODE:
```
// 1. Vercel AI Provider (integrates with various models via Vercel AI SDK)
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai"; // Model definition for OpenAI via Vercel
import { anthropic } from "@ai-sdk/anthropic"; // Model definition for Anthropic via Vercel

// Agent using OpenAI via Vercel
const vercelOpenAIAgent = new Agent({
  name: "Vercel OpenAI Assistant",
  instructions: "Assistant using Vercel AI SDK with OpenAI.",
  llm: new VercelAIProvider(), // The provider
  model: openai("gpt-4o"), // The specific model
});

// Agent using Anthropic via Vercel
const vercelAnthropicAgent = new Agent({
  name: "Vercel Anthropic Assistant",
  instructions: "Assistant using Vercel AI SDK with Anthropic.",
  llm: new VercelAIProvider(), // Same provider
  model: anthropic("claude-3-5-sonnet-20240620"), // Different model
});

// 2. XsAI Provider (Example of a custom/alternative provider)
import { XsAIProvider } from "@voltagent/xsai";

// Agent using XsAI Provider (might use different model naming)
const xsaiAgent = new Agent({
  name: "XsAI Assistant",
  instructions: "Assistant using XsAI Provider.",
  llm: new XsAIProvider({ apiKey: process.env.OPENAI_API_KEY }), // Provider instance
  model: "xsai-model-name", // Model identifier specific to this provider
});

// Use the agents (example)
const response = await vercelOpenAIAgent.generateText("Hello OpenAI via Vercel!");
console.log(response.text);

const response2 = await xsaiAgent.generateText("Hello XsAI!");
console.log(response2.text);
```

----------------------------------------

TITLE: Performing Speech-to-Text with OpenAI Voice Provider
DESCRIPTION: This code demonstrates how to use the `listen` method of the `OpenAIVoiceProvider` to transcribe audio into text. It takes an audio source, such as a `Readable` stream from an MP3 file, and returns the transcribed text, which is then logged to the console.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_16

LANGUAGE: TypeScript
CODE:
```
// Speech to Text (STT) -> Takes an audio source (e.g., Readable stream)
const audioFileStream = createReadStream("input.mp3");
const transcript = await openaiVoice.listen(audioFileStream);
console.log("OpenAI Transcript:", transcript);
```

----------------------------------------

TITLE: Starting VoltAgent Development Server (Bash)
DESCRIPTION: This command starts the VoltAgent development server. It uses `tsx` to compile and run the project's code, making the agent accessible via a local HTTP server and the VoltAgent Developer Console.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/langfuse-exporter/README.md#_snippet_4

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Running VoltAgent Development Server (Bash)
DESCRIPTION: Executes the development script defined in the project's `package.json` (typically using `tsx`) to start the VoltAgent server.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/create-voltagent-app/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Run Development Server - VoltAgent - Bash
DESCRIPTION: Commands to start the local development server for the VoltAgent application using npm, yarn, or pnpm.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-anthropic/README.md#_snippet_1

LANGUAGE: Bash
CODE:
```
npm run dev
# or
yarn dev
# or
pnpm dev
```

----------------------------------------

TITLE: Configuring LLM Generation with ProviderOptions in VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to initialize a VoltAgent and configure its LLM generation parameters using the standardized `ProviderOptions`. It covers common options like temperature, maxTokens, and frequency penalties, as well as provider-specific callbacks and extra options. Examples are provided for both `generateText` and `streamText` methods.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_11

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const agent = new Agent({
  name: "Configurable Assistant",
  instructions: "An assistant with configurable generation parameters",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o")
});

// Example: Configure common LLM parameters regardless of provider
const response = await agent.generateText("Write a creative story about a robot.", {
  provider: {
    // Fine-tune generation behavior with standardized options
    temperature: 0.8, // Higher creativity (0-1)
    maxTokens: 500, // Limit response length
    topP: 0.9, // Nucleus sampling parameter
    frequencyPenalty: 0.5, // Reduce repetition
    presencePenalty: 0.3, // Encourage topic diversity
    seed: 12345, // Reproducible results
    stopSequences: ["THE END"], // Stop generation at specific string

    // Add provider callbacks for streaming
    onStepFinish: async (step) => {
      console.log("Step complete:", step.type);
    },
    onFinish: async (result) => {
      console.log("Generation complete!");
    },
    onError: async (error) => {
      console.error("Generation error:", error);
    },

    // Provider-specific options not covered by standard fields
    extraOptions: {
      someProviderSpecificOption: "value"
    }
  }
});

// Alternative: Provide parameters for streamed responses
const streamedResponse = await agent.streamText("Generate a business plan", {
  provider: {
    temperature: 0.3, // More focused, less creative
    maxTokens: 2000, // Longer response limit
    // ... other options as needed
  }
});
```

----------------------------------------

TITLE: Initializing Supabase Memory and Agent with VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to import the necessary modules, retrieve Supabase credentials from environment variables, initialize the SupabaseMemory provider with these credentials, and then create a VoltAgent Agent instance, assigning the initialized memory provider to it. It includes a check to ensure credentials are provided.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/supabase.md#_snippet_2

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { SupabaseMemory } from "@voltagent/supabase";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Get credentials from environment variables
const supabaseUrl = process.env.SUPABASE_URL;
const supabaseKey = process.env.SUPABASE_KEY;

if (!supabaseUrl || !supabaseKey) {
  throw new Error("Supabase URL and Key must be provided via environment variables.");
}

// Initialize SupabaseMemory
const memory = new SupabaseMemory({
  supabaseUrl,
  supabaseKey,
  // Optional: Specify a custom base table name prefix
  // This MUST match the prefix used in your SQL setup if customized.
  // tableName: 'my_agent_memory', // Defaults to 'voltagent_memory'
});

const agent = new Agent({
  name: "Supabase Memory Agent",
  instructions: "An agent using Supabase for memory.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  memory: memory, // Assign the memory provider instance
});
```

----------------------------------------

TITLE: Configuring Adaptive Model Selection in Voltagent (TypeScript)
DESCRIPTION: This snippet illustrates how to configure an `adaptiveAgent` in Voltagent to use intelligent model selection. The `adaptiveModel` function dynamically chooses an LLM based on task complexity: `gpt-4o-mini` for simple tasks, `gpt-4o` for complex reasoning, and `claude-3-5-sonnet` for code writing. This optimization can lead to significant token savings by using the most cost-effective model for the specific task.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_21

LANGUAGE: typescript
CODE:
```
const adaptiveAgent = new Agent({
  name: "smart-agent",
  model: adaptiveModel({
    simple: "gpt-4o-mini", // Simple tasks
    complex: "gpt-4o", // Complex reasoning
    coding: "claude-3-5-sonnet", // Code writing
  }),
});
```

----------------------------------------

TITLE: Configuring Sub-Agents for Task Delegation in Voltagent (TypeScript)
DESCRIPTION: This snippet demonstrates how to create a coordinator agent that delegates tasks to specialized sub-agents (e.g., `researchAgent`, `writingAgent`) using the `subAgents` property. The coordinator agent automatically gains a `delegate_task` tool to manage this delegation. It shows how to initialize agents and then call a method like `generateText` on the main agent, which will internally use sub-agents as needed.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_6

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Assume researchAgent and writingAgent are configured Agents
const researchAgent = new Agent({ name: "Researcher" /* ... */ });
const writingAgent = new Agent({ name: "Writer" /* ... */ });

// Create a coordinator agent that uses the others
const mainAgent = new Agent({
  name: "Coordinator",
  instructions: "Coordinates research and writing tasks by delegating to specialized sub-agents.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  // List the agents this one can delegate tasks to
  subAgents: [researchAgent, writingAgent],
});

// Example: Call streamText on the main agent
const response = await mainAgent.generateText("Write a blog post about quantum computing.");
console.log(response.text);
// The Coordinator might decide to use the delegate_task tool to involve researchAgent and writingAgent.
```

----------------------------------------

TITLE: Implementing Tool Calling with AnthropicProvider (TypeScript)
DESCRIPTION: This snippet demonstrates how to define and integrate a custom tool (`get_current_weather`) with an `Agent` using the `AnthropicProvider`. It showcases the `createTool` function for defining tool parameters with Zod and how to attach tools to the agent for model-driven execution.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/anthropic-ai/README.md#_snippet_4

LANGUAGE: typescript
CODE:
```
import { createTool } from "@voltagent/core";
import { z } from "zod";

const weatherTool = createTool({
  name: "get_current_weather",
  description: "Get the current weather in a location",
  parameters: z.object({
    location: z.string().describe("The location to get weather for")
  }),
  execute: async (input) => {
    return {
      location: input.location,
      temperature: 72,
      condition: "sunny"
    };
  }
});

const agent = new Agent({
  name: "weather-agent",
  instructions: "A helpful weather assistant",
  llm: new AnthropicProvider(),
  model: "claude-3-sonnet-20240229",
  tools: [weatherTool]
});
```

----------------------------------------

TITLE: Demonstrating Agent Memory in Conversation (TypeScript)
DESCRIPTION: This snippet illustrates the agent's memory capabilities by showing two consecutive interactions. The agent remembers information from the first conversation ("My name is John and I love pizza") and uses it to answer a subsequent question ("What's my favorite food?").
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_13

LANGUAGE: typescript
CODE:
```
// First conversation
await agent.generateText("My name is John and I love pizza");

// Next conversation - will remember the previous one
await agent.generateText("What's my favorite food?");
// "Based on our previous conversation, you love pizza!"
```

----------------------------------------

TITLE: Initializing VoltAgent with Vercel AI Manager (TypeScript)
DESCRIPTION: This code initializes a VoltAgent instance, configuring it to use the Vercel AI provider with a specified OpenAI model (e.g., `gpt-4o`). It sets up the core agent for AI interactions within the application.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/integrations/nextjs.md#_snippet_4

LANGUAGE: typescript
CODE:
```
import { VoltAgent } from "@voltagent/core";
import { VercelAIManager } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai"; // Or your preferred provider

export const agent = new VoltAgent({
  provider: "vercel-ai", // Specify the Vercel AI provider
  manager: new VercelAIManager({
    model: openai("gpt-4o") // Configure your desired model
  }),
  functions: [
    // Add any VoltAgent functions/tools here if needed
  ]
});
```

----------------------------------------

TITLE: Generating Text with VoltAgent and Google AI (TypeScript)
DESCRIPTION: This example illustrates how to initialize the `GoogleGenAIProvider` with an API key and create an `Agent` instance configured to use a Google AI model. It then demonstrates using the `agent.generateText` method to send a prompt, receive a full text response, and log the generated text along with usage information.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/google-ai.md#_snippet_5

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { GoogleGenAIProvider } from "@voltagent/google-ai";

async function main() {
  const googleProvider = new GoogleGenAIProvider({
    apiKey: process.env.GEMINI_API_KEY // Ensure GEMINI_API_KEY is set
  });

  const agent = new Agent({
    name: "Google Text Agent",
    instructions: "Generates text using Google AI",
    llm: googleProvider,
    model: "gemini-1.5-flash"
  });

  const prompt = "What are the main features of the Gemini 1.5 Pro model?";

  try {
    const response = await agent.generateText(prompt);
    console.log(`Agent response to "${prompt}":`);
    console.log(response.text);
    console.log("Usage:", response.usage);
  } catch (error) {
    console.error("Error generating text:", error);
  }
}

main();
```

----------------------------------------

TITLE: Implement Agent Delegation Workflow (TypeScript)
DESCRIPTION: Illustrates a complete workflow using `@voltagent/core` and `@voltagent/vercel-ai`. It shows how to define specialized agents (`Story Agent`, `Translator Agent`), a supervisor agent that manages them, and how the supervisor delegates tasks (`write a story`, `translate it`) to the appropriate subagents using the `delegate_task` tool implicitly via `streamText`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/subagents.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Create specialized agents
const storyAgent = new Agent({
  name: "Story Agent",
  instructions: "You are a creative story writer. Create original, engaging short stories.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});

const translatorAgent = new Agent({
  name: "Translator Agent",
  instructions: "You are a skilled translator. Translate text accurately.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});

// Create the supervisor agent
const supervisorAgent = new Agent({
  name: "Supervisor Agent",
  instructions:
    "You manage a workflow between specialized agents. When asked for a story, " +
    "use the Story Agent to create it. Then use the Translator Agent to translate the story. " +
    "Present both versions to the user.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  subAgents: [storyAgent, translatorAgent],
});

// Use the supervisor agent to handle a user request
const result = await supervisorAgent.streamText(
  "Write a short story about a robot learning to paint and translate it to German."
);

// Process the streamed response
for await (const chunk of result.textStream) {
  process.stdout.write(chunk);
}
```

----------------------------------------

TITLE: Defining a Local Tool for Voltagent (TypeScript)
DESCRIPTION: This snippet defines a local 'weatherTool' using 'createTool', specifying its name, description, parameters (using Zod for type safety), and an 'execute' function that simulates an API call to get weather information.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_8

LANGUAGE: typescript
CODE:
```
const weatherTool = createTool({
  name: "get_weather",
  description: "Get the current weather for a specific location",
  parameters: z.object({
    location: z.string().describe("City and state")
  }),
  execute: async ({ location }) => {
    // Real API call would be here
    return { temperature: 72, conditions: "sunny" };
  }
});
```

----------------------------------------

TITLE: Generating Text with Voltagent and Vercel AI SDK (TypeScript)
DESCRIPTION: Provides a complete example function main that instantiates a voltagent Agent using VercelProvider and an OpenAI model, then calls agent.generateText with a prompt and logs the response. Requires @voltagent/core, @voltagent/vercel-ai, and @ai-sdk/openai.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_7

LANGUAGE: ts
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

async function main() {
  const vercelProvider = new VercelProvider();

  const agent = new Agent({
    name: "Simple Vercel Agent",
    instructions: "A simple agent powered by Vercel AI SDK",
    llm: vercelProvider,
    model: openai("gpt-4o-mini"),
  });

  const prompt = "What is the capital of France?";

  try {
    const response = await agent.generateText(prompt);
    console.log(`Agent response to "${prompt}":`);
    console.log(response);
  } catch (error) {
    console.error("Error generating text:", error);
  }
}

main();
```

----------------------------------------

TITLE: Setting Up Agent with Reasoning Tools (TypeScript)
DESCRIPTION: This example demonstrates setting up a VoltAgent agent configured to use the reasoning tools. It shows importing dependencies, creating the default `reasoningToolkit`, initializing an `Agent` instance with a description emphasizing tool use, specifying an LLM model, adding the toolkit to the agent's tools, and initiating text generation with a complex prompt to trigger the reasoning process. Requires packages for VoltAgent, an LLM provider, and an LLM model.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/tools/reasoning-tool.mdx#_snippet_2

LANGUAGE: TypeScript
CODE:
```
import { Agent, createReasoningTools, type Toolkit } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Get toolkit, automatically adding instructions & examples to system prompt
const reasoningToolkit: Toolkit = createReasoningTools(); // Uses defaults

const agent = new Agent({
  name: "ThinkingAgent",
  description: `
    You are an AI assistant designed for complex problem-solving using structured reasoning.
    You MUST use the 'think' and 'analyze' tools internally to break down problems, plan steps,
    evaluate information, and decide on the best course of action before responding.
    Always think step-by-step.
  `,
  // Agent description reinforced to use the tools
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"), // Ensure model supports tool use
  tools: [
    reasoningToolkit,
    // ... add other tools the agent can call after thinking/analyzing
    // e.g., searchTool, databaseQueryTool, etc.
  ],
  markdown: true,
});

// Example invocation (River Crossing Puzzle)
const result = await agent.generateText(`
  Three project managers (PMs) and three engineers (ENGs) need to cross a river.
  The boat holds only two people. At no point, on either river bank, can the engineers
  outnumber the project managers (otherwise, chaos ensues!). How can they all cross safely?
`);

console.log(result); // The agent will perform think/analyze steps internally

```

----------------------------------------

TITLE: Setting Up Debugging Hooks in VoltAgent (TypeScript)
DESCRIPTION: This example illustrates the use of VoltAgent's `createHooks` system for comprehensive debugging and monitoring of agent interactions. It defines callbacks for various agent lifecycle events (onStart, onToolStart, onToolEnd, onEnd) to log activity and trace requests. These hooks provide full traceability, which is crucial for understanding agent behavior and debugging in production environments.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_15

LANGUAGE: typescript
CODE:
```
const hooks = createHooks({
  onStart: async ({ agent, context }) => {
    const requestId = `req-${Date.now()}`;
    context.userContext.set("requestId", requestId);
    console.log(`[${agent.name}] Started: ${requestId}`);
  },
  onToolStart: async ({ agent, tool, context }) => {
    const reqId = context.userContext.get("requestId");
    console.log(`[${reqId}] Tool starting: ${tool.name}`);
  },
  onToolEnd: async ({ agent, tool, output, context }) => {
    const reqId = context.userContext.get("requestId");
    console.log(`[${reqId}] Tool finished: ${tool.name}`, output);
  },
  onEnd: async ({ agent, output, context }) => {
    const reqId = context.userContext.get("requestId");
    console.log(`[${reqId}] Operation complete`);
  },
});

const agent = new Agent({
  name: "Observable Agent",
  // ... other config
  hooks, // Full traceability
});
```

----------------------------------------

TITLE: Override Default Prompt Variables
DESCRIPTION: Illustrates how to generate prompt strings by providing custom variables when calling the function returned by `createPrompt`. Custom variables override the default values defined during the prompt's creation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/utils/create-prompt.md#_snippet_3

LANGUAGE: TypeScript
CODE:
```
// Generate prompt with a custom 'task'
const prompt2 = basicPrompt({ task: "Explain quantum computing to a 10-year-old" });
console.log(prompt2);
/*
Output:
You are a helpful assistant that simplifies complex topics.
Task: Explain quantum computing to a 10-year-old
*/

// Override both 'role' and 'task'
const prompt3 = basicPrompt({
  role: "translates languages",
  task: "Translate 'hello' to French",
});
console.log(prompt3);
/*
Output:
You are a helpful assistant that translates languages.
Task: Translate 'hello' to French
*/
```

----------------------------------------

TITLE: Creating an Agent with Tool Lifecycle Hooks (TypeScript)
DESCRIPTION: Illustrates how to define and apply lifecycle hooks (`onToolStart`, `onToolEnd`) using `createHooks` and attach them to an `Agent` instance to respond to tool execution events, useful for logging or UI updates.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_4

LANGUAGE: TypeScript
CODE:
```
import { Agent, createHooks } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Define the hooks using createHooks
const hooks = createHooks({
  onToolStart(_, tool) {
    console.log(`Tool starting: ${tool.name}`);
  },
  onToolEnd(_, tool, result) {
    console.log(`Tool completed: ${tool.name}`);
    console.log(`Result: ${JSON.stringify(result)}`);
  },
});

// Create an agent with hooks
const agent = new Agent({
  name: "Assistant with Tool Hooks",
  description: "An assistant that logs tool execution",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  tools: [calculatorTool],
  hooks: hooks,
});

// When the agent uses a tool, the hooks will be triggered
// const response = await agent.generateText("What is 123 * 456?");
```

----------------------------------------

TITLE: Configuring MCP and Using Tools with VoltAgent Agents (TypeScript)
DESCRIPTION: Demonstrates how to configure MCP servers (HTTP and stdio), fetch tools from these servers using `getToolsets()` or `getTools()`, and create VoltAgent agents that utilize these fetched tools. It shows how to use specific toolsets or a combined list of tools. Requires `@voltagent/core`, `@voltagent/vercel-ai`, and `@ai-sdk/openai`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_14

LANGUAGE: ts
CODE:
```
import { Agent, MCPConfiguration } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Set up MCP configuration with multiple servers
const mcpConfig = new MCPConfiguration({
  servers: {
    // HTTP server configuration
    browserTools: {
      type: "http",
      url: "https://your-mcp-server.example.com/browser",
    },
    // Local stdio server configuration
    localAI: {
      type: "stdio",
      command: "python",
      args: ["local_ai_server.py"],
    },
  },
});

// Option 1: Get tools grouped by server using getToolsets()
const toolsets = await mcpConfig.getToolsets();
// Access tools for a specific server
const browserToolsOnly = toolsets.browserTools.getTools();
const localAiToolsOnly = toolsets.localAI.getTools();

// Option 2: Get all tools from all servers combined into a single array
const allMcpTools = await mcpConfig.getTools();

// Create an agent using only the browser tools
const agentWithBrowserTools = new Agent({
  name: "Browser Agent",
  description: "Assistant using only browser tools via MCP",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  tools: browserToolsOnly, // Use the specific toolset
});

// Create another agent using *all* fetched MCP tools
const agentWithAllMcpTools = new Agent({
  name: "MCP-Enhanced Assistant",
  description: "Assistant with access to all configured MCP tools",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  tools: allMcpTools, // Use the combined list
});

// Use the agents (example)
// const response = await agentWithBrowserTools.generateText(
//   "Take a screenshot of the current page."
// );
// console.log(response.text);
```

----------------------------------------

TITLE: Adding MCP Tools at Agent Initialization (TypeScript)
DESCRIPTION: Shows how to provide fetched MCP tools (obtained via `mcpConfig.getTools()`) to a VoltAgent `Agent` instance by including them in the `tools` array during the agent's constructor call. This makes the tools available to the agent for all subsequent interactions by default.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/mcp.md#_snippet_5

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
// Assume mcpConfig is configured and allTools fetched as shown above

const allTools = await mcpConfig.getTools();

const agent = new Agent({
  name: "MCP Aware Agent",
  instructions: "An assistant that can use MCP tools configured at startup",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  tools: allTools, // Add MCP tools during initialization
});

// Now the agent can use MCP tools in its interactions
// await agent.generateText(...);

// Remember to disconnect mcpConfig eventually
// await mcpConfig.disconnect();

```

----------------------------------------

TITLE: Logging Tool Execution Outcome (VoltAgent, TypeScript)
DESCRIPTION: This hook is triggered after a tool's execution completes, whether successfully or with an error. It provides the `agent`, `tool`, `output`, `error`, and `context`. The example demonstrates logging the tool's name and operation ID, along with the result or error message. Useful for monitoring tool performance and results.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/hooks.md#_snippet_3

LANGUAGE: ts
CODE:
```
onToolEnd: async ({ agent, tool, output, error, context }) => {
  if (error) {
    console.error(
      `Tool '${tool.name}' failed in operation ${context.operationId}: ${error.message}`
    );
  } else {
    console.log(
      `Tool '${tool.name}' succeeded in operation ${context.operationId}. Result:`,
      output
    );
  }
};
```

----------------------------------------

TITLE: Logging Agent Operation Start (VoltAgent, TypeScript)
DESCRIPTION: This hook is triggered before an agent starts processing a request. It receives the `agent` and `context` objects. The example demonstrates logging the agent's name and the operation ID at the beginning of an operation. Useful for initialization or request logging.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/hooks.md#_snippet_1

LANGUAGE: ts
CODE:
```
onEnd: async ({ agent, output, error, context }) => {
  if (error) {
    console.error(`Agent ${agent.name} operation ${context.operationId} failed: ${error.message}`);
  } else {
    // Check output type if needed
    if (output && "text" in output) {
      console.log(
        `Agent ${agent.name} operation ${context.operationId} succeeded with text output.`
      );
    } else if (output && "object" in output) {
      console.log(
        `Agent ${agent.name} operation ${context.operationId} succeeded with object output.`
      );
    } else {
      console.log(`Agent ${agent.name} operation ${context.operationId} succeeded.`);
    }
    // Log usage if available
    if (output?.usage) {
      console.log(`  Usage: ${output.usage.totalTokens} tokens`);
    }
  }
};
```

----------------------------------------

TITLE: Installing Node.js Dependencies for VoltAgent Example (Bash)
DESCRIPTION: Installs all required Node.js packages and dependencies for the example project using npm. This ensures that the VoltAgent core library and any other necessary modules are available to run the example. Requires Node.js and npm to be installed.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-thinking-tool/README.md#_snippet_1

LANGUAGE: bash
CODE:
```
npm install
```

----------------------------------------

TITLE: Installing Project Dependencies (Bash)
DESCRIPTION: Installs the necessary project dependencies listed in the `package.json` file for the VoltAgent project using the npm package manager. This command is typically run after cloning a project or adding new packages.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-23-multi-agent-llm/index.md#_snippet_3

LANGUAGE: Bash
CODE:
```
npm install
```

----------------------------------------

TITLE: Defining and Initializing a Basic VoltAgent (TypeScript)
DESCRIPTION: This snippet shows the basic structure for creating an `Agent` instance with a name, instructions, LLM provider, and model, and then initializing the `VoltAgent` core with this agent. It demonstrates importing necessary classes and configuring the agent's core components.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/xsai/README.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai"; // Example provider
import { openai } from "@ai-sdk/openai"; // Example model

// Define a simple agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // Note: You can swap VercelAIProvider and openai with other supported providers/models
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Initialize VoltAgent with your agent(s)
new VoltAgent({
  agents: {
    agent,
  },
});
```

----------------------------------------

TITLE: Implementing Custom Memory Provider in TypeScript
DESCRIPTION: This snippet shows the basic structure of a custom class, `MyCustomStorage`, that implements the `Memory` interface from `@voltagent/core`. It includes example implementations for `addMessage` and `getMessages`, demonstrating how to interact with a hypothetical database client (`dbClient`). Placeholders (`throw new Error("Not implemented")`) are included for the other required methods of the `Memory` interface.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/overview.md#_snippet_5

LANGUAGE: typescript
CODE:
```
import type {
  Memory,
  MemoryMessage,
  Conversation,
  CreateConversationInput,
  MessageFilterOptions /*...other types*/,
} from "@voltagent/core";

// Example Structure
export class MyCustomStorage implements Memory {
  private dbClient: any; // Your database client instance

  constructor(/* connection options */) {
    // Initialize client
  }

  async addMessage(message: MemoryMessage, userId: string, conversationId: string): Promise<void> {
    const key = `memory:${userId}:${conversationId}`;
    // Logic to store message in your DB
  }

  async getMessages(options: MessageFilterOptions): Promise<MemoryMessage[]> {
    const key = `memory:${options.userId}:${options.conversationId}`;
    // Logic to retrieve messages from your DB, applying limit
    return []; // Return retrieved messages
  }

  // ... implement all other methods from the Memory interface ...

  async createConversation(conversation: CreateConversationInput): Promise<Conversation> {
    /* ... */ throw new Error("Not implemented");
  }
  async getConversation(id: string): Promise<Conversation | null> {
    /* ... */ throw new Error("Not implemented");
  }
  async getConversations(resourceId: string): Promise<Conversation[]> {
    /* ... */ throw new Error("Not implemented");
  }
  async updateConversation(
    id: string,
    updates: Partial<Omit<Conversation, "id" | "createdAt" | "updatedAt">
  ): Promise<Conversation> {
    /* ... */ throw new Error("Not implemented");
  }
  async deleteConversation(id: string): Promise<void> {
    /* ... */ throw new Error("Not implemented");
  }
  async clearMessages(options: {
    userId: string;
    conversationId?: string | undefined;
  }): Promise<void> {
    /* ... */ throw new Error("Not implemented");
  }
  async addHistoryEntry(key: string, value: any, agentId: string): Promise<void> {
    /* ... */ throw new Error("Not implemented");
  }
  async updateHistoryEntry(key: string, value: any, agentId: string): Promise<void> {
    /* ... */ throw new Error("Not implemented");
  }
  async addHistoryEvent(
    key: string,
    value: any,
    historyId: string,
    agentId: string
  ): Promise<void> {
    /* ... */ throw new Error("Not implemented");
  }
  async updateHistoryEvent(
    key: string,
    value: any,
    historyId: string,
    agentId: string
  ): Promise<void> {
    /* ... */ throw new Error("Not implemented");
  }
  async addHistoryStep(key: string, value: any, historyId: string, agentId: string): Promise<void> {
    /* ... */ throw new Error("Not implemented");
  }
  async updateHistoryStep(
    key: string,
    value: any,
    historyId: string,
    agentId: string
  ): Promise<void> {
    /* ... */ throw new Error("Not implemented");
  }
  async getHistoryEntry(key: string): Promise<any> {
    /* ... */ throw new Error("Not implemented");
  }
  async getHistoryEvent(key: string): Promise<any> {
    /* ... */ throw new Error("Not implemented");
  }
  async getHistoryStep(key: string): Promise<any> {
    /* ... */ throw new Error("Not implemented");
  }
  async getAllHistoryEntriesByAgent(agentId: string): Promise<any[]> {
    /* ... */ throw new Error("Not implemented");
  }
}
```

----------------------------------------

TITLE: Defining a Single Tool and Adding to Agent (TypeScript)
DESCRIPTION: Demonstrates how to define a single tool using `createTool` with name, description, Zod parameters, and an async execute function. Shows how to instantiate an `Agent` and include the defined tool in its `tools` array.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/tools/overview.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
import { Agent, createTool, z } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Define a simple weather tool
const getWeatherTool = createTool({
  name: "get_weather",
  description: "Fetches the current weather for a given location.",
  parameters: z.object({
    location: z.string().describe("The city and state, e.g., San Francisco, CA")
  }),
  execute: async ({ location }) => {
    // In a real scenario, you would call a weather API here
    console.log(`Fetching weather for ${location}...`);
    if (location.toLowerCase().includes("tokyo")) {
      return { temperature: "15°C", condition: "Cloudy" };
    }
    return { temperature: "22°C", condition: "Sunny" };
  }
});

const agent = new Agent({
  name: "WeatherAgent",
  instructions: "An agent that can fetch weather information.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  tools: [getWeatherTool] // Add the tool to the agent
});

// Now the agent can use the 'get_weather' tool when asked about weather.
```

----------------------------------------

TITLE: Generate Text with Groq and Voltagent (TypeScript)
DESCRIPTION: Provides a complete example of initializing a Voltagent Agent with the GroqProvider and using the generateText method to send a prompt and receive a single text response, including handling potential errors and logging usage information.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/groq-ai.md#_snippet_6

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { GroqProvider } from "@voltagent/groq-ai";

async function main() {
  // Assumes GROQ_API_KEY is set in environment variables
  const groqProvider = new GroqProvider();

  const agent = new Agent({
    name: "Groq Text Agent",
    instructions: "Generates text using Groq AI",
    llm: groqProvider,
    model: "mixtral-8x7b-32768", // Example model
  });

  const prompt = "What is the capital of France?";

  try {
    const response = await agent.generateText(prompt);
    console.log(`Agent response to "${prompt}":`);
    console.log(response.text);
    console.log("Usage:", response.usage);
    console.log("Finish Reason:", response.finishReason);
  } catch (error) {
    console.error("Error generating text:", error);
  }
}

main();
```

----------------------------------------

TITLE: Defining BaseMessage for Text and Multi-modal Content in VoltAgent
DESCRIPTION: This snippet illustrates how to define `BaseMessage` objects in VoltAgent for both simple text-only interactions and complex multi-modal inputs. For multi-modal content, the `content` field is an array of objects, each specifying a `type` (e.g., 'text', 'image') and its corresponding data. It requires the `BaseMessage` type from `@voltagent/core`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/multi-modal.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
import type { BaseMessage } from "@voltagent/core";

// Basic Text Message
const textMessage: BaseMessage = {
  role: "user",
  content: "Describe this image for me.",
};

// Multi-modal Message (Text + Image)
const multiModalMessage: BaseMessage = {
  role: "user",
  content: [
    {
      type: "text",
      text: "What is shown in this image?",
    },
    {
      type: "image",
      image: "data:image/jpeg;base64,/9j/4AAQSk...", // Base64 string or Data URI
      mimeType: "image/jpeg", // Optional but recommended
    },
  ],
};
```

----------------------------------------

TITLE: Initialize VoltAgent Project with CLI
DESCRIPTION: This command initializes a new VoltAgent project using the official CLI tool. It creates a directory with the specified name (`my-peaka-agent`), prompts the user for configuration details, and then changes the current directory into the newly created project folder. This is the standard way to start a VoltAgent application.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-26-peaka-mcp-voltagent/index.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest my-peaka-agent
# Answer the questions it asks
cd my-peaka-agent
```

----------------------------------------

TITLE: Create Complex Agent Prompt
DESCRIPTION: Shows how `createPrompt` can be used to structure more complex prompts, such as those for AI agents, by defining multiple variables and then generating specific prompt instances by overriding defaults for particular tasks or contexts.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/utils/create-prompt.md#_snippet_4

LANGUAGE: TypeScript
CODE:
```
import { createPrompt } from "@voltagent/core";

const agentPrompt = createPrompt({
  template: `You are an AI agent with the following capabilities: {{capabilities}}.
Your current goal is: {{goal}}
Available context: {{context}}
Task: {{task}}`,
  variables: {
    capabilities: "web search, code execution",
    goal: "Answer user queries",
    context: "No specific context yet",
    task: "", // Default task is empty
  },
});

const agentTaskPrompt = agentPrompt({
  goal: "Help the user solve a programming problem",
  context: "User is working with Node.js and Express",
  task: "Debug an error in a REST API endpoint",
});

console.log(agentTaskPrompt);
/*
Output:
You are an AI agent with the following capabilities: web search, code execution.
Your current goal is: Help the user solve a programming problem
Available context: User is working with Node.js and Express
Task: Debug an error in a REST API endpoint
*/
```

----------------------------------------

TITLE: Creating a VoltAgent App with Example (Bash)
DESCRIPTION: This command initializes a new VoltAgent application project using the official command-line interface tool. It specifically utilizes the `--example base` flag to clone the 'base' example template, providing a minimal but functional starting point for developing a new AI agent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/base/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example base
```

----------------------------------------

TITLE: Integrating External Models/Tools via MCP in VoltAgent (TypeScript)
DESCRIPTION: This snippet illustrates how to configure and use the Model Context Protocol (MCP) in VoltAgent to connect to external, MCP-compliant model or tool servers. It shows how to define server configurations, asynchronously fetch tools from these servers, and then integrate these external tools into an `Agent` instance for use in generation calls.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_12

LANGUAGE: TypeScript
CODE:
```
import { Agent, MCPConfiguration } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Set up MCP configuration pointing to your external server(s)
const mcpConfig = new MCPConfiguration({
  servers: {
    // Define one or more MCP-compliant servers
    myModelServer: {
      type: "http", // Communication type
      url: "https://my-mcp-server.example.com" // URL of the MCP server
    }
  }
});

// Asynchronously fetch tools offered by the configured MCP server(s)
const mcpTools = await mcpConfig.getTools();

// Create an agent that can utilize these external MCP tools
const agent = new Agent({
  name: "MCP Agent",
  instructions: "Uses external model capabilities via MCP",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  // Add the tools fetched from the MCP server
  tools: mcpTools
});

// Example: Call streamText
const response = await agent.generateText("Use the external analysis tool on this data...");
console.log(response.text);
// The agent can now potentially call tools hosted on 'myModelServer'.
```

----------------------------------------

TITLE: Initializing a New VoltAgent Project (Bash)
DESCRIPTION: This command uses the `create-voltagent-app` CLI tool to scaffold a new VoltAgent project. It interactively guides the user through the initial setup process, creating the necessary project structure and starter files.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest
```

----------------------------------------

TITLE: Creating VoltAgent App with Retrieval Example (Bash)
DESCRIPTION: This command initializes a new VoltAgent project using the create-voltagent-app CLI tool. It specifies the @latest version and uses the --example with-retrieval flag to set up the project with a pre-configured example demonstrating retrieval functionalities. It requires Node.js and npm installed.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-retrieval/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-retrieval
```

----------------------------------------

TITLE: Creating VoltAgent Project with Example via npm (Bash)
DESCRIPTION: Use this command to quickly bootstrap a new VoltAgent application. It utilizes `npm create` to fetch the latest version of the VoltAgent app creator and sets up the project directory using the 'with-rag-chatbot' example, providing a ready-to-run project structure.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-rag-chatbot/README.md#_snippet_0

LANGUAGE: Bash
CODE:
```
npm create voltagent-app@latest -- --example with-rag-chatbot
```

----------------------------------------

TITLE: Create VoltAgent App with Vertex AI Example (Bash)
DESCRIPTION: Initializes a new VoltAgent project using the latest version and includes the Google Vertex AI example template. This command sets up the basic project structure and necessary files to get started quickly with a pre-configured example.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-vertex-ai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-google-vertex-ai
```

----------------------------------------

TITLE: Creating VoltAgent App with Example
DESCRIPTION: This command uses npm's create command to initialize a new VoltAgent project. It specifically uses the '@latest' version of 'voltagent-app' and includes the '--example with-voice-xsai' flag to set up the project with a pre-built example template.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-voice-xsai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-voice-xsai
```

----------------------------------------

TITLE: Integrating Custom Tools with VoltAgent in TypeScript
DESCRIPTION: This code demonstrates how to define and integrate a custom tool, `weatherTool`, into a VoltAgent. It uses `createTool` to define a tool with a name, description, Zod-schema validated parameters (city), and an `execute` function that provides mock weather data. The defined tool is then added to the agent's configuration via the `tools` array, enabling the agent to use this functionality.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-26-llm-agents/index.md#_snippet_7

LANGUAGE: typescript
CODE:
```
import { createTool } from "@voltagent/core";
import { z } from "zod";

const weatherTool = createTool({
  name: "get_weather",
  description: "Get weather for a city",
  parameters: z.object({
    city: z.string()
  }),
  execute: async ({ city }) => {
    // Simple mock data
    const weather = {
      "new york": "72°F, Sunny",
      chicago: "65°F, Cloudy",
      "los angeles": "78°F, Clear"
    };
    return weather[city.toLowerCase()] || "Information not found";
  }
});

// Add to agent
export const myAgent = new Agent({
  // ... previous config
  tools: [weatherTool]
});
```

----------------------------------------

TITLE: Defining and Integrating a Custom Tool in VoltAgent (TypeScript)
DESCRIPTION: This snippet illustrates how to define a custom tool, `weatherTool`, using VoltAgent's `createTool` function and Zod for parameter validation. The tool specifies its name, description, expected parameters, and an `execute` function that simulates an API call. This tool is then integrated into an `Agent` instance, allowing the agent to perform specific actions like fetching weather data.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-26-llm-agents/index.md#_snippet_2

LANGUAGE: TypeScript
CODE:
```
import { createTool } from "@voltagent/core";
import { z } from "zod";

const weatherTool = createTool({
  name: "get_weather",
  description: "Get weather information for a specified city",
  parameters: z.object({
    city: z.string().describe("City name, e.g., New York")
  }),
  execute: async ({ city }) => {
    // Real API call would go here
    return { temperature: "72°F", condition: "Sunny" };
  }
});

const agent = new Agent({
  // ... other config
  tools: [weatherTool]
});
```

----------------------------------------

TITLE: Creating a Custom VoltAgent Retriever
DESCRIPTION: This snippet demonstrates how to create a custom retriever in VoltAgent by extending the `BaseRetriever` class and implementing the asynchronous `retrieve` method. The example shows a simple in-memory document search, illustrating how to process input and format retrieved context for the LLM. It also shows how to instantiate the custom retriever.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/retriever.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
import { BaseRetriever, type BaseMessage } from "@voltagent/core";

// Example: Simple retriever fetching from a predefined document list
class MySimpleRetriever extends BaseRetriever {
  // In a real scenario, this could be a connection to a vector DB, API, etc.
  private documents = [
    { id: "doc1", content: "VoltAgent is a framework for building AI agents using TypeScript." },
    { id: "doc2", content: "Retrievers enhance LLMs with external, real-time data for RAG." },
    { id: "doc3", content: "VoltAgent supports tools, memory, sub-agents, and retrievers." },
  ];

  // You MUST implement this method
  async retrieve(input: string | BaseMessage[]): Promise<string> {
    // Determine the actual query string from the input
    const query = typeof input === "string" ? input : (input[input.length - 1].content as string);
    console.log(`MySimpleRetriever: Searching for context related to "${query}"`);

    // Implement your retrieval logic here (e.g., keyword search, vector similarity)
    const relevantDocs = this.documents.filter((doc) =>
      doc.content.toLowerCase().includes(query.toLowerCase())
    );

    // Format the retrieved information as a string for the LLM
    if (relevantDocs.length > 0) {
      const contextString = relevantDocs
        .map((doc) => `[Document ${doc.id}] ${doc.content}`)
        .join("\n\n");
      return contextString;
    } else {
      // Return an empty string or a specific message if no context is found
      return "No relevant information found in the document knowledge base.";
    }
  }
}

// You can optionally provide toolName and toolDescription if you plan
// to use this retriever AS A TOOL.
const retrieverWithOptions = new MySimpleRetriever({
  toolName: "search_docs",
  toolDescription: "Searches the internal document knowledge base.",
});

// Or create it without tool options if only using direct attachment
const retrieverBasic = new MySimpleRetriever();
```

----------------------------------------

TITLE: Creating New VoltAgent Project with Example - Bash
DESCRIPTION: This command uses npm create to initialize a new project based on the latest VoltAgent application template. The `--example with-voice-openai` flag specifies using the pre-configured 'with-voice-openai' example template, providing a quick starting point for a voice-enabled OpenAI agent project. Requires Node.js and npm installed.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-voice-openai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-voice-openai
```

----------------------------------------

TITLE: Creating VoltAgent App with Composio Example (Bash)
DESCRIPTION: This command uses npm's `create` command to initialize a new VoltAgent project based on the specified example template. The `--example with-composio-mcp` flag tells the creator tool to use the pre-built example integration with Composio's Model Context Protocol.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-composio-mcp/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-composio-mcp
```

----------------------------------------

TITLE: Importing Voltagent Core and Optional Modules (TypeScript)
DESCRIPTION: This snippet demonstrates Voltagent's modular package system, allowing users to import only necessary components like the core 'Agent' or specialized modules such as 'VoiceAgent', promoting a lightweight and customizable setup.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_2

LANGUAGE: typescript
CODE:
```
// Only use what you need
import { Agent } from "@voltagent/core";
import { VoiceAgent } from "@voltagent/voice"; // If needed
```

----------------------------------------

TITLE: Initializing Agent with Memory Storage (TypeScript)
DESCRIPTION: This snippet initializes a Voltagent 'Agent' and integrates the previously defined 'memoryStorage', enabling the agent to automatically manage and remember conversation history for improved context.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_12

LANGUAGE: typescript
CODE:
```
const agent = new Agent({
  name: "Assistant with Memory",
  instructions: "Remember our conversation history",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  memory: memoryStorage // Automatic context management
});
```

----------------------------------------

TITLE: Creating Reasoning Toolkits with VoltAgent TypeScript
DESCRIPTION: This snippet demonstrates how to use the `createReasoningTools` helper function from `@voltagent/core` to obtain a pre-configured `Toolkit`. It shows two ways to initialize the toolkit: one with instructions automatically added to the system prompt (`addInstructions: true`) and another without, allowing for manual instruction handling. The function returns a `Toolkit` object containing `think` and `analyze` tools for agent reasoning.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_11

LANGUAGE: TypeScript
CODE:
```
import { createReasoningTools, type Toolkit } from "@voltagent/core";

// Get the reasoning toolkit (with instructions included in the system prompt)
const reasoningToolkit: Toolkit = createReasoningTools({ addInstructions: true });

// Get the toolkit without automatically adding instructions
const reasoningToolkitManual: Toolkit = createReasoningTools({ addInstructions: false });
```

----------------------------------------

TITLE: Configuring Memory for VoltAgent (TypeScript)
DESCRIPTION: This snippet illustrates how to configure memory for a VoltAgent instance using a `LibSQLStorage` provider. When memory is configured, the agent automatically manages conversation history, retrieving relevant context before LLM calls and saving new interactions afterward, enabling more coherent conversations.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_4

LANGUAGE: typescript
CODE:
```
// Example: Configuring memory (Provider details omitted for brevity)
import { Agent, LibSQLStorage } from "@voltagent/core";
// ... other imports

const memoryStorage = new LibSQLStorage({
  /* ... provider config ... */
});

const agent = new Agent({
  name: "Assistant with Memory",
  // ... other config ...
  memory: memoryStorage,
});
```

----------------------------------------

TITLE: Generating Text with Explicit User and Conversation IDs (TypeScript)
DESCRIPTION: This snippet shows how to use the `generateText` method of the agent, explicitly passing `userId` and `conversationId` in the options object. Providing these identifiers ensures that the conversation history is correctly associated with a specific user and a particular conversation thread, enabling memory isolation and continuity.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/overview.md#_snippet_2

LANGUAGE: ts
CODE:
```
const response = await agent.generateText("Hello, how can you help me?", {
  userId: "user-123", // Identifies the specific user
  conversationId: "chat-session-xyz" // Identifies this specific conversation thread
});
```

----------------------------------------

TITLE: Creating Cancellable Tool with AbortSignal (TypeScript)
DESCRIPTION: Defines a tool using `createTool` that accepts an `options` object containing an `AbortSignal`. The `execute` function extracts the signal and passes it to an asynchronous operation (`fetch`) to enable cancellation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_8

LANGUAGE: TypeScript
CODE:
```
const searchTool = createTool({
  name: "search_web",
  description: "Search the web for current information",
  parameters: z.object({
    query: z.string().describe("The search query"),
  }),
  execute: async (args, options) => {
    // Extract the signal from options
    const signal = options?.signal;

    // Check if already aborted
    if (signal?.aborted) {
      throw new Error("Search was cancelled before it started");
    }

    // Example of a fetch operation that respects abort signal
    const response = await fetch(`https://api.search.com?q=${args.query}`, {
      signal: signal, // Pass the signal to fetch
    });

    // ... process and return results
    return await response.json();
  },
});
```

----------------------------------------

TITLE: Overriding Google AI Generation Parameters in VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to override default Google AI generation parameters like `temperature` and `topK` for individual `generateText` calls using the `provider` key within the options object. It also shows how to configure `thinkingConfig` to control the model's thinking budget.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/google-ai.md#_snippet_4

LANGUAGE: typescript
CODE:
```
// Example: Overriding temperature for a specific call
const response = await agent.generateText("Write a creative story.", {
  provider: {
    temperature: 0.9,
    topK: 40, // Google-specific parameter
    // Any other valid GenerateContentConfig options
  }
});

// Example: Using thinkingConfig to control thinking budget
const response = await agent.generateText("Write a creative story.", {
  provider: {
    thinkingConfig: {
      thinkingBudget: 0
    }
  }
});
```

----------------------------------------

TITLE: Define and Use Tool with AnthropicProvider
DESCRIPTION: Illustrates how to define a tool using createTool and Zod for parameter validation, and then include it in the Agent configuration when using the AnthropicProvider. This enables the agent to perform tool calls.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/anthropic-ai.md#_snippet_5

LANGUAGE: typescript
CODE:
```
import { createTool } from "@voltagent/core";
import { z } from "zod";

const weatherTool = createTool({
  name: "get_current_weather",
  description: "Get the current weather in a location",
  parameters: z.object({
    location: z.string().describe("The location to get weather for"),
  }),
  execute: async (input) => {
    return {
      location: input.location,
      temperature: 72,
      condition: "sunny",
    };
  },
});

const agent = new Agent({
  name: "weather-agent",
  instructions: "A helpful weather assistant",
  llm: new AnthropicProvider(),
  model: "claude-3-sonnet-20240229",
  tools: [weatherTool],
});
```

----------------------------------------

TITLE: Generating Text with Voltagent (TypeScript)
DESCRIPTION: Initializes an `Agent` with an `XsAIProvider` and a specific model (`gpt-4o-mini`). It then calls the `generateText` method with a prompt and logs the response, including the generated text, usage information, and finish reason.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_10

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { XsAIProvider } from "@voltagent/xsai";

async function main() {
  // Assumes OPENAI_API_KEY is set
  const provider = new XsAIProvider({ apiKey: process.env.OPENAI_API_KEY! });

  const agent = new Agent({
    name: "xsAI Text Agent",
    instructions: "Generates text using an OpenAI-compatible API",
    llm: provider,
    model: "gpt-4o-mini",
  });

  const prompt = "Explain the concept of Large Language Models simply.";

  try {
    const response = await agent.generateText(prompt);
    console.log(`Agent response to "${prompt}":`);
    console.log(response.text);
    console.log("Usage:", response.usage);
    console.log("Finish Reason:", response.finishReason);
  } catch (error) {
    console.error("Error generating text:", error);
  }
}

main();
```

----------------------------------------

TITLE: Implementing a Custom Voice Provider in TypeScript
DESCRIPTION: This snippet shows the basic structure of a custom voice provider class, `MyCustomVoiceProvider`, which extends `BaseVoiceProvider`. It includes the constructor for handling options and placeholder implementations for core methods like `connect`, `disconnect`, `send`, `speak`, and `listen`, demonstrating how to handle input/output streams and emit events.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_7

LANGUAGE: typescript
CODE:
```
import {
  BaseVoiceProvider,
  VoiceProviderEvents,
  VoiceMetadata,
  VoiceSpeakOptions,
  VoiceListenOptions,
} from "@voltagent/voice";
import { PassThrough, Readable } from "node:stream"; // Import Readable

// Define your custom provider options
type MyCustomProviderOptions = {
  apiKey: string;
  region?: string;
  // Add other necessary options
};

// Define potential errors specific to your provider
enum MyCustomErrorCode {
  AuthError = "AUTH_ERROR",
  ApiError = "API_ERROR",
  InvalidInput = "INVALID_INPUT",
}

export class MyCustomVoiceProvider extends BaseVoiceProvider<
  MyCustomProviderOptions,
  VoiceProviderEvents
> {
  private readonly apiKey: string;
  private readonly region: string;
  // Add client instances or other state needed

  constructor(options: MyCustomProviderOptions) {
    super(options); // Pass options to the base class
    this.apiKey = options.apiKey;
    this.region = options.region || "default-region";
    // Initialize your API client here
  }

  /**
   * Connect to the service if needed (e.g., WebSockets).
   */
  async connect(): Promise<void> {
    console.log("Connecting to Custom Voice Service...");
    // Add connection logic if required
    // Simulating async operation
    await new Promise((resolve) => setTimeout(resolve, 100));
    console.log("Connected.");
  }

  /**
   * Disconnect from the service.
   */
  disconnect(): void {
    console.log("Disconnecting from Custom Voice Service...");
    // Add disconnection logic
  }

  /**
   * Send audio data (e.g., for streaming STT).
   */
  async send(audioData: Readable): Promise<void> {
    console.log("Sending audio data chunk...");
    // Implementation for sending streaming audio
    // Read from audioData stream and send to your API
    // Example: audioData.pipe(yourApiStream);
    await new Promise((resolve) => setTimeout(resolve, 50)); // Simulate async send
  }

  /**
   * Convert text to speech.
   */
  async speak(
    text: string, // Assuming text is always string for simplicity here
    options?: VoiceSpeakOptions // Use standardized options type
  ): Promise<Readable> {
    // Return standard Readable stream
    this.emit("speaking", { text }); // Emit standard event

    try {
      console.log(`Speaking text: "${text}" with voice: ${options?.voice}`);
      // --- Your TTS API Call Logic ---
      // const apiResponse = await yourTTSClient.synthesize({
      //   text: text,
      //   voice: options?.voice || 'default-voice',
      //   apiKey: this.apiKey,
      //   // map other options like speed if applicable
      // });
      // -----------------------------

      // Simulate receiving audio data from API
      await new Promise((resolve) => setTimeout(resolve, 500));
      const audioBuffer = Buffer.from(`Simulated audio for: ${text}`);

      // Return audio data as a Readable stream
      const passThrough = new PassThrough();
      passThrough.end(audioBuffer);
      return passThrough;
    } catch (error: any) {
      const errorMessage = error.message || "Unknown TTS error";
      this.emit("error", {
        message: errorMessage,
        code: MyCustomErrorCode.ApiError, // Use your specific error codes
        details: error,
      });
      throw new Error(`Custom TTS failed: ${errorMessage}`); // Re-throw a standard error
    }
  }

  /**
   * Convert speech to text.
   */
  async listen(
    audio: Readable, // Expect a Readable stream
    options?: VoiceListenOptions // Use standardized options type
  ): Promise<string | AsyncIterable<any>> {
    // Return string or stream based on options
    this.emit("listening", { audio }); // Emit standard event

    try {
      console.log(`Listening with language: ${options?.language}, stream: ${options?.stream}`);

      // --- Your STT API Call Logic ---
      // Handle both standard and streaming modes
      if (options?.stream) {
        // Implement streaming transcription logic
        // Example: const transcriptStream = yourSTTClient.startStream(audio, { language: options.language });
        // return transcriptStream; // Return the async iterable from your client

        // --- Placeholder for streaming ---
        async function* generateChunks() {
          yield { delta: "Simulated " };
          await new Promise((resolve) => setTimeout(resolve, 200));
          yield { delta: "streamed " };
          await new Promise((resolve) => setTimeout(resolve, 200));
          yield { delta: "transcript." };
        }
        return generateChunks();
        // --- End Placeholder ---
      } else {
        // Implement non-streaming transcription logic
        // Example: const result = await yourSTTClient.transcribe(audio, { language: options?.language });
        // return result.text;

        // --- Placeholder for non-streaming ---
        // Simulate reading the stream and getting a result

```

----------------------------------------

TITLE: Initializing InMemoryStorage and Agent with VoltAgent
DESCRIPTION: This snippet demonstrates how to initialize the InMemoryStorage provider and configure a VoltAgent instance to use it. It shows how to set optional configuration like storageLimit and debug flags, and how to pass the memory instance to the Agent constructor.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/in-memory.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
import { Agent, InMemoryStorage } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Initialize InMemoryStorage
const memory = new InMemoryStorage({
  // Optional: Limit the number of messages stored per conversation thread
  storageLimit: 100, // Defaults to no limit if not specified

  // Optional: Enable verbose debug logging from the memory provider
  debug: true, // Defaults to false
});

const agent = new Agent({
  name: "Ephemeral Agent",
  instructions: "An agent using in-memory storage (history resets on restart).",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  memory: memory, // Assign the InMemoryStorage instance
});

// Interactions with this agent will use the in-memory store.
// await agent.generateText("Remember this info.", { userId: "user1", conversationId: "conv1" });
// // If the app restarts here, the above message is lost.
// await agent.generateText("Do you remember?", { userId: "user1", conversationId: "conv1" });
```

----------------------------------------

TITLE: Initializing Agent with Google AI Vertex Provider (TypeScript)
DESCRIPTION: Configure and instantiate the `GoogleGenAIProvider` for use with Google Cloud Vertex AI, providing project details, location, and authentication credentials. Note that this configuration is primarily for server-side environments.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/google-ai/README.md#_snippet_4

LANGUAGE: typescript
CODE:
```
const googleVertexProvider = new GoogleGenAIProvider({
  vertexai: true,
  project: "your-project-id",
  location: "your-project-location",
  googleAuthOptions: {
    credentials: {
      // never expose your private key in the code, this is just an example
      private_key: "my-private-key",
      // this is your service account email created in the google cloud console
      client_email: "my-client-email",
    },
  },
});

const agent = new Agent({
  name: "Google Assistant",
  instructions: "A helpful and friendly assistant that can answer questions clearly and concisely.",
  llm: googleProvider,
  model: "gemini-1.5-pro-latest", // Specify the desired Google model
});
```

----------------------------------------

TITLE: Initializing Agent with Local and MCP Tools (TypeScript)
DESCRIPTION: This snippet initializes a Voltagent 'Agent' with both locally defined tools ('weatherTool') and tools obtained from an MCP server ('mcpTools'), demonstrating how to combine different tool sources for the agent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_10

LANGUAGE: typescript
CODE:
```
const agent = new Agent({
  name: "Weather Assistant",
  instructions: "Can check weather using available tools",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  tools: [weatherTool, ...mcpTools] // Combine both
});
```

----------------------------------------

TITLE: Creating a New VoltAgent Project (Automatic Setup)
DESCRIPTION: These commands use the `create-voltagent-app` CLI tool to automatically scaffold a new VoltAgent project. Users can choose their preferred package manager (npm, yarn, or pnpm) to initialize the application, which then guides them through configuration.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest my-agent-app
```

LANGUAGE: bash
CODE:
```
yarn create voltagent-app my-agent-app
```

LANGUAGE: bash
CODE:
```
pnpm create voltagent-app my-agent-app
```

----------------------------------------

TITLE: Creating New VoltAgent Project (bash)
DESCRIPTION: This command uses the `create-voltagent-app` CLI tool to quickly scaffold a new VoltAgent project directory with a basic structure and starter code.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/vercel-ai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest
```

----------------------------------------

TITLE: Starting VoltAgent Developer Server (Bash)
DESCRIPTION: This command initiates the VoltAgent developer server, which provides access to the developer console. The console offers real-time conversation monitoring, tool execution tracing, memory state inspection, performance metrics, and error debugging, significantly enhancing the development and debugging experience for VoltAgent applications.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_17

LANGUAGE: bash
CODE:
```
npm run dev
# ══════════════════════════════════════════════════
# VOLTAGENT SERVER STARTED SUCCESSFULLY
# ══════════════════════════════════════════════════
# ✓ HTTP Server: http://localhost:3141
# Developer Console: https://console.voltagent.dev
# ══════════════════════════════════════════════════
```

----------------------------------------

TITLE: Adding Individual Tools and Toolkits to an Agent (TypeScript)
DESCRIPTION: Shows how the `tools` array in the `Agent` constructor can accept a mix of individual `Tool` objects (like `getWeatherTool`) and `Toolkit` objects (like `myCalculatorToolkit`), demonstrating the flexibility of the `ToolManager`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/tools/overview.md#_snippet_2

LANGUAGE: TypeScript
CODE:
```
import { Agent, createTool, createToolkit, type Toolkit } from "@voltagent/core";
// ... import other tools and toolkits ...

const agent = new Agent({
    name: "MultiToolAgent",
    instructions: "An agent with various tools and toolkits.",
    llm: /* ... */,
    model: /* ... */,
    tools: [
        getWeatherTool,      // Add an individual tool
        myCalculatorToolkit, // Add a toolkit
        // ... other tools or toolkits
    ]
});
```

----------------------------------------

TITLE: Creating a New VoltAgent Project
DESCRIPTION: Use the `create-voltagent-app` CLI tool to quickly scaffold a new VoltAgent project with a basic structure.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/voice/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest
```

----------------------------------------

TITLE: Creating New VoltAgent Project (Bash)
DESCRIPTION: Uses the `create-voltagent-app` CLI tool to quickly set up a new VoltAgent project with a starter template.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/create-voltagent-app/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest
```

----------------------------------------

TITLE: Installing VoltAgent Dependencies with pnpm
DESCRIPTION: This command installs the necessary core VoltAgent packages, the CLI tool, the Vercel AI provider, the AI SDK for OpenAI, and Zod for schema validation, which are essential for building VoltAgent applications.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_9

LANGUAGE: bash
CODE:
```
pnpm add @voltagent/core @voltagent/cli @voltagent/vercel-ai @ai-sdk/openai zod
```

----------------------------------------

TITLE: Installing VoltAgent Dependencies (yarn)
DESCRIPTION: These yarn commands install both development and production dependencies for a VoltAgent project. Development dependencies include TypeScript, tsx, and the VoltAgent CLI, while production dependencies cover core VoltAgent libraries, Vercel AI integration, AI SDK, and Zod for schema validation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_7

LANGUAGE: bash
CODE:
```
# Install development dependencies
yarn add --dev typescript tsx @types/node @voltagent/cli

# Install dependencies
yarn add @voltagent/core @voltagent/vercel-ai @ai-sdk/openai zod
```

----------------------------------------

TITLE: Creating VoltAgent Project with CLI (Bash)
DESCRIPTION: Uses the `npm create` command to initialize a new VoltAgent project named `mcp-filesystem-agent`. This command leverages the `create-voltagent-app` tool to set up the basic project structure and configuration.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-25-what-is-an-mcp-server/index.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest mcp-filesystem-agent
```

----------------------------------------

TITLE: Integrating Reasoning Tools with VoltAgent (TypeScript)
DESCRIPTION: This example illustrates how to integrate the `reasoning_tools` Toolkit into a VoltAgent. It initializes an `Agent` instance, configures it with an LLM provider (VercelAIProvider and OpenAI's gpt-4o-mini model), and passes the `reasoningToolkit` directly to the agent's `tools` array. This ensures the agent's system message will include the necessary reasoning instructions for structured problem-solving.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_12

LANGUAGE: typescript
CODE:
```
// Example: Using the new reasoning tools helper
import { Agent, createReasoningTools, type Toolkit } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const reasoningToolkit: Toolkit = createReasoningTools({
  addInstructions: true,
});

const agent = new Agent({
  name: "MyThinkingAgent",
  instructions: "An agent equipped with reasoning tools.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  tools: [reasoningToolkit], // Pass the toolkit
});

// Agent's system message will include reasoning instructions.
```

----------------------------------------

TITLE: Running the VoltAgent Application (Bash)
DESCRIPTION: This simple Bash command is used to start the VoltAgent application configured in the previous steps. The `npm run dev` command typically executes a script defined in the project's `package.json` file, which in this case, starts the development server for the VoltAgent application, including the integrated Peaka MCP server.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-26-peaka-mcp-voltagent/index.md#_snippet_3

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Starting the VoltAgent Development Server (Bash)
DESCRIPTION: This command executes the development script defined in the project's `package.json` file. It uses `tsx` to compile and run the VoltAgent application, starting the local server and making the defined agents accessible for interaction and debugging.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Starting the VoltAgent Development Server
DESCRIPTION: This command compiles and runs the VoltAgent application in development mode. It starts the VoltAgent server, making the defined agents accessible via HTTP and the VoltAgent Console for interaction and debugging.
SOURCE: https://github.com/voltagent/voltagent/blob/main/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Running VoltAgent Agent in Development Mode (Bash)
DESCRIPTION: This command starts the VoltAgent application in development mode using the pnpm package manager. The comment indicates alternative commands for npm or yarn users. Running in development mode typically includes features like file watching and hot-reloading.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-composio-mcp/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
pnpm dev
# or npm run dev / yarn dev
```

----------------------------------------

TITLE: Running the VoltAgent Development Server (Bash)
DESCRIPTION: Execute this command in the project directory to compile and run the VoltAgent application using `tsx`, starting the local development server.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/xsai/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Running VoltAgent in Development with pnpm
DESCRIPTION: This command starts the VoltAgent server in development mode using `pnpm`. It runs the `dev` script from `package.json`, which typically uses `tsx watch` to monitor and restart the server upon code modifications.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_16

LANGUAGE: bash
CODE:
```
pnpm dev
```

----------------------------------------

TITLE: Defining VoltAgent Multi-Agent System (TypeScript)
DESCRIPTION: Demonstrates how to define a multi-agent system using VoltAgent. It creates two subagents (`Story Agent`, `Translator Agent`) and a `Supervisor Agent` that orchestrates their workflow, using the Vercel AI provider and OpenAI's gpt-4o-mini model. The supervisor agent is configured to use the subagents.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-23-multi-agent-llm/index.md#_snippet_2

LANGUAGE: TypeScript
CODE:
```
// Inside your VoltAgent project (e.g., src/index.ts)
import { VoltAgent, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// 1. Create Subagents
const storyAgent = new Agent({
  name: "Story Agent",
  instructions: "You are an expert at writing creative and engaging short stories.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});

const translatorAgent = new Agent({
  name: "Translator Agent",
  instructions: "You are a skilled translator, proficient in translating text accurately.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});

// 2. Create the Supervisor Agent (linking subagents)
const supervisorAgent = new Agent({
  name: "Supervisor Agent",
  instructions:
    "You manage a workflow between specialized agents. When asked for a story, " +
    "use the Story Agent. Then, use the Translator Agent to translate the story. " +
    "Present both versions to the user.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  // Connect the subagents here
  subAgents: [storyAgent, translatorAgent],
});

new VoltAgent({
  agents: {
    supervisorAgent,
  },
});
```

----------------------------------------

TITLE: Managing Conversation Continuity with User and Conversation IDs (TypeScript)
DESCRIPTION: This example demonstrates two scenarios for managing conversation context. The first part shows how omitting `conversationId` results in a new conversation thread for each request, useful for single-turn interactions. The second part illustrates how providing the same `conversationId` across multiple requests maintains context within a continuous conversation thread for a specific user.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/overview.md#_snippet_3

LANGUAGE: ts
CODE:
```
// To start a NEW conversation each time (or for single-turn interactions):
// Omit conversationId; a new one is generated automatically.
const response1 = await agent.generateText("Help with account setup", { userId: "user-123" });
const response2 = await agent.generateText("Question about billing issue", { userId: "user-123" }); // Starts another new conversation

// To MAINTAIN a continuous conversation across requests:
// Always provide the SAME conversationId.
const SUPPORT_THREAD_ID = "case-987-abc";
const responseA = await agent.generateText("My router is not working.", {
  userId: "user-456",
  conversationId: SUPPORT_THREAD_ID
});
// Agent remembers the router issue for the next call with the same ID
const responseB = await agent.generateText("I tried restarting it, still no luck.", {
  userId: "user-456",
  conversationId: SUPPORT_THREAD_ID
});
```

----------------------------------------

TITLE: Streaming Structured Objects with VoltAgent and Vercel AI SDK (TypeScript)
DESCRIPTION: Demonstrates how to use the `streamObject` method with VoltAgent and the Vercel AI SDK to stream structured data based on a Zod schema. It shows how to define the schema, initialize the agent, call `streamObject`, and process both partial and final streamed objects.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_10

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
import { z } from "zod"; // Import Zod

// Define a schema for the desired object structure
const recipeSchema = z.object({
  dishName: z.string().describe("Name of the dish"),
  ingredients: z.array(z.string()).describe("List of ingredients"),
  steps: z.array(z.string()).describe("Cooking steps"),
});

async function main() {
  const vercelProvider = new VercelProvider();

  // Ensure the model supports object streaming (e.g., gpt-4o)
  const agent = new Agent({
    name: "Vercel Object Streaming Agent",
    instructions: "An agent that streams structured data via Vercel AI SDK",
    llm: vercelProvider,
    model: openai("gpt-4o"),
  });

  const prompt = "Generate a simple recipe for pancakes.";

  try {
    // Call streamObject with the prompt and schema
    const response = await agent.streamObject(prompt, recipeSchema);

    console.log("Streaming Object Updates:");
    // Stream partial object updates
    for await (const partialObject of response.objectStream) {
      console.log("Partial:", partialObject);
    }

    // Get the final object once streaming is complete
    const finalObject = await response.object;
    console.log("\nFinal Streamed Object:");
    console.log(finalObject);
    console.log("Usage:", response.usage);
  } catch (error) {
    console.error("Error streaming object:", error);
  }
}

main();
```

----------------------------------------

TITLE: Configuring Agent with Single Tool (VoltAgent)
DESCRIPTION: Illustrates how to instantiate a VoltAgent `Agent` and include a previously defined tool (like the calculator tool) in its configuration. This makes the tool available for the agent to use when processing prompts.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const agent = new Agent({
  name: "Calculator Assistant",
  description: "An assistant that can perform calculations",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  tools: [calculatorTool]
});

// The agent can now use the calculator tool when needed
// const response = await agent.generateText("What is 123 * 456?");
// console.log(response.text);
```

----------------------------------------

TITLE: Running VoltAgent Development Server (bash)
DESCRIPTION: This command executes the development script defined in the project's `package.json` (typically using `tsx`) to compile and start the VoltAgent server, making the defined agents accessible.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/vercel-ai/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Install Vercel AI Provider (yarn)
DESCRIPTION: Installs the necessary VoltAgent core and Vercel AI provider packages using the yarn package manager.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_1

LANGUAGE: bash
CODE:
```
yarn add @voltagent/core @voltagent/vercel-ai
```

----------------------------------------

TITLE: Install Supabase Memory Packages
DESCRIPTION: Installs the required packages for using the Supabase memory provider (`@voltagent/supabase` and `@supabase/supabase-js`) using different package managers.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/supabase.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/supabase @supabase/supabase-js
```

LANGUAGE: bash
CODE:
```
yarn add @voltagent/supabase @supabase/supabase-js
```

LANGUAGE: bash
CODE:
```
pnpm add @voltagent/supabase @supabase/supabase-js
```

----------------------------------------

TITLE: Starting VoltAgent Development Server (Bash)
DESCRIPTION: Starts the VoltAgent development server, which hosts the defined agents and provides access to the developer console. This command executes the 'dev' script defined in the project's `package.json`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-23-multi-agent-llm/index.md#_snippet_4

LANGUAGE: Bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Install Anthropic Provider with npm
DESCRIPTION: Installs the necessary packages for using the Anthropic provider with VoltAgent via npm. Requires @voltagent/core, @voltagent/anthropic-ai, and zod (for generateObject).
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/anthropic-ai.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/core @voltagent/anthropic-ai zod
```

----------------------------------------

TITLE: Install Anthropic Provider with yarn
DESCRIPTION: Installs the necessary packages for using the Anthropic provider with VoltAgent via yarn. Requires @voltagent/core, @voltagent/anthropic-ai, and zod (for generateObject).
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/anthropic-ai.md#_snippet_1

LANGUAGE: bash
CODE:
```
yarn add @voltagent/core @voltagent/anthropic-ai zod
```

----------------------------------------

TITLE: Integrating Playwright Browser Management with VoltAgent
DESCRIPTION: This snippet demonstrates how to integrate Playwright with VoltAgent using `userContext` for managing browser instances. It includes a `ensurePage` helper for lazy initialization and storing `Browser` and `Page` instances, an `onEnd` hook (`playwrightHooks`) for closing the browser after an operation, and a `navigateTool` that utilizes the managed `Page`. The `BrowserAutomationAgent` is configured with these hooks and tools to provide isolated browser sessions per `generateText` call.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/context.md#_snippet_2

LANGUAGE: TypeScript
CODE:
```
import {
  Agent,
  createHooks,
  createTool,
  type OnEndHookArgs,
  type OperationContext,
  type ToolExecutionContext,
} from "@voltagent/core";
import { z } from "zod"; // Make sure z is imported if not already
import { chromium, type Browser, type Page } from "playwright";
// Assume VercelAIProvider and openai are configured as in the first example

const PAGE_KEY = Symbol("playwrightPage");
const BROWSER_KEY = Symbol("playwrightBrowser");

async function ensurePage(context: OperationContext): Promise<Page> {
  let page = context.userContext.get(PAGE_KEY) as Page | undefined;
  if (!page || page.isClosed()) {
    console.log(`[${context.operationId}] LAZY: Creating new browser/page for operation...`);
    const browser = await chromium.launch();
    page = await browser.newPage();
    context.userContext.set(BROWSER_KEY, browser);
    context.userContext.set(PAGE_KEY, page);
  }
  return page;
}

const playwrightHooks = createHooks({
  onEnd: async ({ context }: OnEndHookArgs) => {
    const browser = context.userContext.get(BROWSER_KEY) as Browser | undefined;
    if (browser) {
      console.log(`[${context.operationId}] CLEANUP: Closing browser for operation...`);
      await browser.close();
    }
  },
});

const navigateTool = createTool({
  name: "navigate_url",
  description: "Navigates to a specified URL.", // Added description
  parameters: z.object({ url: z.string().url() }),
  execute: async ({ url }, options?: ToolExecutionContext) => {
    if (!options?.operationContext) throw new Error("OperationContext is required for this tool.");
    const page = await ensurePage(options.operationContext);
    await page.goto(url);
    console.log(`[${options.operationContext.operationId}] ACTION: Navigated to ${url}`);
    return `Successfully navigated to ${url}`;
  },
});

const browserAutomationAgent = new Agent({
  name: "BrowserAutomationAgent",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  hooks: playwrightHooks,
  tools: [navigateTool],
  instructions: "You are an agent that can browse the web. Use the navigate_url tool.",
});

async function runBrowserTasks() {
  console.log("--- Starting Browser Task 1 ---");
  await browserAutomationAgent.generateText("Navigate to https://example.com using the tool.");
  console.log("--- Browser Task 1 Finished ---");

  console.log("\n--- Starting Browser Task 2 (separate browser instance) ---");
  await browserAutomationAgent.generateText("Navigate to https://google.com using the tool.");
  console.log("--- Browser Task 2 Finished ---");
}

// runBrowserTasks();
```

----------------------------------------

TITLE: Initializing a New VoltAgent Project with npm
DESCRIPTION: This command-line snippet demonstrates how to quickly set up a new VoltAgent project using `create-voltagent-app`. It initializes a project directory, navigates into it, and then starts the development server, providing a rapid way to begin building AI agents.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-21-introducing-voltagent/index.md#_snippet_0

LANGUAGE: Bash
CODE:
```
npm create voltagent-app@latest my-first-agent
cd my-first-agent
npm run dev # or yarn dev / pnpm dev
```

----------------------------------------

TITLE: Automatic Context Retrieval using User and Conversation IDs (TypeScript)
DESCRIPTION: This snippet demonstrates how the agent's `MemoryManager` automatically utilizes the provided `userId` and `conversationId` to retrieve relevant conversation history. This history is then included as context in the prompt sent to the Language Model, enabling the LLM to understand the ongoing conversation thread and respond coherently.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/overview.md#_snippet_4

LANGUAGE: ts
CODE:
```
// The agent automatically retrieves history for user-123/chat-session-xyz
// and includes up to N recent messages (determined by the provider/manager) in the LLM prompt.
const response = await agent.generateText("What was the first thing I asked you?", {
  userId: "user-123",
  conversationId: "chat-session-xyz"
  // contextLimit: 10, // Note: contextLimit is typically managed by MemoryOptions now
});
```

----------------------------------------

TITLE: Perform Text-to-Speech (TTS) and Save (TypeScript)
DESCRIPTION: Shows how to use the `speak` method to get an audio stream from text and pipe it to a file using Node.js streams, including basic and custom option examples.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_2

LANGUAGE: typescript
CODE:
```
import { createWriteStream } from "node:fs";
import { PassThrough } from "node:stream";
import { pipeline } from "node:stream/promises"; // Use pipeline for better error handling

// --- Example 1: Basic Speak and Save to File ---

console.log("Generating audio...");
// Get the audio stream for the text
const audioStream = await openAIVoice.speak("Hello from VoltAgent!");

console.log("Saving audio to output.mp3...");
// Create a file stream to write the audio
const fileStream = createWriteStream("output.mp3");

try {
  // Pipe the audio stream to the file stream and wait for completion
  await pipeline(audioStream, fileStream);
  console.log("Audio successfully saved to output.mp3");
} catch (error) {
  console.error("Failed to save audio:", error);
}

// --- Example 2: Speak with Options and Save ---

console.log("Generating custom audio...");
const customAudioStream = await elevenLabsVoice.speak("Speaking faster now.", {
  // Provider-specific options can be passed here.
  // For OpenAI, you might use:
  // voice: "nova", // Override the default voice
  // speed: 1.5,    // Adjust speaking speed (1.0 is default)
});

console.log("Saving custom audio to custom_output.mp3...");
const customFileStream = createWriteStream("custom_output.mp3");

try {
  // Pipe the custom audio stream to the file stream
  await pipeline(customAudioStream, customFileStream);
  console.log("Custom audio successfully saved to custom_output.mp3");
} catch (error) {
  console.error("Failed to save custom audio:", error);
}

// Note: The audioStream is a standard Node.js Readable stream.
// You can pipe it to other destinations or process it directly.
```

----------------------------------------

TITLE: Perform Speech-to-Text (STT) from Audio Stream (TypeScript)
DESCRIPTION: Illustrates how to use the `listen` method to transcribe audio from a file stream, including basic transcription, language hints, and streaming transcription examples.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { createReadStream } from "node:fs";

// Ensure you have an audio file (e.g., input.mp3)
const audioFileStream = createReadStream("input.mp3");

// Basic transcription with OpenAI
const transcribedText = await openAIVoice.listen(audioFileStream);
console.log("Transcription:", transcribedText);

// Transcription with options (e.g., language hint)
const transcribedSpanish = await openAIVoice.listen(audioFileStream, {
  language: "es", // Specify the language code
});
console.log("Spanish Transcription:", transcribedSpanish);

// Streaming transcription (Provider-dependent, e.g., OpenAI)
try {
  const streamingTranscription = await openAIVoice.listen(audioFileStream, {
    stream: true, // Enable streaming
  });

  for await (const chunk of streamingTranscription) {
    // Process transcription chunks as they arrive
    // The structure of 'chunk' depends on the provider
    console.log("Stream Chunk:", chunk);
  }
} catch (error) {
  console.error("Streaming transcription failed:", error);
}
```

----------------------------------------

TITLE: Initializing VoltAgent with Langfuse Exporter
DESCRIPTION: Initialize your main `VoltAgent` instance, passing the configured `langfuseExporter` instance to the `telemetryExporter` option to enable automatic trace export.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/observability/langfuse.md#_snippet_3

LANGUAGE: typescript
CODE:
```
// Define your agent(s)
const agent = new Agent({
  name: "my-voltagent-app",
  instructions: "A helpful assistant that answers questions without using tools",
  llm: new VercelAIProvider(),
});

// Initialize VoltAgent with the exporter
new VoltAgent({
  agents: {
    agent, // Register your agent(s)
  },
  // highlight-next-line
  telemetryExporter: langfuseExporter, // Pass the exporter instance
});
```

----------------------------------------

TITLE: Generating Object via Core API (cURL with Options)
DESCRIPTION: Shows how to generate a structured JSON object from an agent using the `/agents/{id}/object` endpoint, including the `options` object for context and the required JSON representation of a Zod schema.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/api/overview.md#_snippet_7

LANGUAGE: bash
CODE:
```
# Replace '{"type":"object", ...}' with the JSON representation of your Zod schema
curl -X POST http://localhost:3141/agents/your-agent-id/object \
     -H "Content-Type: application/json" \
     -d '{ "input": "Extract the name and age from: John Doe is 30 years old.", "schema": {"type":"object", "properties": {"name": {"type": "string"}, "age": {"type": "number"}}, "required": ["name", "age"]}, "options": { "userId": "user-123", "conversationId": "your-unique-conversation-id" } }'
```

----------------------------------------

TITLE: Updating Agent Definition with Instructions Field (TypeScript)
DESCRIPTION: This snippet demonstrates the updated way to define an Agent instance, replacing the 'description' field with 'instructions'. The 'instructions' field is now the preferred method for providing behavioral guidance to the agent, aligning with future API deprecations and ensuring consistent agent behavior.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_16

LANGUAGE: TypeScript
CODE:
```
const agent = new Agent({
  name: "My Assistant",
  instructions: "A helpful assistant.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});
```

----------------------------------------

TITLE: Basic createPrompt Usage
DESCRIPTION: Demonstrates the fundamental use of `createPrompt` by defining a template and default variables, then generating a prompt string using only the defaults. It also shows how the generated prompt can be used, for example, in an Agent configuration.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/utils/create-prompt.md#_snippet_2

LANGUAGE: TypeScript
CODE:
```
import { createPrompt, Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Define the prompt template and default variables
const basicPrompt = createPrompt({
  template: `You are a helpful assistant that {{role}}.
Task: {{task}}`,
  variables: { role: "simplifies complex topics", task: "summarize text" },
});

// Generate prompt using only default variables
const prompt1 = basicPrompt();
console.log(prompt1);
/*
Output:
You are a helpful assistant that simplifies complex topics.
Task: summarize text
*/

const agent = new Agent({
  name: "Basic Assistant",
  // Use the generated prompt in the description field
  // highlight-next-line
  description: prompt1,
  llm: new VercelAIProvider(), // Example provider
  model: openai("gpt-4o-mini"), // Example model
});
```

----------------------------------------

TITLE: Defining Zod Schema for Structured Data (TypeScript)
DESCRIPTION: This snippet defines a Zod schema ('personSchema') for structured data extraction, specifying fields like 'name', 'age', 'occupation', and 'skills'. This schema is used by Voltagent to ensure type-safe JSON output.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_6

LANGUAGE: typescript
CODE:
```
const personSchema = z.object({
  name: z.string().describe("Full name"),
  age: z.number(),
  occupation: z.string(),
  skills: z.array(z.string())
});
```

----------------------------------------

TITLE: Refactoring Agent Definition to Use Instructions Field (TypeScript)
DESCRIPTION: This snippet illustrates a refactor in VoltAgent where the `Agent` class now uses the `instructions` field instead of `description` for defining agent behavior. This change aligns with the preferred API usage, providing explicit behavioral guidance to the agent's underlying LLM and preparing for the eventual deprecation of the `description` field for `Agent` instances.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_21

LANGUAGE: diff
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Using GoogleGenAIProvider with VoltAgent
DESCRIPTION: This snippet demonstrates how to instantiate an `Agent` with a configured `GoogleGenAIProvider`, specify a Google model ID, and then execute a `generateText` call to interact with the LLM.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/google-ai.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { GoogleGenAIProvider } from "@voltagent/google-ai";

// Using API Key configuration from above
const googleProvider = new GoogleGenAIProvider({ apiKey: "YOUR_GEMINI_API_KEY" });
// Or using Vertex AI configuration
// const googleProvider = new GoogleGenAIProvider({ project: '...', location: '...' });

const agent = new Agent({
  name: "Google Gemini Agent",
  instructions: "An agent powered by Google Gemini",
  llm: googleProvider,
  model: "gemini-1.5-flash" // Specify the desired Google model ID
});

// Example call
async function run() {
  const response = await agent.generateText(
    "Explain the difference between Google Gemini and Vertex AI."
  );
  console.log(response.text);
}

run();
```

----------------------------------------

TITLE: Refactoring Agent Definition to Use Instructions Field in TypeScript
DESCRIPTION: This snippet demonstrates the updated method for defining `Agent` instances, replacing the `description` field with `instructions`. This change aligns with the preferred API usage, where `instructions` provides behavioral guidance to the agent or LLM, and prepares for the eventual deprecation of the `description` field for `Agent` class definitions.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/xsai/CHANGELOG.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
const agent = new Agent({
  name: "My Assistant",
  instructions: "A helpful assistant.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});
```

----------------------------------------

TITLE: Example Usage of createToolkit in TypeScript
DESCRIPTION: This example demonstrates how to use `createToolkit` to bundle existing tools into a `Toolkit`. It defines two sample tools, `getWeather` and `searchWeb`, and then combines them into a `webInfoToolkit`, setting `addInstructions` to true to automatically include toolkit instructions in the agent's prompt. It shows how to import necessary functions and the resulting structure of the created toolkit.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_10

LANGUAGE: TypeScript
CODE:
```
import { createTool, createToolkit } from "@voltagent/core";
import { z } from "zod";

// Define some tools first
const getWeather = createTool({
  name: "getWeather",
  description: "Gets the weather for a location.",
  schema: z.object({ location: z.string() }),
  run: async ({ location }) => ({ temperature: "25C", condition: "Sunny" }),
});

const searchWeb = createTool({
  name: "searchWeb",
  description: "Searches the web for a query.",
  schema: z.object({ query: z.string() }),
  run: async ({ query }) => ({ results: ["Result 1", "Result 2"] }),
});

// Create a toolkit using the helper
const webInfoToolkit = createToolkit({
  name: "web_information",
  description: "Tools for getting information from the web.",
  addInstructions: true, // Add the instructions to the system prompt
  tools: [getWeather, searchWeb],
});

console.log(webInfoToolkit);
/*
Output:
{
  name: 'web_information',
  description: 'Tools for getting information from the web.',
  instructions: 'Use these tools to find current information online.',
  addInstructions: true,
  tools: [ [Object Tool: getWeather], [Object Tool: searchWeb] ]
}
*/
```

----------------------------------------

TITLE: Passing Provider-Specific Options to VoltAgent (TypeScript)
DESCRIPTION: Illustrates how to pass options specific to the underlying Vercel AI SDK or model provider when using VoltAgent methods like `streamText`. These options are included within the `provider` property of the options object passed to the VoltAgent method.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_11

LANGUAGE: typescript
CODE:
```
agent.streamText("Tell me a joke", {
  provider: {
    // Pass any Vercel AI SDK compatible option here
    experimental_activeTools: ["tool1", "tool2"], // Example Vercel AI SDK option
    // otherProviderOptions...
  },
});
```

----------------------------------------

TITLE: Passing Provider-Specific Options in VoltAgent (TypeScript)
DESCRIPTION: This example demonstrates how to pass arbitrary provider-specific options to VoltAgent's generation methods, such as `streamText`, using the `provider` object. It leverages the `[key: string]: unknown;` index signature added to `ProviderOptions` to allow custom parameters like `experimental_activeTools` for Vercel AI SDK, alongside standard options like `temperature`. This enhances flexibility for integrating provider-specific features.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_4

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const agent = new Agent({
  name: "Example Agent",
  llm: new VercelProvider(),
  model: openai("gpt-4o-mini"),
});

await agent.streamText("Tell me a joke", {
  provider: {
    // Standard options can still be used
    temperature: 0.7,
    // Provider-specific options are now allowed by the type
    experimental_activeTools: ["tool1", "tool2"],
    anotherProviderOption: "someValue",
  },
});
```

----------------------------------------

TITLE: Running VoltAgent in Development Mode
DESCRIPTION: Command to start the VoltAgent application in development mode using pnpm. This typically enables features like hot-reloading and detailed logging.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-zapier-mcp/README.md#_snippet_3

LANGUAGE: bash
CODE:
```
pnpm dev
# or npm run dev / yarn dev
```

----------------------------------------

TITLE: Installing Google AI Provider Package (Bash)
DESCRIPTION: Install the necessary `@voltagent/google-ai` package into your project using npm, yarn, or pnpm to enable integration with Google's generative AI models.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/google-ai/README.md#_snippet_1

LANGUAGE: bash
CODE:
```
npm install @voltagent/google-ai
```

LANGUAGE: bash
CODE:
```
yarn add @voltagent/google-ai
```

LANGUAGE: bash
CODE:
```
pnpm add @voltagent/google-ai
```

----------------------------------------

TITLE: Running the VoltAgent Development Server
DESCRIPTION: Execute the development script for the VoltAgent server using different Node.js package managers (npm, yarn, pnpm). This command starts the local server instance.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-21-first-ai-agent-github-repo-analyzer/index.md#_snippet_4

LANGUAGE: bash
CODE:
```
npm run dev
```

LANGUAGE: bash
CODE:
```
yarn run dev
```

LANGUAGE: bash
CODE:
```
pnpm run dev
```

----------------------------------------

TITLE: Install VoltAgent Supabase Provider Packages
DESCRIPTION: Install the necessary npm packages for integrating VoltAgent with Supabase. This includes the VoltAgent Supabase provider and the official Supabase JavaScript client.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/supabase/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/supabase @supabase/supabase-js
```

LANGUAGE: bash
CODE:
```
yarn add @voltagent/supabase @supabase/supabase-js
```

LANGUAGE: bash
CODE:
```
pnpm add @voltagent/supabase @supabase/supabase-js
```

----------------------------------------

TITLE: Defining VoltAgent Agents with Instructions Field (TypeScript)
DESCRIPTION: This snippet demonstrates the updated method for defining `Agent` instances, now using the `instructions` field instead of `description`. The `instructions` field provides behavioral guidance to the agent or LLM, aligning with preferred API usage and preparing for the eventual deprecation of `description` for `Agent` class definitions.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
const agent = new Agent({
  name: "My Assistant",
  instructions: "A helpful assistant.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});
```

----------------------------------------

TITLE: Streaming Text via Core API (cURL with Options)
DESCRIPTION: Shows how to stream text generation from an agent using the `/agents/{id}/stream` endpoint, including the `options` object for context (`userId`, `conversationId`). Notes that the SSE connection remains open.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/api/overview.md#_snippet_5

LANGUAGE: bash
CODE:
```
# Note: SSE streams are continuous. This command will keep the connection open.
curl -N -X POST http://localhost:3141/agents/your-agent-id/stream \
     -H "Content-Type: application/json" \
     -d '{ "input": "Tell me a joke!", "options": { "userId": "user-123", "conversationId": "your-unique-conversation-id" } }'
```

----------------------------------------

TITLE: Integrating ElevenLabs Voice Capabilities with VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to integrate voice capabilities into a VoltAgent agent using the ElevenLabsVoiceProvider. It shows how to configure the voice provider with an API key and desired voice, then attach it to an agent. After generating a text response, the agent's voice provider can be used to convert the text into an audio stream, enabling speech output.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_16

LANGUAGE: typescript
CODE:
```
import { ElevenLabsVoiceProvider } from "@voltagent/voice";

const voiceProvider = new ElevenLabsVoiceProvider({
  apiKey: process.env.ELEVENLABS_API_KEY,
  voice: "Rachel",
});

const agent = new Agent({
  name: "Voice Assistant",
  instructions: "A helpful voice assistant",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  voice: voiceProvider,
});

// Generate text response
const response = await agent.generateText("Tell me a short story");

// Convert to voice
if (agent.voice && response.text) {
  const audioStream = await agent.voice.speak(response.text);
  // Save audioStream to file or play it
}
```

----------------------------------------

TITLE: Initializing OpenAI Voice Provider
DESCRIPTION: This code demonstrates how to create an instance of `OpenAIVoiceProvider`. It requires an OpenAI API key, specifies the text-to-speech model (e.g., 'tts-1'), and allows selection of a specific voice for synthesis. This provider can then be used for direct STT and TTS operations.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_14

LANGUAGE: TypeScript
CODE:
```
// Option 1: OpenAI Voice
const openaiVoice = new OpenAIVoiceProvider({
  apiKey: process.env.OPENAI_API_KEY,
  ttsModel: "tts-1", // Text-to-Speech model
  voice: "alloy" // Choose a voice (alloy, echo, fable, onyx, nova, shimmer)
});
```

----------------------------------------

TITLE: Configuring Retriever as Agent Tool in VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to instantiate a retriever (assuming 'MySimpleRetriever' exists) and configure it with a 'toolName' and 'toolDescription'. It then shows how to create a VoltAgent instance and add the retriever's '.tool' property to the agent's 'tools' array, making it available for the LLM to use.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/retriever.md#_snippet_2

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
// Assuming MySimpleRetriever is defined as above

// Create a retriever instance, providing toolName and toolDescription
// These are crucial for the LLM to understand when to use this tool
const retrieverAsTool = new MySimpleRetriever({
  // highlight-start
  toolName: "search_internal_docs",
  toolDescription:
    "Searches the internal knowledge base for specific information about VoltAgent features or concepts. Use this when the user asks about VoltAgent specifics.",
  // highlight-end
});

// Define a placeholder provider for the example
const provider = new VercelAIProvider();

// Create an agent and add the retriever as a tool
const agent = new Agent({
  name: "Selective Assistant",
  instructions: "A helpful assistant that can search internal docs when needed",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  // Add the retriever's tool interface to the tools array
  // highlight-next-line
  tools: [retrieverAsTool.tool],
});

// Example Usage:
// When generateText is called, the LLM decides if tool use is needed.
// If it calls "search_internal_docs", retrieverAsTool.retrieve() runs.
// The result is sent back to the LLM to formulate the final response.
// const response = await agent.streamText("What is RAG in VoltAgent?");
// The stream would show a tool_call for "search_internal_docs"
// followed by a tool_result, and then the final text.
```

----------------------------------------

TITLE: Using Operation Context (`userContext`) in VoltAgent Hooks and Tools (TypeScript)
DESCRIPTION: This snippet demonstrates how to leverage `userContext` to pass custom, request-specific data throughout an agent's execution flow. It shows setting a `requestId` in an `onStart` hook, retrieving it in an `onEnd` hook, and accessing it within a custom tool's execution context, ensuring data isolation for each operation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_8

LANGUAGE: TypeScript
CODE:
```
import {
  Agent,
  createHooks,
  createTool,
  type OperationContext,
  type ToolExecutionContext,
} from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
import { z } from "zod";

const hooks = createHooks({
  onStart: async (agent: Agent<any>, context: OperationContext) => {
    const requestId = `req-${Date.now()}`;
    context.userContext.set("requestId", requestId); // Set data in context
    console.log(`[${agent.name}] Operation started. RequestID: ${requestId}`);
  },
  onEnd: async (agent: Agent<any>, result: any, context: OperationContext) => {
    const requestId = context.userContext.get("requestId"); // Get data from context
    console.log(`[${agent.name}] Operation finished. RequestID: ${requestId}`);
  },
});

const loggerTool = createTool({
  name: "context_aware_logger",
  description: "Logs a message using the request ID from context.",
  parameters: z.object({ message: z.string() }),
  execute: async (params: { message: string }, options?: ToolExecutionContext) => {
    const requestId = options?.operationContext?.userContext?.get("requestId") || "unknown";
    const logMessage = `[ReqID: ${requestId}] Tool Log: ${params.message}`;
    console.log(logMessage);
    return `Logged: ${params.message}`;
  },
});

const agent = new Agent({
  name: "Context Agent",
  instructions: "Uses userContext.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  hooks: hooks,
  tools: [loggerTool],
});

await agent.generateText("Log this message: 'Processing user data.'");
// The requestId set in onStart will be available in loggerTool and onEnd.
```

----------------------------------------

TITLE: Using `userContext` for Custom Data in VoltAgent Operations (TypeScript)
DESCRIPTION: This snippet demonstrates how to leverage `userContext` within `OperationContext` to pass custom, operation-specific data (like `requestId` and `traceId`) across agent lifecycle hooks (`onStart`, `onEnd`) and tool executions. It shows how to set data in `onStart`, retrieve it in `onEnd`, and access it within a `createTool`'s `execute` method, ensuring context isolation per operation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_5

LANGUAGE: typescript
CODE:
```
import {
  Agent,
  createHooks,
  createTool,
  type OperationContext,
  type ToolExecutionContext
} from "@voltagent/core";
import { z } from "zod";

// Define hooks that set and retrieve data
const hooks = createHooks({
  onStart: (agent: Agent<any>, context: OperationContext) => {
    // Set data needed throughout the operation and potentially by tools
    const requestId = `req-${Date.now()}`;
    const traceId = `trace-${Math.random().toString(16).substring(2, 8)}`;
    context.userContext.set("requestId", requestId);
    context.userContext.set("traceId", traceId);
    console.log(
      `[${agent.name}] Operation started. RequestID: ${requestId}, TraceID: ${traceId}`
    );
  },
  onEnd: (agent: Agent<any>, result: any, context: OperationContext) => {
    // Retrieve data at the end of the operation
    const requestId = context.userContext.get("requestId");
    const traceId = context.userContext.get("traceId"); // Can retrieve traceId here too
    console.log(
      `[${agent.name}] Operation finished. RequestID: ${requestId}, TraceID: ${traceId}`
    );
    // Use these IDs for logging, metrics, cleanup, etc.
  }
});

// Define a tool that uses the context data set in onStart
const customContextTool = createTool({
  name: "custom_context_logger",
  description: "Logs a message using trace ID from the user context.",
  parameters: z.object({
    message: z.string().describe("The message to log.")
  }),
  execute: async (params: { message: string }, options?: ToolExecutionContext) => {
    // Access userContext via options.operationContext
    const traceId = options?.operationContext?.userContext?.get("traceId") || "unknown-trace";
    const requestId =
      options?.operationContext?.userContext?.get("requestId") || "unknown-request"; // Can access requestId too
    const logMessage = `[RequestID: ${requestId}, TraceID: ${traceId}] Tool Log: ${params.message}`;
    console.log(logMessage);
    // In a real scenario, you might interact with external systems using these IDs
    return `Logged message with RequestID: ${requestId} and TraceID: ${traceId}`;
  }
});

// Create an agent with the tool and hooks
const agent = new Agent({
  name: "MyCombinedAgent",
  llm: myLlmProvider, // Your LLM provider instance
  model: myModel, // Your model instance
  tools: [customContextTool],
  hooks: hooks
});

// Trigger the agent. The LLM might decide to use the tool.
await agent.generateText(
  "Log the following information using the custom logger: 'User feedback received.'"
);

// Console output will show logs from onStart, the tool (if called), and onEnd,
// demonstrating context data flow.
```

----------------------------------------

TITLE: Send Multi-modal Input with XsAIProvider
DESCRIPTION: Shows how to structure messages for multi-modal input using the XsAIProvider, including both text and image parts in the content array.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_8

LANGUAGE: typescript
CODE:
```
// Example: Sending multi-modal input
const messages = [
  {
    role: "user",
    content: [
      { type: "text", text: "Describe this image:" },
      { type: "image", image: "data:image/png;base64,..." },
    ],
  },
];

const response = await agent.generateText(messages);
```

----------------------------------------

TITLE: Adding MCP Tools at Agent Request Time (TypeScript)
DESCRIPTION: Demonstrates how to provide fetched MCP tools dynamically for a single agent interaction by passing them via the `tools` option in methods like `generateText` or `streamText`. This allows for fine-grained control over which tools are available for a specific request, potentially overriding default tools.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/mcp.md#_snippet_6

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
// Assume agent is initialized without MCP tools, and mcpConfig is configured

const agent = new Agent({
  /* ... basic config ... */
});
const allTools = await mcpConfig.getTools();

// Provide MCP tools only for this specific request
// const response = await agent.generateText("What are the top posts on r/programming?", {
//   userId: "user123",
//   tools: allTools, // Add MCP tools at request time
// });

// Remember to disconnect mcpConfig eventually
// await mcpConfig.disconnect();

```

----------------------------------------

TITLE: Installing Dependencies with Yarn
DESCRIPTION: This command installs all necessary project dependencies using Yarn. It should be run once after cloning the repository to set up the development environment.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/README.md#_snippet_0

LANGUAGE: Shell
CODE:
```
$ yarn
```

----------------------------------------

TITLE: Install Project Dependencies (Bash)
DESCRIPTION: Installs the necessary Node.js packages listed in the project's package.json using npm, yarn, or pnpm.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-25-what-is-an-mcp-server/index.md#_snippet_5

LANGUAGE: bash
CODE:
```
npm install
```

LANGUAGE: bash
CODE:
```
yarn install
```

LANGUAGE: bash
CODE:
```
pnpm install
```

----------------------------------------

TITLE: Configure Supervisor Agent with Handoff Hook (TypeScript)
DESCRIPTION: Demonstrates how to add an `onHandoff` hook to a supervisor agent's configuration. This hook is triggered just before a task is handed off to a subagent, allowing for custom actions like logging, validation, or notification based on the `targetAgent` and `sourceAgent` (the supervisor).
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/subagents.md#_snippet_4

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Create a supervisor agent with hooks for monitoring subagent interactions
const supervisorAgent = new Agent({
  name: "Supervisor Agent",
  instructions: "You manage a workflow between specialized agents.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  subAgents: [storyAgent, translatorAgent],
  hooks: {
    onHandoff: async (targetAgent, sourceAgent) => {
      // 'sourceAgent' is the supervisor, 'targetAgent' is the subagent receiving the task
      console.log(`Task being handed off from ${sourceAgent.name} to ${targetAgent.name}`);
      // --- Use Cases ---
      // 1. Logging: Log detailed information about the handoff for debugging/monitoring.
      // 2. Validation: Check if the handoff is appropriate based on agent capabilities or context.
      // 3. Context Modification: Potentially modify the context being passed (though direct modification isn't standard, you could trigger external updates).
      // 4. Notification: Send notifications about task delegation.
    },
  },
});
```

----------------------------------------

TITLE: Configure XsAIProvider for Groq
DESCRIPTION: Shows how to configure the XsAIProvider to connect to a different OpenAI-compatible endpoint, specifically Groq, by providing a custom baseURL.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_4

LANGUAGE: typescript
CODE:
```
import { XsAIProvider } from "@voltagent/xsai";

// Example connecting to a different OpenAI-compatible endpoint (like Groq)
const groqProvider = new XsAIProvider({
  apiKey: process.env.GROQ_API_KEY!, // Assumes GROQ_API_KEY is set
  baseURL: "https://api.groq.com/openai/v1/", // Groq's OpenAI-compatible endpoint
});
```

----------------------------------------

TITLE: Integrating Langfuse Exporter with VoltAgent - TypeScript
DESCRIPTION: This TypeScript code demonstrates how to import and configure the `LangfuseExporter` and then pass its instance to the `VoltAgent` constructor for telemetry. It requires Langfuse API keys, typically provided via environment variables, and an initialized `Agent` instance.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/langfuse-exporter/README.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { Agent, VoltAgent } from "@voltagent/core";
import { LangfuseExporter } from "@voltagent/langfuse-exporter";
// ... other necessary imports

// Configure the exporter (use environment variables for keys)
const langfuseExporter = new LangfuseExporter({
  publicKey: process.env.LANGFUSE_PUBLIC_KEY, // Your Langfuse Public Key
  secretKey: process.env.LANGFUSE_SECRET_KEY, // Your Langfuse Secret Key
  baseUrl: process.env.LANGFUSE_BASE_URL, // Optional: Defaults to Langfuse Cloud URL
  // debug: true, // Optional: Enable detailed logging from the exporter
});

// Define your agent(s)
const myAgent = new Agent({
  name: "My Assistant",
  // ... other agent options (llm, model, tools, etc.)
});

// Initialize VoltAgent with the exporter
new VoltAgent({
  agents: {
    myAgent, // Register your agent(s)
  },
  telemetryExporter: langfuseExporter, // Pass the exporter instance
});
```

----------------------------------------

TITLE: Creating a new VoltAgent project with CLI
DESCRIPTION: Uses the `create-voltagent-app` CLI tool to initialize a new VoltAgent project directory named `github-repo-analyzer`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-21-first-ai-agent-github-repo-analyzer/index.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest github-repo-analyzer
```

----------------------------------------

TITLE: Creating a new VoltAgent project
DESCRIPTION: Use the `create-voltagent-app` CLI tool to quickly scaffold a new VoltAgent project with the latest version.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/supabase/README.md#_snippet_3

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest
```

----------------------------------------

TITLE: Running VoltAgent in Development with npm
DESCRIPTION: This command starts the VoltAgent server in development mode using `npm`. It executes the `dev` script defined in `package.json`, which typically uses `tsx watch` for automatic restarts on code changes.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_14

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Override Groq Generation Parameters (TypeScript)
DESCRIPTION: Demonstrates how to override default or agent-level Groq generation parameters like temperature and maxTokens for a specific API call by passing them within the 'provider' key of the options object.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/groq-ai.md#_snippet_5

LANGUAGE: typescript
CODE:
```
// Example: Overriding temperature and max_tokens for a specific call
const response = await agent.generateText("Write a short story about a futuristic city.", {
  provider: {
    temperature: 0.8,
    maxTokens: 500,
    // Other Groq-specific parameters (max_tokens, top_p, etc.)
  }
});
```

----------------------------------------

TITLE: Streaming Text via Core API (Basic cURL)
DESCRIPTION: Demonstrates how to initiate a Server-Sent Events (SSE) stream for text generation from an agent using the `/agents/{id}/stream` endpoint with a basic input. Notes that the connection remains open.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/api/overview.md#_snippet_4

LANGUAGE: bash
CODE:
```
# Note: SSE streams are continuous. This command will keep the connection open.
curl -N -X POST http://localhost:3141/agents/your-agent-id/stream \
     -H "Content-Type: application/json" \
     -d '{ "input": "Tell me a joke!" }'
```

----------------------------------------

TITLE: Handling Voice Provider Events - TypeScript
DESCRIPTION: Shows how to attach event listeners (`speaking`, `listening`, `error`) to a voice provider instance using the `.on()` method. It demonstrates logging information when these events occur and includes commented-out examples of actions that would trigger these events.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_6

LANGUAGE: typescript
CODE:
```
// Using the initialized openAIVoice instance

// Listen for the start of speech synthesis
openAIVoice.on("speaking", (data) => {
  console.log(`[Speaking Started] Text: "${data.text}"`);
});

// Listen for the start of transcription
openAIVoice.on("listening", (data) => {
  // data might contain information about the audio stream
  console.log("[Listening Started]");
});

// Handle errors
openAIVoice.on("error", (errorData) => {
  console.error(
    `[Voice Error] Code: ${errorData.code}, Message: ${errorData.message}`,
    errorData.details
  );
});

// Trigger an action that emits events
try {
  await openAIVoice.speak("Testing event listeners.");
  // const audioInput = createReadStream("input.mp3");
  // await openAIVoice.listen(audioInput);
} catch (error) {
  // Errors caught here might also be emitted via the 'error' event
  console.error("Direct action failed:", error);
}
```

----------------------------------------

TITLE: Update Agent Definition Field in JavaScript
DESCRIPTION: This snippet illustrates the change in defining an Agent instance, moving from the 'description' field to the preferred 'instructions' field to align with API updates and provide behavioral guidance to the agent/LLM.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/create-voltagent-app/CHANGELOG.md#_snippet_0

LANGUAGE: JavaScript
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Defining and Using VoltAgent Hooks with createHooks in TypeScript
DESCRIPTION: This snippet demonstrates how to define a collection of asynchronous hooks using the `createHooks` helper function and then assign them to a VoltAgent instance during initialization. It includes examples for `onStart`, `onEnd`, `onToolStart`, `onToolEnd`, and `onHandoff` hooks, showing how to access event arguments like agent details, context, output, and errors.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/hooks.md#_snippet_0

LANGUAGE: typescript
CODE:
```
import {
  Agent,
  createHooks,
  type AgentTool,
  type AgentOperationOutput, // Unified success output type
  type VoltAgentError, // Standardized error type
  type OnStartHookArgs, // Argument types for hooks
  type OnEndHookArgs,
  type OnToolStartHookArgs,
  type OnToolEndHookArgs,
  type OnHandoffHookArgs,
} from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Define a collection of hooks using the helper
const myAgentHooks = createHooks({
  /**
   * Called before the agent starts processing a request.
   */
  onStart: async (args: OnStartHookArgs) => {
    const { agent, context } = args;
    console.log(`[Hook] Agent ${agent.name} starting interaction at ${new Date().toISOString()}`);
    console.log(`[Hook] Operation ID: ${context.operationId}`);
  },

  /**
   * Called after the agent finishes processing a request, successfully or with an error.
   */
  onEnd: async (args: OnEndHookArgs) => {
    const { agent, output, error, context } = args;
    if (error) {
      console.error(`[Hook] Agent ${agent.name} finished with error:`, error.message);
      // Log detailed error info
      console.error(`[Hook] Error Details:`, JSON.stringify(error, null, 2));
    } else if (output) {
      console.log(`[Hook] Agent ${agent.name} finished successfully.`);
      // Example: Log usage or analyze the result based on output type
      if ("usage" in output && output.usage) {
        console.log(`[Hook] Token Usage: ${output.usage.totalTokens}`);
      }
      if ("text" in output && output.text) {
        console.log(`[Hook] Final text length: ${output.text.length}`);
      }
      if ("object" in output && output.object) {
        console.log(`[Hook] Final object keys: ${Object.keys(output.object).join(", ")}`);
      }
    }
  },

  /**
   * Called just before a tool's execute function is called.
   */
  onToolStart: async (args: OnToolStartHookArgs) => {
    const { agent, tool, context } = args;
    console.log(`[Hook] Agent ${agent.name} starting tool: ${tool.name}`);
    // Example: Validate tool inputs or log intent
  },

  /**
   * Called after a tool's execute function completes or throws.
   */
  onToolEnd: async (args: OnToolEndHookArgs) => {
    const { agent, tool, output, error, context } = args;
    if (error) {
      console.error(`[Hook] Tool ${tool.name} failed with error:`, error.message);
      // Log detailed tool error
      console.error(`[Hook] Tool Error Details:`, JSON.stringify(error, null, 2));
    } else {
      console.log(`[Hook] Tool ${tool.name} completed successfully with result:`, output);
      // Example: Log tool output or trigger follow-up actions
    }
  },

  /**
   * Called when a task is handed off from a source agent to this agent (in sub-agent scenarios).
   */
  onHandoff: async (args: OnHandoffHookArgs) => {
    const { agent, sourceAgent } = args;
    console.log(`[Hook] Task handed off from ${sourceAgent.name} to ${agent.name}`);
    // Example: Track collaboration flow in multi-agent systems
  }
});

// Define a placeholder provider for the example
const provider = new VercelAIProvider();

// Assign the hooks when creating an agent
const agentWithHooks = new Agent({
  name: "My Agent with Hooks",
  instructions: "An assistant demonstrating hooks",
  llm: provider,
  model: openai("gpt-4o"),
  // Pass the hooks object during initialization
  hooks: myAgentHooks
});

// Alternatively, define hooks inline (less reusable)
const agentWithInlineHooks = new Agent({
  name: "Inline Hooks Agent",
  instructions: "Another assistant",
  llm: provider,
  model: openai("gpt-4o"),
  hooks: {
    onStart: async ({ agent, context }) => {
      // Use object destructuring
      /* ... */
    },
    onEnd: async ({ agent, output, error, context }) => {
      /* ... */
    },
    // ... other inline hooks ...
  }
});
```

----------------------------------------

TITLE: Passing Provider Options to generateText (TypeScript)
DESCRIPTION: Demonstrates how to pass provider-specific configuration options, such as `temperature` and `max_tokens`, to the `generateText` method using the `provider` key in the options object. These options are compatible with the OpenAI API specification.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_9

LANGUAGE: typescript
CODE:
```
const response = await agent.generateText("Tell me a joke.", {
  provider: {
    temperature: 0.9,
    max_tokens: 100,
    // Other OpenAI-compatible parameters
  },
});
```

----------------------------------------

TITLE: Configuring Groq AI Provider (TypeScript)
DESCRIPTION: Demonstrates two methods for configuring the `GroqProvider`: providing the API key directly during instantiation or relying on the `GROQ_API_KEY` environment variable. Requires importing `GroqProvider` from the package.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/groq-ai.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { GroqProvider } from "@voltagent/groq-ai";

// Option 1: Direct API Key
const groqProviderDirect = new GroqProvider({
  apiKey: "YOUR_GROQ_API_KEY",
});

// Option 2: Environment Variable (GROQ_API_KEY)
// Ensure process.env.GROQ_API_KEY is set
const groqProviderEnv = new GroqProvider();
```

----------------------------------------

TITLE: Creating a New VoltAgent Project (Bash)
DESCRIPTION: This command sequence initializes a new VoltAgent project using the latest version of the `voltagent-app` npm package and then navigates into the newly created project directory. It's the essential first step for setting up a multi-agent system with VoltAgent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-23-multi-agent-llm/index.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest my-multi-agent-project
cd my-multi-agent-project
```

----------------------------------------

TITLE: Configuring GoogleGenAIProvider with Vertex AI
DESCRIPTION: This example shows how to configure the `GoogleGenAIProvider` for use with Google Cloud's Vertex AI, requiring a project ID, location, and the `vertexai: true` flag. Ensure your environment is authenticated via `gcloud`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/google-ai.md#_snippet_2

LANGUAGE: typescript
CODE:
```
import { GoogleGenAIProvider } from "@voltagent/google-ai";

const googleProviderVertex = new GoogleGenAIProvider({
  vertexai: true, // Required for Vertex AI
  project: "YOUR_GCP_PROJECT_ID",
  location: "YOUR_GCP_LOCATION" // e.g., 'us-central1'
});
```

----------------------------------------

TITLE: Initializing Agent Memory with LibSQLStorage (TSX)
DESCRIPTION: This snippet demonstrates how to configure an agent to remember conversations by integrating `LibSQLStorage` as its memory component. It shows the import of `LibSQLStorage` from `@voltagent/core` and its instantiation, which is then passed to the `Agent` constructor's `memory` property. This setup enables the agent to store and retrieve past conversations, providing consistency and personalization.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-26-llm-agents/index.md#_snippet_3

LANGUAGE: tsx
CODE:
```
import { LibSQLStorage } from "@voltagent/core";

const memoryStorage = new LibSQLStorage({
  // configuration
});

const agent = new Agent({
  // ... other config
  memory: memoryStorage,
});
```

----------------------------------------

TITLE: Configuring OpenAI API Key in .env
DESCRIPTION: This snippet shows how to add your OpenAI API key to a `.env` file. This environment variable is crucial for the `openai` model to authenticate and function correctly with the OpenAI API.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_12

LANGUAGE: bash
CODE:
```
# Make sure to replace 'your_openai_api_key' with your actual key
OPENAI_API_KEY=your_openai_api_key
```

----------------------------------------

TITLE: Updating Agent Definition with Instructions Field (JavaScript)
DESCRIPTION: This snippet illustrates the updated method for defining an `Agent` instance, where the `description` field is replaced by `instructions`. The `instructions` field is now the recommended way to provide behavioral guidance to the agent, aligning with the preferred API usage and anticipating the deprecation of `description` for `Agent` class definitions.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/groq-ai/CHANGELOG.md#_snippet_0

LANGUAGE: javascript
CODE:
```
const agent = new Agent({
  name: "My Assistant",
  instructions: "A helpful assistant.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});
```

----------------------------------------

TITLE: Configuring LibSQLStorage for VoltAgent Memory (TypeScript)
DESCRIPTION: This snippet demonstrates how to import and initialize the LibSQLStorage provider from @voltagent/core. It shows how to configure the connection URL (supporting local files or remote LibSQL/Turso instances), optional authentication token, table prefix, storage limit, and debug mode. The configured storage instance is then passed to the VoltAgent constructor.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/libsql.md#_snippet_0

LANGUAGE: typescript
CODE:
```
import { Agent, LibSQLStorage } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// Configure LibSQLStorage
const memoryStorage = new LibSQLStorage({
  // Required: Connection URL
  url: process.env.DATABASE_URL || "file:./voltagent-memory.db", // Example: Env var for Turso, fallback to local file

  // Required for Turso / Remote sqld (if not using TLS or auth is needed)
  authToken: process.env.DATABASE_AUTH_TOKEN,

  // Optional: Prefix for database table names
  tablePrefix: "my_agent_memory", // Defaults to 'voltagent_memory'

  // Optional: Storage limit (max number of messages per user/conversation)
  // storageLimit: 100, // Defaults to 100

  // Optional: Enable debug logging for the storage provider
  // debug: true, // Defaults to false
});

const agent = new Agent({
  name: "LibSQL Memory Agent",
  instructions: "An agent using LibSQL for memory.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  memory: memoryStorage,
});
```

----------------------------------------

TITLE: Initializing MCPConfiguration with Multiple Server Types (TypeScript)
DESCRIPTION: Demonstrates how to create an `MCPConfiguration` instance, providing an optional ID and a `servers` object to define connections. It shows examples for configuring an `http` server (like a web service) and a `stdio` server (like a local script), including necessary parameters like URL, command, arguments, and optional settings for requests and event sources.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/mcp.md#_snippet_0

LANGUAGE: ts
CODE:
```
import { MCPConfiguration } from "@voltagent/core";
import path from "node:path"; // Used for filesystem path example

// Create MCP Configuration with multiple types of servers
const mcpConfig = new MCPConfiguration({
  // Optional unique identifier for this configuration instance
  id: "my-mcp-config",

  servers: {
    // Example 1: HTTP-based server (e.g., external web service or API gateway)
    reddit: {
      type: "http",
      url: "https://mcp.composio.dev/reddit/your-api-key-here", // URL of the MCP endpoint
      // Optional: Custom headers or options for the initial fetch request
      requestInit: {
        headers: { "Custom-Header": "value" }
      },
      // Optional: Custom options for the EventSource connection used for streaming
      eventSourceInit: { withCredentials: true }
    },

    // Example 2: stdio-based server (e.g., a local script or application)
    filesystem: {
      type: "stdio", // Connects via standard input/output
      command: "npx", // The command to execute
      args: [
        // Arguments for the command
        "-y",
        "@modelcontextprotocol/server-filesystem", // Example: A filesystem server package
        // Optional arguments for the server itself, like specifying allowed paths:
        path.join(process.env.HOME || "", "Desktop")
      ],
      // Optional: Specify the working directory for the command
      cwd: process.env.HOME,
      // Optional: Provide environment variables to the spawned process
      env: { NODE_ENV: "production" }
    }
  }
});
```

----------------------------------------

TITLE: Calling Agent with AbortSignal and Timeout (TypeScript)
DESCRIPTION: Shows how to pass an `AbortSignal` to an agent's `generateText` or `streamText` methods via the options object. The agent is designed to propagate this signal to any tools it uses, allowing cancellation of the entire operation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_10

LANGUAGE: TypeScript
CODE:
```
// Create an AbortController
const controller = new AbortController();
const signal = controller.signal;

// Set a timeout to abort after 30 seconds
setTimeout(() => controller.abort(), 30000);

try {
  // Pass the signal to the agent
  const response = await agent.generateText("Search for the latest AI developments", {
    signal, // The agent will pass this signal to any tools it uses
  });
  console.log(response.text);
} catch (error) {
  if (error.name === "AbortError") {
    console.log("Operation was cancelled");
  } else {
    console.error("Error:", error);
  }
}
```

----------------------------------------

TITLE: Initialize SupabaseMemory and Integrate with Agent (TypeScript)
DESCRIPTION: This TypeScript code demonstrates how to import the SupabaseMemory class, retrieve Supabase URL and key from environment variables, initialize a SupabaseMemory instance with these credentials, and then pass this memory instance to a VoltAgent Agent configuration. It includes basic error handling for missing environment variables and shows the optional tableName parameter.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/supabase/README.md#_snippet_2

LANGUAGE: typescript
CODE:
```
import { SupabaseMemory } from "@voltagent/supabase";
import { Agent } from "@voltagent/core";
// ... other imports

const supabaseUrl = process.env.SUPABASE_URL; // Use environment variables
const supabaseKey = process.env.SUPABASE_KEY;

if (!supabaseUrl || !supabaseKey) {
  throw new Error("Supabase URL and Key are required.");
}

const memory = new SupabaseMemory({
  supabaseUrl,
  supabaseKey,
  // Optional: Specify a custom base table name prefix
  // tableName: 'my_custom_prefix'
});

// Pass the memory instance to your Agent
const agent = new Agent({
  name: "my-agent",
  instructions: "A helpful assistant that answers questions without using tools",
  // ... other agent config
  memory: memory,
});

// ... rest of your VoltAgent setup
```

----------------------------------------

TITLE: Streaming Text with VoltAgent and Google AI (TypeScript)
DESCRIPTION: This example illustrates how to set up an agent for streaming text responses using `agent.streamText`. It shows iterating over the `textStream` to process chunks as they arrive and notes about usage information availability.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/google-ai.md#_snippet_6

LANGUAGE: typescript
CODE:
```
import { Agent } from '@voltagent/core';
import { GoogleGenAIProvider } from '@voltagent/google-ai';

async function main() {
  const googleProvider = new GoogleGenAIProvider({
    apiKey: process.env.GEMINI_API_KEY
  });

  const agent = new Agent({
    name: 'Google Streaming Agent',
    instructions: 'Streams text using Google AI',
    llm: googleProvider,
    model: 'gemini-1.5-flash'
  });

  const prompt = "Write a short poem about the evolution of AI.";

  try {
    const streamResponse = await agent.streamText(prompt);

    console.log(`Streaming agent response to "${prompt}":`);
    for await (const chunk of streamResponse.textStream) {
      process.stdout.write(chunk);
    }
    console.log('\n--- Stream Finished ---');
    // Note: Usage info might not be available until the stream completes
    // and is accessed via callbacks (onFinish, onStepFinish) or potentially
    // attached to the stream result object in future updates.
  } catch (error) {
    console.error("Error streaming text:", error);
  }
}

main();
```

----------------------------------------

TITLE: Streaming Text with Voltagent (TypeScript)
DESCRIPTION: Demonstrates how to stream text responses from the agent. It initializes an `Agent` and calls `streamText` with a prompt. It then iterates over the `textStream` using a `for await...of` loop, printing each chunk to the console as it arrives.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_11

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { XsAIProvider } from "@voltagent/xsai";

async function main() {
  const provider = new XsAIProvider({ apiKey: process.env.OPENAI_API_KEY! });

  const agent = new Agent({
    name: "xsAI Streaming Agent",
    instructions: "Streams text using an OpenAI-compatible API",
    llm: provider,
    model: "gpt-4o-mini",
  });

  const prompt = "Write a short paragraph about the future of AI.";

  try {
    const streamResponse = await agent.streamText(prompt);

    console.log(`Streaming agent response to "${prompt}":`);
    for await (const chunk of streamResponse.textStream) {
      process.stdout.write(chunk);
    }
    console.log("\n--- Stream Finished ---");
    // Usage and finish reason might be available via callbacks
  } catch (error) {
    console.error("Error streaming text:", error);
  }
}

main();
```

----------------------------------------

TITLE: VoltAgent Server Startup Message (Console Output)
DESCRIPTION: This snippet shows the expected console output upon successful startup of the VoltAgent development server. It confirms the server is running, provides the local HTTP server address, and a link to the VoltAgent Developer Console for interaction and debugging.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/langfuse-exporter/README.md#_snippet_5

LANGUAGE: text
CODE:
```
══════════════════════════════════════════════════
VOLTAGENT SERVER STARTED SUCCESSFULLY
══════════════════════════════════════════════════
✓ HTTP Server: http://localhost:3141

Developer Console: https://console.voltagent.dev
══════════════════════════════════════════════════
```

----------------------------------------

TITLE: Disconnecting All MCP Clients (TypeScript)
DESCRIPTION: Illustrates the crucial step of calling `disconnect()` on the `mcpConfig` instance. This action properly terminates all managed MCP client connections and associated child processes (especially important for stdio servers), preventing resource leaks.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/mcp.md#_snippet_4

LANGUAGE: typescript
CODE:
```
// Disconnect all clients managed by this configuration
await mcpConfig.disconnect();
console.log("MCP clients disconnected.");

```

----------------------------------------

TITLE: Configuring TypeScript for VoltAgent Project
DESCRIPTION: This JSON snippet defines the `tsconfig.json` file, which configures the TypeScript compiler for the VoltAgent project. It specifies target ECMAScript version, module system, output directory, strict type checking, and inclusion of source files.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_5

LANGUAGE: json
CODE:
```
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "esModuleInterop": true,
    "outDir": "dist",
    "strict": true
  },
  "include": ["src"]
}
```

----------------------------------------

TITLE: Creating VoltAgent Project with Tools Example (Bash)
DESCRIPTION: This command initializes a new VoltAgent application project. It uses the `@latest` version of the `voltagent-app` creation tool and specifies the `--example with-tools` flag to include a pre-built example showcasing agent creation with tools. Requires Node.js and npm/yarn/pnpm installed.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-tools/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-tools
```

----------------------------------------

TITLE: Defining a File Content Part in VoltAgent
DESCRIPTION: This snippet illustrates the structure for a 'file' content part, typically used for non-LLM direct inputs but supported. It requires `type: 'file'`, `data` for Base64 encoded file content, `filename`, `mimeType`, and an optional `size`. This part enables sending arbitrary file data.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/multi-modal.md#_snippet_3

LANGUAGE: TypeScript
CODE:
```
{
  type: 'file',
  data: 'JVBERi0xLjQKJ...',
  filename: 'report.pdf',
  mimeType: 'application/pdf',
  size: 102400
}
```

----------------------------------------

TITLE: Defining a Toolkit Structure (TypeScript)
DESCRIPTION: Illustrates the structure for defining a `Toolkit` using `createToolkit`. It includes properties for name, description, optional instructions for the LLM, a flag to add instructions to the system prompt, and an array to hold individual tool definitions.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/tools/overview.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
import { createTool, createToolkit, type Tool, type Toolkit } from "@voltagent/core";

const myCalculatorToolkit = createToolkit({
  name: "calculator_toolkit",
  description: "Tools for performing basic arithmetic operations.",
  // Optional instructions for the LLM
  instructions: `Use these tools for calculations. Always use 'add' for addition, 'subtract' for subtraction.`,
  // Set to true to add the above instructions to the system prompt
  addInstructions: true,
  tools: [
    createTool({
      /* ... definition for 'add' tool ... */
    }),
    createTool({
      /* ... definition for 'subtract' tool ... */
    }),
    // ... other calculator tools
  ]
});
```

----------------------------------------

TITLE: Mermaid Chart for ReAct Pattern Flow
DESCRIPTION: This Mermaid chart visualizes the ReAct (Reason + Act) pattern, illustrating the cyclical process an LLM agent follows from receiving a goal to providing a final answer. It shows the flow from reasoning, determining actions, executing tools, observing results, and iterating until the task is complete.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-19-llm-orchestration/index.md#_snippet_0

LANGUAGE: Mermaid
CODE:
```
graph LR
A[Start with Goal/Query] --> B{LLM: Reason}
B -- Thought --> C[Determine Action & Tool]
C --> D{Execute Action/Tool}
D -- Observation --> E[Get Result from Tool/Environment]
E --> B
B -- Final Answer --> F[End/Respond to User]

    style A fill:#131B23,stroke:#50C878,stroke-width:2px,color:#CCCCCC
    style B fill:#121E1B,stroke:#059669,stroke-width:3px,color:#FFFFFF
    style C fill:#0F1A15,stroke:#50C878,stroke-width:2px,color:#CCCCCC
    style D fill:#0F1A15,stroke:#50C878,stroke-width:2px,color:#CCCCCC
    style E fill:#131B23,stroke:#50C878,stroke-width:1px,color:#AAAAAA
    style F fill:#0F1A15,stroke:#50C878,stroke-width:2px,color:#50C878
```

----------------------------------------

TITLE: Creating New VoltAgent Project with CLI (Bash)
DESCRIPTION: This command initializes a new VoltAgent project using the `create-voltagent-app` CLI tool. It guides the user through the setup process, creating the necessary project structure and starter code.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/langfuse-exporter/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest
```

----------------------------------------

TITLE: Define Basic Prompt Template
DESCRIPTION: Defines a simple template string with placeholders for dynamic content using double curly braces, which are used by `createPrompt` to identify variables.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/utils/create-prompt.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
const template = "You are a helpful assistant that {{role}}. Task: {{task}}";
```

----------------------------------------

TITLE: Initializing LibSQL Storage for Agent Memory (TypeScript)
DESCRIPTION: This snippet imports 'LibSQLStorage' from '@voltagent/core' and initializes it with a local database file ('file:local.db'), setting up a persistent storage solution for the agent's memory.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_11

LANGUAGE: typescript
CODE:
```
import { LibSQLStorage } from "@voltagent/core";

const memoryStorage = new LibSQLStorage({
  url: "file:local.db"
});
```

----------------------------------------

TITLE: Configuring Next.js to Externalize VoltAgent Packages (TypeScript)
DESCRIPTION: This configuration in `next.config.mjs` marks VoltAgent packages as external for server components, preventing bundling issues and ensuring proper server-side execution within a Next.js application.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/integrations/nextjs.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  experimental: {
    // Mark VoltAgent packages as external
    serverComponentsExternalPackages: ["@voltagent/*"],
    // If using other packages that need to run externally (like npm-check-updates in the example)
    // add them here too.
    // serverComponentsExternalPackages: ["@voltagent/*", "another-package"],
  }
};

export default nextConfig;
```

----------------------------------------

TITLE: Send Multi-modal Input with Vercel AI Provider (TypeScript)
DESCRIPTION: Shows how to structure messages for multi-modal input (text and image) and pass them to the agent's generateText method when using the VercelProvider with a vision-capable model.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_5

LANGUAGE: typescript
CODE:
```
// Make sure to import the model definition (e.g., openai)
import { openai } from "@ai-sdk/openai";
// Example: Sending multi-modal input (requires Vercel AI SDK setup for a vision model)
const messages = [
  {
    role: "user",
    content: [
      { type: "text", text: "Describe this image:" },
      { type: "image", image: "data:image/png;base64,..." }
    ]
  }
];

// Ensure the model identifier matches a vision-capable model configured in Vercel AI SDK
const response = await agent.generateText(messages, { model: openai("gpt-4-vision-preview") });
```

----------------------------------------

TITLE: Generating Text via Core API (cURL with Options)
DESCRIPTION: Provides an example of generating text from an agent using the `/agents/{id}/text` endpoint, including the `options` object to pass context like `userId` and `conversationId`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/api/overview.md#_snippet_3

LANGUAGE: bash
CODE:
```
curl -X POST http://localhost:3141/agents/your-agent-id/text \
     -H "Content-Type: application/json" \
     -d '{ "input": "Tell me a joke!", "options": { "userId": "user-123", "conversationId": "your-unique-conversation-id" } }'
```

----------------------------------------

TITLE: Creating VoltAgent Project with Example - Bash
DESCRIPTION: Initializes a new VoltAgent project using the `npm create` command. It fetches the latest version of the `voltagent-app` package and sets up the project based on the `with-vercel-ai` example template, providing a ready-to-use structure for building agents integrated with Vercel AI features. Requires Node.js and npm installed.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-vercel-ai/README.md#_snippet_0

LANGUAGE: Bash
CODE:
```
npm create voltagent-app@latest -- --example with-vercel-ai
```

----------------------------------------

TITLE: Creating VoltAgent Project with Groq Example (Bash)
DESCRIPTION: This command uses `npm create` to initialize a new project based on the latest `@voltagent/app` package. It includes the `--example with-groq-ai` flag to clone and set up the project using the predefined example demonstrating integration with the Groq AI service. This is the recommended way to quickly start with a working example.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-groq-ai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-groq-ai
```

----------------------------------------

TITLE: Creating Toolkit Helper Function in TypeScript
DESCRIPTION: This TypeScript function, `createToolkit`, simplifies the instantiation of `Toolkit` objects. It validates the presence of a `name` and provides default values for optional properties like `description`, `addInstructions`, and `tools`, ensuring a consistent and valid `Toolkit` structure. It also warns if no tools are provided.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_9

LANGUAGE: TypeScript
CODE:
```
export const createToolkit = (options: Toolkit): Toolkit => {
  if (!options.name) {
    throw new Error("Toolkit name is required");
  }
  if (!options.tools || options.tools.length === 0) {
    console.warn(`Toolkit '${options.name}' created without any tools.`);
  }

  return {
    name: options.name,
    description: options.description || "", // Default empty description
    instructions: options.instructions,
    addInstructions: options.addInstructions || false, // Default to false
    tools: options.tools || [], // Default to empty array
  };
};
```

----------------------------------------

TITLE: Copy Example Environment File (Bash)
DESCRIPTION: Copies the provided `.env.example` file to create a new `.env` file. This is the first step in setting up environment variables required for the project, such as API keys or cloud credentials.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-vertex-ai/README.md#_snippet_1

LANGUAGE: bash
CODE:
```
cp .env.example .env
```

----------------------------------------

TITLE: Defining an Image Content Part in VoltAgent
DESCRIPTION: This snippet demonstrates the structure for an 'image' content part. It includes `type: 'image'`, an `image` field for Base64 or Data URI image data, an optional `mimeType` for correct interpretation, and an optional `alt` text for accessibility. This part allows agents to process visual inputs.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/multi-modal.md#_snippet_2

LANGUAGE: TypeScript
CODE:
```
{
  type: 'image',
  image: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUg...',
  mimeType: 'image/png',
  alt: 'A cute cat sleeping'
}
```

----------------------------------------

TITLE: Configuring API Keys Environment Variables
DESCRIPTION: This snippet shows the structure and required environment variables for the `server/.env` file. It details placeholders for the Composio API key, Google Drive Integration ID, and OpenAI API key, which are necessary for the server to authenticate with these services.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_7

LANGUAGE: env
CODE:
```
# Get your Composio API key from https://app.composio.dev/developers
COMPOSIO_API_KEY="your_composio_api_key"

# Get your Google Drive Integration ID from Composio (https://app.composio.dev/app/googledrive)
# You might need to add the Google Drive app in Composio first.
GOOGLE_INTEGRATION_ID="your_google_integration_id"

# Get your OpenAI API key from https://platform.openai.com/api-keys
OPENAI_API_KEY="your_openai_api_key"
```

----------------------------------------

TITLE: Handling Synchronous Errors with try...catch in VoltAgent
DESCRIPTION: This snippet demonstrates using a standard JavaScript `try...catch` block to handle synchronous errors that occur during the initial setup or call to VoltAgent methods like `agent.streamText()`. It catches errors before the streaming process begins, such as configuration issues or initial API connection failures, allowing for fallback logic or error logging.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_21

LANGUAGE: TypeScript
CODE:
```
const agent = new Agent({
  /* ... configuration ... */
});

try {
  // This try/catch handles errors during the initial call setup
  const response = await agent.streamText("Some complex request that might fail initially");

  // Processing the stream itself might encounter errors handled differently (see below)
  console.log("Stream processing started...");
  for await (const delta of response.stream) {
    // ... handle deltas ...
    process.stdout.write(delta.type === "text-delta" ? delta.textDelta : "");
  }
  // Note: If an error occurs *during* the stream, the loop might finish,
  // but the final history entry status will indicate an error.
  console.log("Interaction finished processing stream.");
} catch (error) {
  // Catches errors from the initial await agent.streamText() call
  console.error("Agent interaction failed during setup:", error);
  // Implement fallback logic, inform the user, or log the error
}
```

----------------------------------------

TITLE: Defining VoltAgent Hooks with Single Argument Object (Current)
DESCRIPTION: This snippet illustrates the updated signature for defining custom agent hooks in VoltAgent, where `onStart`, `onEnd`, `onToolStart`, and `onToolEnd` now accept a single argument object. This change improves readability and provides distinct `output` and `error` properties for clearer success/failure handling, requiring import of specific hook argument types.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_7

LANGUAGE: TypeScript
CODE:
```
import type {
  OnStartHookArgs,
  OnEndHookArgs,
  OnToolStartHookArgs,
  OnToolEndHookArgs,
  // ... other needed types
} from "@voltagent/core";

const myHooks = {
  onStart: async (args: OnStartHookArgs) => {
    const { agent, context } = args;
    /* ... */
  },
  onEnd: async (args: OnEndHookArgs) => {
    const { agent, output, error, context } = args;
    if (error) {
      // Handle error (error is VoltAgentError)
    } else if (output) {
      // Handle success (output is AgentOperationOutput)
    }
  },
  onToolStart: async (args: OnToolStartHookArgs) => {
    const { agent, tool, context } = args;
    /* ... */
  },
  onToolEnd: async (args: OnToolEndHookArgs) => {
    const { agent, tool, output, error, context } = args;
    if (error) {
      // Handle tool error (error is VoltAgentError)
    } else {
      // Handle tool success (output is the result)
    }
  },
  // ...
};
```

----------------------------------------

TITLE: Defining the Toolkit Type in TypeScript
DESCRIPTION: This TypeScript type defines the structure of a `Toolkit`, which bundles related tools. It includes properties for a unique `name`, an optional `description`, shared `instructions` for the LLM, a boolean `addInstructions` to control automatic instruction addition to the system prompt, and an array of `Tool` instances.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_8

LANGUAGE: TypeScript
CODE:
```
// packages/core/src/tool/toolkit.ts
export type Toolkit = {
  /**
   * Unique identifier name for the toolkit.
   */
  name: string;
  /**
   * A brief description of what the toolkit does. Optional.
   */
  description?: string;
  /**
   * Shared instructions for the LLM on how to use the tools within this toolkit.
   * Optional.
   */
  instructions?: string;
  /**
   * Whether to automatically add the toolkit's `instructions` to the agent's system prompt.
   * Defaults to false.
   */
  addInstructions?: boolean;
  /**
   * An array of Tool instances that belong to this toolkit.
   */
  tools: Tool<any>[];
};
```

----------------------------------------

TITLE: Listing Agents via Core API (cURL)
DESCRIPTION: Demonstrates how to retrieve a list of all agents currently registered with the AgentRegistry using a simple GET request to the `/agents` endpoint.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/api/overview.md#_snippet_1

LANGUAGE: bash
CODE:
```
curl http://localhost:3141/agents
```

----------------------------------------

TITLE: Generating Text via Core API (Basic cURL)
DESCRIPTION: Shows a basic example of sending a POST request to the `/agents/{id}/text` endpoint to generate a plain text response from a specified agent using a simple input prompt.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/api/overview.md#_snippet_2

LANGUAGE: bash
CODE:
```
curl -X POST http://localhost:3141/agents/your-agent-id/text \
     -H "Content-Type: application/json" \
     -d '{ "input": "Tell me a joke!" }'
```

----------------------------------------

TITLE: Initializing userContext by Passing Options (TypeScript)
DESCRIPTION: This snippet illustrates how `userContext` can be initialized by passing an `initialContext` map directly to the agent's generation method. The `onStart` hook then accesses this pre-populated data (like `traceId`) and can further modify the context, demonstrating external control over the initial state of `userContext`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/context.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
// Filename: agentOptionsContext.ts
import {
  Agent,
  createHooks,
  VercelAIProvider,
  type OnStartHookArgs,
  type OnEndHookArgs,
} from "@voltagent/core";
import { openai } from "@ai-sdk/openai";

// Agent receives userContext via generateText options
const agentReceivingContext = new Agent({
  name: "OptionsContextAgent",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  hooks: createHooks({
    onStart: ({ agent, context }: OnStartHookArgs) => {
      // Reads data passed in via options
      const externalTraceId = context.userContext.get("traceId");
      console.log(
        `[${agent.name}] HOOK: Operation started. Received traceId from options: ${externalTraceId}`
      );
      // Can also add more context if needed
      context.userContext.set("hookProcessed", true);
    },
    onEnd: ({ agent, context }: OnEndHookArgs) => {
      const externalTraceId = context.userContext.get("traceId");
      const processed = context.userContext.get("hookProcessed");
      console.log(
        `[${agent.name}] HOOK: Operation ended. TraceId: ${externalTraceId}, Processed by hook: ${processed}`
      );
    },
  }),
});

async function runOptionsContextTask() {
  console.log("\n--- Running Task: Context Passed via Options ---");
  const initialContext = new Map<string | symbol, unknown>();
  initialContext.set("traceId", `trace-${Date.now()}`);
  initialContext.set("userId", "user123");

  await agentReceivingContext.generateText("Analyze this user feedback.", {
    userContext: initialContext,
  });
}
// runOptionsContextTask();
```

----------------------------------------

TITLE: Generating Text with Provider Options in VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to use the `agent.generateText` method with custom provider options, specifically setting `thinkingConfig.thinkingBudget` to 0. This allows for fine-grained control over the AI's internal thinking process during text generation, enabling scenarios where immediate responses are preferred without extensive internal deliberation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/google-ai/CHANGELOG.md#_snippet_0

LANGUAGE: typescript
CODE:
```
const response = await agent.generateText("Write a creative story.", {
  provider: {
    thinkingConfig: {
      thinkingBudget: 0,
    },
  },
});
```

----------------------------------------

TITLE: Initializing VoltAgent with Multiple Exporters
DESCRIPTION: Configure VoltAgent to send telemetry data to multiple systems simultaneously by providing an array of exporter instances to the `telemetryExporter` option.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/observability/langfuse.md#_snippet_4

LANGUAGE: typescript
CODE:
```
import { ConsoleSpanExporter } from "@opentelemetry/sdk-trace-base"; // Example: OTEL Console Exporter

new VoltAgent({
  agents: { agent },
  telemetryExporter: [
    new LangfuseExporter({
      /* ... config ... */
    }),
    new ConsoleSpanExporter(), // Also log spans to the console
    // new OtherExporter({ /* ... config ... */ }),
  ],
});
```

----------------------------------------

TITLE: Creating VoltAgent App from Example (Bash)
DESCRIPTION: Use this command to quickly create a new VoltAgent project directory based on a predefined example, specifically the 'with-mcp' example. Requires Node.js and npm installed to execute.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-mcp/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-mcp
```

----------------------------------------

TITLE: Creating VoltAgent Example Project with Bash
DESCRIPTION: This command uses npm's create command to quickly initialize a new VoltAgent application. It fetches the latest version and specifically requests the 'with-xsai' example template to be used as the project base. This provides a ready-to-run project structure for exploration.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-xsai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-xsai
```

----------------------------------------

TITLE: Initializing Reasoning Toolkit with createReasoningTools (TypeScript)
DESCRIPTION: This snippet demonstrates how to initialize the `reasoning_tools` Toolkit using `createReasoningTools` from `@voltagent/core`. It shows two configurations: one where instructions are automatically added to the system prompt (`addInstructions: true`), and another where they are not (`addInstructions: false`), allowing for manual instruction handling. The function returns a `Toolkit` object containing `think` and `analyze` tools.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_11

LANGUAGE: typescript
CODE:
```
import { createReasoningTools, type Toolkit } from "@voltagent/core";

// Get the reasoning toolkit (with instructions included in the system prompt)
const reasoningToolkit: Toolkit = createReasoningTools({ addInstructions: true });

// Get the toolkit without automatically adding instructions
const reasoningToolkitManual: Toolkit = createReasoningTools({ addInstructions: false });
```

----------------------------------------

TITLE: Generating Object via Core API (Basic cURL)
DESCRIPTION: Provides an example of generating a structured JSON object from an agent using the `/agents/{id}/object` endpoint. Highlights the current requirement to provide a JSON representation of a Zod schema for the `schema` parameter.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/api/overview.md#_snippet_6

LANGUAGE: bash
CODE:
```
# Replace '{"type":"object", ...}' with the JSON representation of your Zod schema
curl -X POST http://localhost:3141/agents/your-agent-id/object \
     -H "Content-Type: application/json" \
     -d '{ "input": "Extract the name and age from: John Doe is 30 years old.", "schema": {"type":"object", "properties": {"name": {"type": "string"}, "age": {"type": "number"}}, "required": ["name", "age"]} }'
```

----------------------------------------

TITLE: Setting API Keys in .env File (.env)
DESCRIPTION: This snippet shows the content of a `.env` file used to store sensitive API keys required by the application. It includes placeholders for the `PEAKA_API_KEY` needed for the Peaka MCP server and the `OPENAI_API_KEY` required by the OpenAI model used by the agent. These keys are accessed by the application via `process.env`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-26-peaka-mcp-voltagent/index.md#_snippet_2

LANGUAGE: dotenv
CODE:
```
PEAKA_API_KEY=your_secret_peaka_key
# Don't forget your OpenAI key!
OPENAI_API_KEY=your_secret_openai_key
```

----------------------------------------

TITLE: Handling STT Errors in Custom Provider (TypeScript)
DESCRIPTION: This catch block handles errors that occur during the simulated or actual STT process within the `listen` method. It logs the error, emits a custom error event with a specific error code, and re-throws a standard Error with a descriptive message.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_9

LANGUAGE: TypeScript
CODE:
```
catch (error: any) {
      const errorMessage = error.message || "Unknown STT error";
      this.emit("error", {
        message: errorMessage,
        code: MyCustomErrorCode.ApiError, // Use your specific error codes
        details: error,
      });
      throw new Error(`Custom STT failed: ${errorMessage}`); // Re-throw a standard error
    }
```

----------------------------------------

TITLE: Integrating Voice Provider with VoltAgent Agent - TypeScript
DESCRIPTION: Illustrates how to initialize `OpenAIVoiceProvider` and `OpenAIAgentProvider` and integrate the voice provider instance directly into an `Agent` by passing it to the constructor. Includes commented-out code showing how to manually trigger speech from an agent's response.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_5

LANGUAGE: typescript
CODE:
```
import { Agent, OpenAIAgentProvider } from "@voltagent/core";
import { OpenAIVoiceProvider } from "@voltagent/voice";

// Initialize the voice provider
const voice = new OpenAIVoiceProvider({
  apiKey: process.env.OPENAI_API_KEY,
  ttsModel: "tts-1",
  voice: "nova",
});

// Initialize the agent provider
const provider = new OpenAIAgentProvider({
  apiKey: process.env.OPENAI_API_KEY,
});

// Create the agent, passing the voice instance
const voiceEnabledAgent = new Agent({
  name: "VoiceBot",
  instructions: "An agent that can speak.",
  provider,
  model: "gpt-4o", // Choose an appropriate model
  voice: voice, // Assign the voice provider here
});

// Now the agent instance potentially uses the voice capabilities
// (Specific usage within the agent depends on future VoltAgent features or custom implementations)

// Example: Manually trigger speech from agent's response
// const response = await voiceEnabledAgent.generateText("Tell me a short story.");
// if (voiceEnabledAgent.voice) {
//   const audio = await voiceEnabledAgent.voice.speak(response.text);
//   // Pipe audio to output
//   audio.pipe(createWriteStream("story.mp3"));
// }
```

----------------------------------------

TITLE: Run Agent with generateText
DESCRIPTION: Provides a basic example of calling the `generateText` method on an agent configured with the XsAIProvider and logging the response.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_7

LANGUAGE: typescript
CODE:
```
// Example call
async function run() {
  const response = await agent.generateText("What is the capital of Canada?");
  console.log(response.text);
}

run();
```

----------------------------------------

TITLE: Connecting to an External MCP Server (TypeScript)
DESCRIPTION: This snippet shows how to connect to an external Model Context Protocol (MCP) server using 'connectMCPServer', enabling the agent to utilize tools hosted remotely.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_9

LANGUAGE: typescript
CODE:
```
const mcpTools = await connectMCPServer("stdio://weather-server");
```

----------------------------------------

TITLE: Creating VoltAgent App with Google AI Example (bash)
DESCRIPTION: This command initializes a new VoltAgent project using the official `create-voltagent-app` tool. It specifically clones and sets up the `with-google-ai` example project, providing a quick starting point for building agents with Google AI models. Requires Node.js and npm.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-ai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-google-ai
```

----------------------------------------

TITLE: Creating VoltAgent App with Subagents Example - Bash
DESCRIPTION: This command utilizes the npm package manager to create a new VoltAgent project. It specifically uses the `@latest` version of the `voltagent-app` creation tool and initializes the project with the 'with-subagents' example template, demonstrating a common VoltAgent pattern.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-subagents/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-subagents
```

----------------------------------------

TITLE: Logging Agent Handoff (VoltAgent, TypeScript)
DESCRIPTION: This hook is triggered when one agent delegates a task to another agent, typically in a multi-agent setup using a delegation tool. It receives the target `agent` and the `sourceAgent`. The example logs the names of the source and target agents involved in the handoff, aiding in tracking workflow across agents.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/hooks.md#_snippet_4

LANGUAGE: ts
CODE:
```
onHandoff: async ({ agent, sourceAgent }) => {
  console.log(`Task handed off from agent '${sourceAgent.name}' to agent '${agent.name}'`);
};
```

----------------------------------------

TITLE: Configure VoltAgent and MCP Filesystem Server (TypeScript)
DESCRIPTION: Sets up the MCP configuration for a filesystem server using stdio, defines a VoltAgent Agent instance with instructions and an LLM, and registers the agent with the main VoltAgent server, making filesystem tools available.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-25-what-is-an-mcp-server/index.md#_snippet_2

LANGUAGE: typescript
CODE:
```
import { openai } from "@ai-sdk/openai";
import { VoltAgent, Agent, MCPConfiguration } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
// Node.js 'path' module helps create safe, cross-platform file paths
import path from "node:path";

const mcpConfig = new MCPConfiguration({
  servers: {
    filesystem: {
      // 'stdio' means VoltAgent will run this as a local command-line process
      // and communicate with it via standard input/output.
      type: "stdio",
      command: "npx",
      args: ["-y", "@modelcontextprotocol/server-filesystem", path.resolve("./data")],
    },
  },
});

const mcpAgent = new Agent({
  name: "MCP Filesystem Agent",
  instructions: "You can interact with the local filesystem. List files, read files, write files.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
  tools: await mcpConfig.getTools(),
});

new VoltAgent({
  agents: {
    fsAgent: mcpAgent,
  },
});
```

----------------------------------------

TITLE: Example package.json Dependencies
DESCRIPTION: Shows the typical dependencies required for a VoltAgent project, including core, a provider (like Vercel AI), an LLM SDK (like OpenAI), and utility libraries (like Zod).
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-24-rag-chatbot/index.md#_snippet_2

LANGUAGE: json
CODE:
```
// ... (scripts, name: "with-rag-chatbot", etc.)
  "dependencies": {
    "@ai-sdk/openai": "...", // Or your chosen LLM SDK
    "@voltagent/core": "...",
    "@voltagent/vercel-ai": "...", // Or your chosen provider
    "zod": "..."
  },
// ... (devDependencies)
```

----------------------------------------

TITLE: Listening for MCP Client Events (TypeScript)
DESCRIPTION: Demonstrates how to access underlying MCP client instances from the configuration and attach event listeners for connection status ('connect'), errors ('error'), and raw messages ('message'). This allows for monitoring and reacting to the client's activity and communication.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/mcp.md#_snippet_3

LANGUAGE: typescript
CODE:
```
// Get the client instances (ensure connection is established first, e.g., after getTools)
const clients = await mcpConfig.getClients();

// Example: Listen for connection event on the 'reddit' client
if (clients.reddit) {
  clients.reddit.on("connect", () => {
    console.log("Connected to Reddit MCP server");
  });

  // Example: Handle errors centrally for the 'reddit' client
  clients.reddit.on("error", (error) => {
    console.error("Reddit MCP server connection error:", error.message);
  });

  // Example: Listen for specific MCP messages (raw interaction)
  clients.reddit.on("message", (message) => {
    // console.log("Received MCP message from Reddit:", message);
    if (message.type === "tool_call") {
      console.log(`MCP Log: Tool ${message.tool_name} called`);
    }
  });
}
```

----------------------------------------

TITLE: Propagating User Context in VoltAgent Sub-Agents and Tools (TypeScript)
DESCRIPTION: This snippet demonstrates how to pass `userContext` from a supervisor agent to its sub-agents and tools, ensuring consistent contextual data across delegated tasks. It shows accessing the `userContext` within `onStart` hooks and `ToolExecutionContext` to retrieve shared information like a transaction ID.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
// Supervisor Agent initiates an operation with userContext:
const supervisorContext = new Map<string | symbol, unknown>();
supervisorContext.set("globalTransactionId", "tx-supervisor-12345");

await supervisorAgent.generateText(
  "Delegate analysis of transaction tx-supervisor-12345 to the financial sub-agent.",
  { userContext: supervisorContext }
);

// In your sub-agent's hook definition (e.g., within createHooks):
onStart: ({ agent, context }: OnStartHookArgs) => {
  const inheritedUserContext = context.userContext; // Access the OperationContext's userContext
  const transactionId = inheritedUserContext.get("globalTransactionId");
  console.log(`[${agent.name}] Hook: Operating with Transaction ID: ${transactionId}`);
  // Expected log: [FinancialSubAgent] Hook: Operating with Transaction ID: tx-supervisor-12345
};

// Example: Inside a Tool executed by the Sub-Agent
// In your sub-agent tool's execute function:
execute: async (params: { someParam: string }, options?: ToolExecutionContext) => {
  if (options?.operationContext?.userContext) {
    const inheritedUserContext = options.operationContext.userContext;
    const transactionId = inheritedUserContext.get("globalTransactionId");
    console.log(`[SubAgentTool] Tool: Processing with Transaction ID: ${transactionId}`);
    // Expected log: [SubAgentTool] Tool: Processing with Transaction ID: tx-supervisor-12345
    return `Processed ${params.someParam} for transaction ${transactionId}`;
  }
  return "Error: OperationContext not available for tool";
};
```

----------------------------------------

TITLE: Using createReasoningTools Helper (TypeScript)
DESCRIPTION: Shows how to import the helper and create a default `Toolkit` with both `think` and `analyze` tools (and instructions), and how to create a customized `Toolkit` (e.g., with only the `think` tool and no instructions) by passing options. Requires the `@voltagent/core` package.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/tools/reasoning-tool.mdx#_snippet_0

LANGUAGE: TypeScript
CODE:
```
import { createReasoningTools, type Toolkit } from "@voltagent/core";

// Basic usage - includes both tools and adds instructions/examples
const reasoningToolkit: Toolkit = createReasoningTools();

// Customized usage - e.g., only include 'think' and don't add instructions
const thinkOnlyToolkit: Toolkit = createReasoningTools({
  analyze: false,
  addInstructions: false,
});
```

----------------------------------------

TITLE: Setting OpenAI API Key in .env (dotenv)
DESCRIPTION: Configures the OpenAI API key for the VoltAgent project by setting the `OPENAI_API_KEY` environment variable in the `.env` file. This key is automatically loaded by VoltAgent for use by the agents.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-23-multi-agent-llm/index.md#_snippet_1

LANGUAGE: dotenv
CODE:
```
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

----------------------------------------

TITLE: Configure AnthropicProvider with API Key
DESCRIPTION: Demonstrates two ways to configure the AnthropicProvider: directly providing the API key or relying on the ANTHROPIC_API_KEY environment variable. The API key is required for authentication with the Anthropic API.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/anthropic-ai.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { AnthropicProvider } from "@voltagent/anthropic-ai";

// Option 1: Direct API Key
const anthropicProvider = new AnthropicProvider({
  apiKey: "YOUR_ANTHROPIC_API_KEY",
});

// Option 2: Environment Variable (ANTHROPIC_API_KEY)
// Ensure process.env.ANTHROPIC_API_KEY is set
const anthropicProvider = new AnthropicProvider({});
```

----------------------------------------

TITLE: Configuring Voltagent Agent with Voice Provider
DESCRIPTION: This snippet initializes a `Voltagent` `Agent` instance, configuring its name, instructions, LLM provider, and model. Crucially, it assigns an instantiated voice provider (either `elevenLabsVoice` or `openaiVoice`) to the agent's `voice` property, enabling the agent to generate spoken responses.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_19

LANGUAGE: TypeScript
CODE:
```
// --- Integrating Voice with an Agent ---

const agent = new Agent({
  name: "Voice Assistant",
  instructions: "A helpful voice assistant",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  // Assign a voice provider instance to the agent's voice property
  voice: elevenLabsVoice // Or use openaiVoice
});
```

----------------------------------------

TITLE: Performing Text-to-Speech with ElevenLabs Voice Provider
DESCRIPTION: This code demonstrates using the `speak` method of the `ElevenLabsVoiceProvider` to convert text into an audio stream. The resulting audio stream is then piped to a local MP3 file, showcasing how to save the synthesized speech from ElevenLabs.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_18

LANGUAGE: TypeScript
CODE:
```
// TTS with ElevenLabs
const elAudioStream = await elevenLabsVoice.speak("Hello from ElevenLabs!");
await pipeline(elAudioStream, createWriteStream("elevenlabs_output.mp3"));
```

----------------------------------------

TITLE: Running the VoltAgent Thinking Tools Example (Bash)
DESCRIPTION: Executes the VoltAgent example application using the npm 'dev' script. This command initiates the agent's task, and the console output will display the agent's reasoning steps (via 'think' and 'analyze' tools) and its final output. Requires dependencies to be installed and the API key configured.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-thinking-tool/README.md#_snippet_3

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Configuring Composio MCP Server URL (TypeScript)
DESCRIPTION: This TypeScript code snippet demonstrates how to configure the `MCPConfiguration` for integrating VoltAgent with a Composio MCP HTTP server. It requires the specific URL of the user's Composio MCP server, obtained from the Composio dashboard, to connect the agent to the configured third-party services.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-composio-mcp/README.md#_snippet_3

LANGUAGE: typescript
CODE:
```
const mcpConfig = new MCPConfiguration({
  servers: {
    composio: {
      type: "http",
      url: "https://mcp.composio.dev/composio/server/YOUR-SERVER-ID",
    },
  },
});
```

----------------------------------------

TITLE: Confirming VoltAgent Server Start (Bash)
DESCRIPTION: This snippet shows the expected terminal output when the VoltAgent server successfully starts locally, indicating the HTTP server address and the Developer Console URL. It confirms that observability is enabled and the server is ready for connection by displaying key server details.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/observability/developer-console.md#_snippet_0

LANGUAGE: bash
CODE:
```
══════════════════════════════════════════════════
  VOLTAGENT SERVER STARTED SUCCESSFULLY
══════════════════════════════════════════════════
  ✓ HTTP Server: http://localhost:3141

  Developer Console:    https://console.voltagent.dev
══════════════════════════════════════════════════
[VoltAgent] All packages are up to date
```

----------------------------------------

TITLE: Creating a VoltAgent App with Example (Bash)
DESCRIPTION: This command uses npm to create a new VoltAgent application based on the latest version of the `@voltagent/app` package. It specifically initializes the project using the 'with-playwright' example template.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-playwright/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-playwright
```

----------------------------------------

TITLE: Creating VoltAgent Next.js Example Project (Bash)
DESCRIPTION: This command scaffolds a new Next.js project pre-configured with the VoltAgent example, allowing for a quick start without manual setup.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/integrations/nextjs.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-nextjs
```

----------------------------------------

TITLE: Creating VoltAgent Project with Next.js Example - Bash
DESCRIPTION: This command uses npm to create a new VoltAgent application. It specifies the `@latest` version and uses the `--example with-nextjs` flag to initialize the project with a Next.js template. Requires Node.js and npm.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-nextjs/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-nextjs
```

----------------------------------------

TITLE: Configuring AnthropicProvider with Environment Variable (TypeScript)
DESCRIPTION: This snippet shows how to initialize the `AnthropicProvider` without explicitly providing an API key. In this configuration, the provider automatically looks for the `ANTHROPIC_API_KEY` environment variable, offering a more secure way to manage credentials in production environments.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/anthropic-ai/README.md#_snippet_2

LANGUAGE: typescript
CODE:
```
import { AnthropicProvider } from "@voltagent/anthropic-ai";

// Option 2: Environment Variable (ANTHROPIC_API_KEY)
// Ensure process.env.ANTHROPIC_API_KEY is set
const anthropicProvider = new AnthropicProvider({});
```

----------------------------------------

TITLE: Configuring Langfuse Exporter with VoltAgent - TypeScript
DESCRIPTION: This TypeScript snippet demonstrates how to configure and integrate the `LangfuseExporter` with `VoltAgent`. It initializes an `Agent` and a `LangfuseExporter` using environment variables for API keys, then passes the exporter to the `VoltAgent` constructor to enable automatic OpenTelemetry tracing for agent operations. Prerequisites include `@voltagent/core`, `@voltagent/vercel-ai`, `@ai-sdk/openai`, and `@voltagent/langfuse-exporter` packages, along with `LANGFUSE_PUBLIC_KEY` and `LANGFUSE_SECRET_KEY` environment variables.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_18

LANGUAGE: typescript
CODE:
```
import { Agent, VoltAgent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

import { LangfuseExporter } from "@voltagent/langfuse-exporter";

// Ensure LANGFUSE_SECRET_KEY and LANGFUSE_PUBLIC_KEY are set in your environment

// Define your agent(s)
const agent = new Agent({
  name: "my-voltagent-app",
  instructions: "A helpful assistant that answers questions without using tools",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini"),
});

// Configure the Langfuse Exporter
const langfuseExporter = new LangfuseExporter({
  publicKey: process.env.LANGFUSE_PUBLIC_KEY,
  secretKey: process.env.LANGFUSE_SECRET_KEY,
  baseUrl: process.env.LANGFUSE_BASE_URL, // Optional: Defaults to Langfuse Cloud
  // debug: true // Optional: Enable exporter logging
});

// Initialize VoltAgent with the exporter
// This automatically sets up OpenTelemetry tracing
new VoltAgent({
  agents: {
    agent, // Register your agent(s)
  },
  telemetryExporter: langfuseExporter, // Pass the exporter instance
});

console.log("VoltAgent initialized with Langfuse exporter.");

// Now, any operations performed by 'agent' (e.g., agent.generateText(...))
// will automatically generate traces and send them to Langfuse.
```

----------------------------------------

TITLE: Generating Spoken Response from Voltagent Agent
DESCRIPTION: This code demonstrates how to generate a text response from an agent and then, if a voice provider is configured, use the agent's `voice.speak()` method to convert that text into an audio stream. The audio stream is subsequently saved to a file, providing a complete example of an agent speaking its response.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_20

LANGUAGE: TypeScript
CODE:
```
// To generate voice from an agent response:
// 1. Generate the text response using a core agent method.
const textResponse = await agent.generateText("Tell me a short story.");

// 2. Check if the agent has a voice provider configured.
if (agent.voice && textResponse.text) {
  // 3. Call the 'speak' method on the agent's voice provider instance.
  console.log("Generating voice output...");
  const agentAudioStream = await agent.voice.speak(textResponse.text);

  // Example: Save the agent's spoken response to a file
  await pipeline(agentAudioStream, createWriteStream("agent_story.mp3"));
  console.log("Generated voice output stream.");
} else {
  console.log("Agent response:", textResponse.text);
  if (!agent.voice) {
    console.log("(Agent has no voice provider configured)");
  }
}
```

----------------------------------------

TITLE: Creating VoltAgent App with Example (Bash)
DESCRIPTION: This command initiates the scaffolding of a new VoltAgent project using the `npm create` command. It specifically fetches the `with-voice-elevenlabs` example template, providing a ready-to-run project demonstrating voice integration with Eleven Labs. This is a convenient way to explore VoltAgent's capabilities quickly.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-voice-elevenlabs/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-voice-elevenlabs
```

----------------------------------------

TITLE: VoltAgent Server Startup Output (Bash)
DESCRIPTION: This snippet shows the expected output in the terminal when the VoltAgent application successfully starts. It indicates that the HTTP server is running, providing the local URL (`http://localhost:3141`) and a link to the developer console. This confirms that VoltAgent is operational and ready to handle requests.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-26-peaka-mcp-voltagent/index.md#_snippet_4

LANGUAGE: bash
CODE:
```
══════════════════════════════════════════════════
  VOLTAGENT SERVER STARTED SUCCESSFULLY
══════════════════════════════════════════════════
  ✓ HTTP Server: http://localhost:3141

  Developer Console:    https://console.voltagent.dev
══════════════════════════════════════════════════
```

----------------------------------------

TITLE: VoltAgent Server Startup Output (Bash)
DESCRIPTION: Shows the expected output in the terminal when the VoltAgent server successfully starts, including the local HTTP address and the Developer Console link.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-25-what-is-an-mcp-server/index.md#_snippet_7

LANGUAGE: bash
CODE:
```
══════════════════════════════════════════════════
  VOLTAGENT SERVER STARTED SUCCESSFULLY
══════════════════════════════════════════════════
  ✓ HTTP Server: http://localhost:3141

  Developer Console:    https://console.voltagent.dev
══════════════════════════════════════════════════
```

----------------------------------------

TITLE: Define Delegate Task Tool Result Interface (TypeScript)
DESCRIPTION: Defines the TypeScript interface for the array of results returned by the `delegate_task` tool. Each object in the array represents the outcome from a single delegated subagent, including its name, response text, and the conversation ID used for the handoff.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/subagents.md#_snippet_2

LANGUAGE: typescript
CODE:
```
[
  {
    agentName: string; // Name of the subagent that executed the task
    response: string; // The text result returned by the subagent
    conversationId: string; // The conversation ID used for the handoff
  },
  // ... potentially more results if multiple agents were targeted
]
```

----------------------------------------

TITLE: Configuring Langfuse Observability with VoltAgent (TypeScript)
DESCRIPTION: This snippet demonstrates how to configure the `LangfuseExporter` with `VoltAgent` to enable detailed observability via Langfuse. It shows the import of necessary modules, definition of an agent, instantiation of the exporter with environment variables (publicKey, secretKey, baseUrl), and passing the exporter to the `VoltAgent` constructor. This setup automatically configures OpenTelemetry tracing for agent operations.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { Agent, VoltAgent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

import { LangfuseExporter } from "@voltagent/langfuse-exporter";

// Ensure LANGFUSE_SECRET_KEY and LANGFUSE_PUBLIC_KEY are set in your environment

// Define your agent(s)
const agent = new Agent({
  name: "my-voltagent-app",
  instructions: "A helpful assistant that answers questions without using tools",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Configure the Langfuse Exporter
const langfuseExporter = new LangfuseExporter({
  publicKey: process.env.LANGFUSE_PUBLIC_KEY,
  secretKey: process.env.LANGFUSE_SECRET_KEY,
  baseUrl: process.env.LANGFUSE_BASE_URL, // Optional: Defaults to Langfuse Cloud
  // debug: true // Optional: Enable exporter logging
});

// Initialize VoltAgent with the exporter
// This automatically sets up OpenTelemetry tracing
new VoltAgent({
  agents: {
    agent // Register your agent(s)
  },
  telemetryExporter: langfuseExporter // Pass the exporter instance
});

console.log("VoltAgent initialized with Langfuse exporter.");

// Now, any operations performed by 'agent' (e.g., agent.generateText(...))
// will automatically generate traces and send them to Langfuse.
```

----------------------------------------

TITLE: Updating Agent Definition with Instructions Field (TypeScript)
DESCRIPTION: This snippet demonstrates the refactoring of an `Agent` instance definition within the VoltAgent framework. It shows the transition from using the `description` field to the `instructions` field for providing behavioral guidance to the agent, aligning with the preferred API usage and preparing for future deprecation of `description`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_13

LANGUAGE: TypeScript
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Updating VoltAgent Agent Definition to Use Instructions (TypeScript)
DESCRIPTION: This code snippet shows a diff illustrating the change required to update an Agent definition from using the deprecated `description` field to the new `instructions` field, which is the preferred way to provide behavioral guidance to the agent. This aligns examples with the current API.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/voice/CHANGELOG.md#_snippet_0

LANGUAGE: diff
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Initializing ElevenLabs Voice Provider
DESCRIPTION: This snippet shows how to create an instance of `ElevenLabsVoiceProvider`. It requires an ElevenLabs API key and allows selection of a specific voice ID or name for speech synthesis. This provider is primarily used for direct text-to-speech operations.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_17

LANGUAGE: TypeScript
CODE:
```
// Option 2: ElevenLabs Voice
const elevenLabsVoice = new ElevenLabsVoiceProvider({
  apiKey: process.env.ELEVENLABS_API_KEY,
  voice: "Rachel" // Choose an ElevenLabs voice ID or name
});
```

----------------------------------------

TITLE: Creating VoltAgent Project from Example (Bash)
DESCRIPTION: This command uses the `npm create` utility to bootstrap a new VoltAgent application. It fetches the latest version of the `voltagent-app` creator and uses the `--example` flag to generate a project based on the 'with-supabase' template. This requires Node.js and npm/npx to be installed.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-supabase/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-supabase
```

----------------------------------------

TITLE: Install Anthropic Provider with pnpm
DESCRIPTION: Installs the necessary packages for using the Anthropic provider with VoltAgent via pnpm. Requires @voltagent/core, @voltagent/anthropic-ai, and zod (for generateObject).
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/anthropic-ai.md#_snippet_2

LANGUAGE: bash
CODE:
```
pnpm add @voltagent/core @voltagent/anthropic-ai zod
```

----------------------------------------

TITLE: Installing VoltAgent Dependencies (pnpm)
DESCRIPTION: These pnpm commands install both development and production dependencies for a VoltAgent project. Development dependencies include TypeScript, tsx, and the VoltAgent CLI, while production dependencies cover core VoltAgent libraries, Vercel AI integration, AI SDK, and Zod for schema validation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_8

LANGUAGE: bash
CODE:
```
# Install development dependencies
pnpm add --save-dev typescript tsx @types/node @voltagent/cli

# Install dependencies

```

----------------------------------------

TITLE: Install xsAI Provider Dependencies (npm)
DESCRIPTION: Installs the necessary packages for using the xsAI provider with npm, including the core VoltAgent library, the xsAI provider itself, the xsai library, and zod for object generation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/core @voltagent/xsai xsai zod
```

----------------------------------------

TITLE: Calling Tool Directly with AbortSignal and Timeout (TypeScript)
DESCRIPTION: Demonstrates how to call a tool's `execute` method directly, passing an `AbortSignal` in the options object. It includes creating an `AbortController`, setting a timeout to abort, and handling the `AbortError` in a try/catch block.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_9

LANGUAGE: TypeScript
CODE:
```
// Create an AbortController
const controller = new AbortController();
const signal = controller.signal;

// Set a timeout to abort after 5 seconds
setTimeout(() => controller.abort(), 5000);

try {
  // Pass the signal in the options object
  const result = await searchTool.execute({ query: "Latest AI developments" }, { signal });
  console.log("Results:", result);
} catch (error) {
  if (error.name === "AbortError") {
    console.log("Search was cancelled by the user");
  } else {
    console.error("Search failed:", error);
  }
}
```

----------------------------------------

TITLE: Fetching MCP Tools Organized by Server (TypeScript)
DESCRIPTION: Illustrates using the asynchronous `getToolsets()` method to get an object where tools are grouped by the server name. It shows how to access tools specifically from a particular server (e.g., `toolsets.filesystem`) and how to use that server's tools with an agent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/mcp.md#_snippet_2

LANGUAGE: ts
CODE:
```
// Fetch tools organized by server name
const toolsets = await mcpConfig.getToolsets();

// Access tools specifically from the filesystem server
const filesystemTools = toolsets.filesystem.getTools();

// Use only filesystem tools with an agent
// const filesystemResponse = await agent.generateText(
//   "List all files in my Desktop folder and create a summary.txt file",
//   {
//     userId: "user123",
//     tools: filesystemTools, // Pass only the filesystem tools
//   }
// );

// Remember to disconnect later
// await mcpConfig.disconnect();
```

----------------------------------------

TITLE: Initializing Agent with Default Memory (TypeScript)
DESCRIPTION: Demonstrates creating a VoltAgent instance without explicitly configuring a memory provider. By default, VoltAgent automatically uses `LibSQLStorage` for local persistence, storing conversation history in a SQLite database file at `.voltagent/memory.db`. This enables stateful agents with zero configuration.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/overview.md#_snippet_0

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const agent = new Agent({
  name: "My Assistant",
  instructions: "This agent automatically uses local file memory.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  // No memory provider specified - uses default LibSQLStorage to .voltagent/memory.db
});
```

----------------------------------------

TITLE: Starting VoltAgent Development Client - Bash
DESCRIPTION: Changes directory to the client folder and runs the development script defined in its package.json using npm. This starts the frontend application, typically on http://localhost:5173.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-drive-mcp/README.md#_snippet_6

LANGUAGE: bash
CODE:
```
cd client
npm run dev
```

----------------------------------------

TITLE: Instantiate Agent with AnthropicProvider
DESCRIPTION: Shows how to create a VoltAgent instance configured to use the AnthropicProvider. Specifies the desired Claude model and includes a basic example of calling generateText and logging the response.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/anthropic-ai.md#_snippet_4

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { AnthropicProvider } from "@voltagent/anthropic-ai";

const anthropicProvider = new AnthropicProvider({ apiKey: "YOUR_ANTHROPIC_API_KEY" });

const agent = new Agent({
  name: "Claude Agent",
  instructions: "An agent powered by Claude",
  llm: anthropicProvider,
  model: "claude-3-sonnet-20240229", // Specify the desired Claude model
});

// Example call
async function run() {
  const response = await agent.generateText("What is the capital of France?");
  console.log(response.text);
}

run();
```

----------------------------------------

TITLE: Configuring Langfuse Exporter with VoltAgent in TypeScript
DESCRIPTION: This TypeScript code demonstrates how to configure and integrate the `LangfuseExporter` with a `VoltAgent` instance. It sets up OpenTelemetry tracing to send detailed agent operation traces to Langfuse, requiring `LANGFUSE_PUBLIC_KEY` and `LANGFUSE_SECRET_KEY` environment variables.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_3

LANGUAGE: TypeScript
CODE:
```
import { Agent, VoltAgent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

import { LangfuseExporter } from "@voltagent/langfuse-exporter";

// Ensure LANGFUSE_SECRET_KEY and LANGFUSE_PUBLIC_KEY are set in your environment

// Define your agent(s)
const agent = new Agent({
  name: "my-voltagent-app",
  instructions: "A helpful assistant that answers questions without using tools",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o-mini")
});

// Configure the Langfuse Exporter
const langfuseExporter = new LangfuseExporter({
  publicKey: process.env.LANGFUSE_PUBLIC_KEY,
  secretKey: process.env.LANGFUSE_SECRET_KEY,
  baseUrl: process.env.LANGFUSE_BASE_URL, // Optional: Defaults to Langfuse Cloud
  // debug: true // Optional: Enable exporter logging
});

// Initialize VoltAgent with the exporter
// This automatically sets up OpenTelemetry tracing
new VoltAgent({
  agents: {
    agent // Register your agent(s)
  },
  telemetryExporter: langfuseExporter // Pass the exporter instance
});

console.log("VoltAgent initialized with Langfuse exporter.");

// Now, any operations performed by 'agent' (e.g., agent.generateText(...))
// will automatically generate traces and send them to Langfuse.
```

----------------------------------------

TITLE: Fetching All MCP Tools as a Flat Array (TypeScript)
DESCRIPTION: Demonstrates calling the asynchronous `getTools()` method on an `MCPConfiguration` instance to retrieve a combined list of all available tools from all connected servers as a single flat array. It mentions how this list can be passed to an agent and reminds the user to disconnect later.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/mcp.md#_snippet_1

LANGUAGE: ts
CODE:
```
// Fetch all tools from all configured MCP servers into a flat array
const allTools = await mcpConfig.getTools();

// Use these tools when interacting with an agent
// const response = await agent.generateText("What are the top posts on r/programming?", {
//   userId: "user123",
//   tools: allTools, // Pass the combined list of tools
// });

// Remember to disconnect later
// await mcpConfig.disconnect();
```

----------------------------------------

TITLE: Create Supabase Memory Tables and Indexes (SQL)
DESCRIPTION: This SQL script creates the necessary tables (voltagent_memory_conversations, voltagent_memory_messages, voltagent_memory_agent_history, voltagent_memory_agent_history_events, voltagent_memory_agent_history_steps) and indexes in a Supabase database required by the VoltAgent Supabase memory provider. It includes foreign key constraints and uses JSONB for metadata and history values. Remember to replace voltagent_memory with your custom table prefix if specified during initialization.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/supabase/README.md#_snippet_1

LANGUAGE: sql
CODE:
```
-- Conversations Table
CREATE TABLE IF NOT EXISTS voltagent_memory_conversations (
    id TEXT PRIMARY KEY,
    resource_id TEXT NOT NULL,
    title TEXT,
    metadata JSONB, -- Use JSONB for efficient querying
    created_at TIMESTAMPTZ NOT NULL DEFAULT timezone('utc'::text, now()),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT timezone('utc'::text, now())
);

-- Index for faster lookup by resource_id
CREATE INDEX IF NOT EXISTS idx_voltagent_memory_conversations_resource
ON voltagent_memory_conversations(resource_id);

-- Messages Table
CREATE TABLE IF NOT EXISTS voltagent_memory_messages (
    user_id TEXT NOT NULL,
    -- Add foreign key reference and cascade delete
    conversation_id TEXT NOT NULL REFERENCES voltagent_memory_conversations(id) ON DELETE CASCADE,
    message_id TEXT NOT NULL,
    role TEXT NOT NULL,
    content TEXT NOT NULL, -- Consider JSONB if content is often structured
    type TEXT NOT NULL,
    created_at TIMESTAMPTZ NOT NULL DEFAULT timezone('utc'::text, now()),
    -- Composite primary key to ensure message uniqueness within a conversation
    PRIMARY KEY (user_id, conversation_id, message_id)
);

-- Index for faster message retrieval
CREATE INDEX IF NOT EXISTS idx_voltagent_memory_messages_lookup
ON voltagent_memory_messages(user_id, conversation_id, created_at);

-- Agent History Table
CREATE TABLE IF NOT EXISTS voltagent_memory_agent_history (
    key TEXT PRIMARY KEY,
    value JSONB NOT NULL, -- Store the entry object as JSONB
    agent_id TEXT NOT NULL
);

-- Index for faster lookup by agent_id
CREATE INDEX IF NOT EXISTS idx_voltagent_memory_agent_history_agent_id
ON voltagent_memory_agent_history(agent_id);

-- Agent History Events Table
CREATE TABLE IF NOT EXISTS voltagent_memory_agent_history_events (
    key TEXT PRIMARY KEY,
    value JSONB NOT NULL, -- Store the event object as JSONB
    -- Foreign key to history entry
    history_id TEXT NOT NULL REFERENCES voltagent_memory_agent_history(key) ON DELETE CASCADE,
    agent_id TEXT NOT NULL
);

-- Indexes for faster lookup
CREATE INDEX IF NOT EXISTS idx_voltagent_memory_agent_history_events_history_id
ON voltagent_memory_agent_history_events(history_id);

CREATE INDEX IF NOT EXISTS idx_voltagent_memory_agent_history_events_agent_id
ON voltagent_memory_agent_history_events(agent_id);

-- Agent History Steps Table
CREATE TABLE IF NOT EXISTS voltagent_memory_agent_history_steps (
    key TEXT PRIMARY KEY,
    value JSONB NOT NULL, -- Store the step object as JSONB
    -- Foreign key to history entry
    history_id TEXT NOT NULL REFERENCES voltagent_memory_agent_history(key) ON DELETE CASCADE,
    agent_id TEXT NOT NULL
);

-- Indexes for faster lookup
CREATE INDEX IF NOT EXISTS idx_voltagent_memory_agent_history_steps_history_id
ON voltagent_memory_agent_history_steps(history_id);

CREATE INDEX IF NOT EXISTS idx_voltagent_memory_agent_history_steps_agent_id
ON voltagent_memory_agent_history_steps(agent_id);
```

----------------------------------------

TITLE: Logging Tool Execution Start (VoltAgent, TypeScript)
DESCRIPTION: This hook is triggered just before an agent executes a specific tool. It receives the `agent`, `tool`, and `context`. The example logs the agent's name, the tool's name, and the operation ID, indicating when a tool invocation is about to occur. Useful for tracking tool usage.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/hooks.md#_snippet_2

LANGUAGE: ts
CODE:
```
onToolStart: async ({ agent, tool, context }) => {
  console.log(
    `Agent ${agent.name} invoking tool '${tool.name}' for operation ${context.operationId}`
  );
};
```

----------------------------------------

TITLE: Initialize Vercel AI Provider (TypeScript)
DESCRIPTION: Creates a new instance of the VercelProvider. This provider relies on environment variables configured for the Vercel AI SDK.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { VercelProvider } from "@voltagent/vercel-ai";

const vercelProvider = new VercelProvider();
```

----------------------------------------

TITLE: Configuring OpenAI API Key (.env)
DESCRIPTION: This snippet shows the basic structure of the `.env` file required for the example project. It demonstrates how to define the `OPENAI_API_KEY` environment variable, which is necessary for the agent to authenticate with the OpenAI API or another configured LLM provider.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-composio-mcp/README.md#_snippet_1

LANGUAGE: env
CODE:
```
# .env
OPENAI_API_KEY=your_openai_api_key_here
```

----------------------------------------

TITLE: Creating .env file for API key
DESCRIPTION: Creates or updates the `.env` file in the project root to store the OpenAI API key required for the agent system.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-21-first-ai-agent-github-repo-analyzer/index.md#_snippet_2

LANGUAGE: dotenv
CODE:
```
OPENAI_API_KEY=sk-proj-
```

----------------------------------------

TITLE: Updating Agent Definition Field in JavaScript
DESCRIPTION: This snippet demonstrates the refactoring of `Agent` instance definitions to use the `instructions` field instead of `description`. This change aligns with the preferred API usage for providing behavioral guidance to the agent/LLM and anticipates the deprecation of the `description` field for `Agent` class definitions. It shows the removal of `description` and addition of `instructions` when initializing an `Agent`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_22

LANGUAGE: JavaScript
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini")
  });
```

----------------------------------------

TITLE: Initialize Voice Provider Instance (TypeScript)
DESCRIPTION: Demonstrates how to initialize instances of OpenAIVoiceProvider, ElevenLabsVoiceProvider, and XsAIVoiceProvider with API keys and configuration options.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_1

LANGUAGE: typescript
CODE:
```
// Initialize with OpenAI
import { OpenAIVoiceProvider } from "@voltagent/voice";

const openAIVoice = new OpenAIVoiceProvider({
  apiKey: process.env.OPENAI_API_KEY, // Ensure API key is set in environment variables
  ttsModel: "tts-1",
  voice: "alloy", // Available voices: alloy, echo, fable, onyx, nova, shimmer
});

// Or initialize with ElevenLabs
import { ElevenLabsVoiceProvider } from "@voltagent/voice";

const elevenLabsVoice = new ElevenLabsVoiceProvider({
  apiKey: process.env.ELEVENLABS_API_KEY, // Ensure API key is set
  ttsModel: "eleven_multilingual_v2",
  voice: "Rachel", // Example voice ID
});

// Or initialize with xsAI
import { XsAIVoiceProvider } from "@voltagent/voice";

const xsAIVoice = new XsAIVoiceProvider({
  apiKey: process.env.OPENAI_API_KEY!,
  ttsModel: "tts-1",
  voice: "alloy",
  // If you are not using OpenAI, simply specify the `baseURL`
});
```

----------------------------------------

TITLE: Install xsAI Provider Dependencies (pnpm)
DESCRIPTION: Installs the necessary packages for using the xsAI provider with pnpm, including the core VoltAgent library, the xsAI provider itself, the xsai library, and zod for object generation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_2

LANGUAGE: bash
CODE:
```
pnpm add @voltagent/core @voltagent/xsai xsai zod
```

----------------------------------------

TITLE: Installing Groq AI Provider with pnpm (Bash)
DESCRIPTION: Installs the `@voltagent/groq-ai` provider, the core `@voltagent/core` library, and `zod` using pnpm. `zod` is required if using the `generateObject` method.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/groq-ai.md#_snippet_2

LANGUAGE: bash
CODE:
```
pnpm add @voltagent/core @voltagent/groq-ai zod
```

----------------------------------------

TITLE: Installing Groq AI Provider with npm (Bash)
DESCRIPTION: Installs the `@voltagent/groq-ai` provider, the core `@voltagent/core` library, and `zod` using npm. `zod` is required if using the `generateObject` method.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/groq-ai.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/core @voltagent/groq-ai zod
```

----------------------------------------

TITLE: Installing Groq AI Provider with yarn (Bash)
DESCRIPTION: Installs the `@voltagent/groq-ai` provider, the core `@voltagent/core` library, and `zod` using yarn. `zod` is required if using the `generateObject` method.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/groq-ai.md#_snippet_1

LANGUAGE: bash
CODE:
```
yarn add @voltagent/core @voltagent/groq-ai zod
```

----------------------------------------

TITLE: VoltAgent Server Startup Console Output (Bash)
DESCRIPTION: This snippet shows the typical console output when the VoltAgent Core API server successfully starts. It indicates the HTTP server address (usually localhost:3141) and the URL for the interactive Swagger UI documentation. This output helps users confirm the server is running and find the access points.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/api/overview.md#_snippet_0

LANGUAGE: bash
CODE:
```
# Example console output
$ node your-app.js

  ══════════════════════════════════════════════════
    VOLTAGENT SERVER STARTED SUCCESSFULLY
  ══════════════════════════════════════════════════
    ✓ HTTP Server:  http://localhost:3141
    ✓ Swagger UI:   http://localhost:3141/ui

    Developer Console:    https://console.voltagent.dev
  ══════════════════════════════════════════════════
```

----------------------------------------

TITLE: Cloning VoltAgent Repository - Shell
DESCRIPTION: This snippet provides the shell commands to clone your forked VoltAgent repository from GitHub and navigate into its directory. It's the first step in setting up your local development environment after forking the project. Remember to replace <your-github-username> with your actual GitHub username.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_0

LANGUAGE: sh
CODE:
```
git clone https://github.com/<your-github-username>/VoltAgent.git # Replace with your fork
cd voltagent
```

----------------------------------------

TITLE: Dynamically Registering Tools with Agent (TypeScript)
DESCRIPTION: Shows two methods for managing tools dynamically: adding tools to the agent instance after creation using `agent.addTools()`, or providing a list of tools specifically for a single request via the `tools` option in methods like `generateText`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_13

LANGUAGE: TypeScript
CODE:
```
// Create an agent without tools initially
const agent = new Agent({
  name: "Dynamic Assistant",
  description: "An assistant that can gain new abilities",
  llm: new VercelAIProvider(),
});

// Later, add tools to the agent
agent.addTools([calculatorTool]);

// Or provide tools for a specific request only
const response = await agent.generateText("Calculate 123 * 456", {
  tools: [calculatorTool],
});
```

----------------------------------------

TITLE: Disabling Agent Memory (TypeScript)
DESCRIPTION: Shows how to completely disable memory persistence and retrieval for a VoltAgent instance. Setting the `memory` property to `false` in the `Agent` constructor makes the agent stateless, treating each interaction independently without recalling past conversation history.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/overview.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
const agent = new Agent({
  name: "Stateless Assistant",
  instructions: "This agent has no memory.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  memory: false, // Memory completely disabled
});
```

----------------------------------------

TITLE: Enabling Markdown Formatting for VoltAgent Responses in TypeScript
DESCRIPTION: This snippet shows how to configure a VoltAgent to automatically format its text responses using Markdown. By setting the `markdown` property to `true` in the agent's configuration, VoltAgent instructs the underlying LLM to use Markdown syntax for better readability and presentation, which is particularly useful for displaying responses in UIs.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_2

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const agent = new Agent({
  name: "Markdown Assistant",
  instructions: "A helpful assistant that formats answers clearly.",
  llm: new VercelAIProvider(),
  model: openai("gpt-4o"),
  markdown: true // Enable automatic Markdown formatting
});

// Now, when you call generateText or streamText,
// the agent will attempt to format its response using Markdown.
const response = await agent.generateText("Explain the steps to make a cup of tea.");
console.log(response.text);
```

----------------------------------------

TITLE: Fetching Available Voices using getVoices - TypeScript
DESCRIPTION: Demonstrates how to fetch the list of available voices from initialized voice provider instances using the `getVoices()` method. It shows examples for both OpenAI and ElevenLabs providers, noting that the output structure might vary.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_4

LANGUAGE: typescript
CODE:
```
// Using the initialized openAIVoice instance
const availableVoices = await openAIVoice.getVoices();
console.log("Available OpenAI Voices:", availableVoices);
/* Example Output:
[
  { id: 'alloy', name: 'Alloy', language: 'en', gender: 'neutral' },
  { id: 'echo', name: 'Echo', language: 'en', gender: 'male' },
  // ... other voices
]
*/

const elevenLabsVoices = await elevenLabsVoice.getVoices();
console.log("Available ElevenLabs Voices:", elevenLabsVoices); // Structure might differ
```

----------------------------------------

TITLE: Installing Langfuse Exporter Package - npm
DESCRIPTION: This command installs the `@voltagent/langfuse-exporter` package, which is required to integrate Langfuse observability with VoltAgent. It uses npm as the package manager.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_17

LANGUAGE: bash
CODE:
```
npm install @voltagent/langfuse-exporter
```

----------------------------------------

TITLE: Installing Langfuse Exporter for VoltAgent
DESCRIPTION: This command installs the `@voltagent/langfuse-exporter` package, which is required to integrate Langfuse observability with your VoltAgent application. It should be run in your project's terminal.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_2

LANGUAGE: Bash
CODE:
```
npm install @voltagent/langfuse-exporter
```

----------------------------------------

TITLE: Create Supabase Memory Database Tables (SQL)
DESCRIPTION: SQL commands to create the necessary tables (`voltagent_memory_conversations`, `voltagent_memory_messages`, `voltagent_memory_agent_history`, `voltagent_memory_agent_history_events`, `voltagent_memory_agent_history_steps`) and indexes in a Supabase PostgreSQL database for the `SupabaseMemory` provider. This script uses the default table prefix `voltagent_memory`. If a custom prefix is used, the script must be modified accordingly.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/supabase.md#_snippet_1

LANGUAGE: sql
CODE:
```
-- Conversations Table
CREATE TABLE IF NOT EXISTS voltagent_memory_conversations (
    id TEXT PRIMARY KEY,
    resource_id TEXT NOT NULL,
    title TEXT,
    metadata JSONB, -- Use JSONB for efficient querying
    created_at TIMESTAMPTZ NOT NULL DEFAULT timezone('utc'::text, now()),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT timezone('utc'::text, now())
);

-- Index for faster lookup by resource_id
CREATE INDEX IF NOT EXISTS idx_voltagent_memory_conversations_resource
ON voltagent_memory_conversations(resource_id);

-- Messages Table
CREATE TABLE IF NOT EXISTS voltagent_memory_messages (
    user_id TEXT NOT NULL,
    -- Add foreign key reference and cascade delete
    conversation_id TEXT NOT NULL REFERENCES voltagent_memory_conversations(id) ON DELETE CASCADE,
    message_id TEXT NOT NULL,
    role TEXT NOT NULL,
    content TEXT NOT NULL, -- Consider JSONB if content is often structured
    type TEXT NOT NULL,
    created_at TIMESTAMPTZ NOT NULL DEFAULT timezone('utc'::text, now()),
    -- Composite primary key to ensure message uniqueness within a conversation
    PRIMARY KEY (user_id, conversation_id, message_id)
);

-- Index for faster message retrieval
CREATE INDEX IF NOT EXISTS idx_voltagent_memory_messages_lookup
ON voltagent_memory_messages(user_id, conversation_id, created_at);

-- Agent History Table
CREATE TABLE IF NOT EXISTS voltagent_memory_agent_history (
    key TEXT PRIMARY KEY,
    value JSONB NOT NULL, -- Store the entry object as JSONB
    agent_id TEXT NOT NULL
);

-- Index for faster lookup by agent_id
CREATE INDEX IF NOT EXISTS idx_voltagent_memory_agent_history_agent_id
ON voltagent_memory_agent_history(agent_id);

-- Agent History Events Table
CREATE TABLE IF NOT EXISTS voltagent_memory_agent_history_events (
    key TEXT PRIMARY KEY,
    value JSONB NOT NULL, -- Store the event object as JSONB
    -- Foreign key to history entry
    history_id TEXT NOT NULL REFERENCES voltagent_memory_agent_history(key) ON DELETE CASCADE,
    agent_id TEXT NOT NULL
);

-- Indexes for faster lookup
CREATE INDEX IF NOT EXISTS idx_voltagent_memory_agent_history_events_history_id
ON voltagent_memory_agent_history_events(history_id);

CREATE INDEX IF NOT EXISTS idx_voltagent_memory_agent_history_events_agent_id
ON voltagent_memory_agent_history_events(agent_id);

-- Agent History Steps Table
CREATE TABLE IF NOT EXISTS voltagent_memory_agent_history_steps (
    key TEXT PRIMARY KEY,
    value JSONB NOT NULL, -- Store the step object as JSONB
    -- Foreign key to history entry
    history_id TEXT NOT NULL REFERENCES voltagent_memory_agent_history(key) ON DELETE CASCADE,
    agent_id TEXT NOT NULL
);

-- Indexes for faster lookup
CREATE INDEX IF NOT EXISTS idx_voltagent_memory_agent_history_steps_history_id
ON voltagent_memory_agent_history_steps(history_id);

CREATE INDEX IF NOT EXISTS idx_voltagent_memory_agent_history_steps_agent_id
ON voltagent_memory_agent_history_steps(agent_id);
```

----------------------------------------

TITLE: Installing VoltAgent and AI SDK Dependencies (Bash)
DESCRIPTION: This command installs the core VoltAgent library, its Vercel AI SDK integration, the CLI tool, the OpenAI AI SDK provider, and Zod for schema validation, which are essential for VoltAgent functionality.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/integrations/nextjs.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm install @voltagent/core @voltagent/vercel-ai @voltagent/cli @ai-sdk/openai zod
```

----------------------------------------

TITLE: Installing Google AI Provider Dependencies
DESCRIPTION: These commands demonstrate how to install the core VoltAgent package, the Google AI provider, and Zod (required for `generateObject`) using different package managers.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/google-ai.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/core @voltagent/google-ai zod
```

LANGUAGE: bash
CODE:
```
yarn add @voltagent/core @voltagent/google-ai zod
```

LANGUAGE: bash
CODE:
```
pnpm add @voltagent/core @voltagent/google-ai zod
```

----------------------------------------

TITLE: Configure Agent with Vercel AI Provider (TypeScript)
DESCRIPTION: Demonstrates how to instantiate a VoltAgent Agent, assigning the VercelProvider as its language model provider and specifying a model identifier from the Vercel AI SDK.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_4

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const vercelProvider = new VercelProvider();

const agent = new Agent({
  name: "Vercel Chat Agent",
  instructions: "An agent powered by models via Vercel AI SDK",
  llm: vercelProvider,
  model: openai("gpt-4o")
});
```

----------------------------------------

TITLE: Installing Langfuse Exporter Package - Bash
DESCRIPTION: This snippet provides commands to install the `@voltagent/langfuse-exporter` package using common Node.js package managers. This package is a prerequisite for integrating Langfuse telemetry with VoltAgent.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/langfuse-exporter/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/langfuse-exporter
# or
yarn add @voltagent/langfuse-exporter
# or
pnpm add @voltagent/langfuse-exporter
```

----------------------------------------

TITLE: Install Vercel AI Provider (npm)
DESCRIPTION: Installs the necessary VoltAgent core and Vercel AI provider packages using the npm package manager.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/core @voltagent/vercel-ai
```

----------------------------------------

TITLE: Implementing Timeout with AbortSignal (TypeScript)
DESCRIPTION: Provides a more integrated timeout solution using `AbortController`. It creates a local controller and timeout, listens for a parent signal to propagate cancellation, and passes the local signal to the API call. Includes cleanup for the timeout.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_12

LANGUAGE: TypeScript
CODE:
```
execute: async (args, options) => {
  // Create a new AbortController if none provided
  const controller = new AbortController();

  // Create a timeout that will abort the controller
  const timeoutId = setTimeout(() => {
    controller.abort("Operation timed out");
  }, 5000); // 5-second timeout

  try {
    // Merge with any parent signal if provided
    if (options?.signal) {
      options.signal.addEventListener("abort", () => {
        controller.abort("Parent operation aborted");
        clearTimeout(timeoutId);
      });
    }

    // Use our controller's signal for the API call
    const result = await fetchDataFromApi(args, { signal: controller.signal });
    clearTimeout(timeoutId); // Clear the timeout if the operation completed successfully
    return result;
  } catch (error) {
    clearTimeout(timeoutId); // Ensure timeout is cleared on error too
    throw error;
  }
};
```

----------------------------------------

TITLE: Creating VoltAgent App with Exporter Example
DESCRIPTION: This command initializes a new VoltAgent application using the `create voltagent-app` utility. It specifically sets up an example project that includes the `with-voltagent-exporter` feature, demonstrating how to integrate and use this component within a VoltAgent application.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-voltagent-exporter/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-voltagent-exporter
```

----------------------------------------

TITLE: Defining a Text Content Part in VoltAgent
DESCRIPTION: This snippet shows the structure for a 'text' content part within a multi-modal `BaseMessage` array. It requires a `type` field set to 'text' and a `text` field containing the string content. This part is used to include textual information alongside other content types.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/multi-modal.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
{ type: 'text', text: 'This is the text part.' }
```

----------------------------------------

TITLE: Example of a Poorly Described Tool (TypeScript)
DESCRIPTION: Shows an example of a tool definition with vague descriptions for the tool's purpose and its parameters, which hinders the agent's ability to understand when and how to use the tool effectively.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_5

LANGUAGE: TypeScript
CODE:
```
const badTool = createTool({
  name: "search",
  description: "Searches things", // Vague, doesn't explain what it searches or when to use it
  parameters: z.object({
    q: z.string(), // Unclear parameter name with no description
    n: z.number().optional(), // Unclear what this parameter does
  }),
  execute: async (args) => {
    /* ... */
  },
});
```

----------------------------------------

TITLE: Using a Custom Memory Provider with Agent in TypeScript
DESCRIPTION: This snippet demonstrates how to integrate a custom memory provider, such as the `MyCustomStorage` class, into an agent configuration. The custom memory instance is passed to the `memory` option when creating a new `Agent` instance.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/memory/overview.md#_snippet_6

LANGUAGE: typescript
CODE:
```
// Use your custom memory provider
const agent = new Agent({
  // ... other options
  memory: new MyCustomStorage(/* ... */),
});
```

----------------------------------------

TITLE: Testing VoltAgent AI Agent Functionality in TypeScript
DESCRIPTION: This snippet demonstrates how to test the previously defined VoltAgent by sending a query and logging its response. It imports the `myAgent` instance and calls its `generateText` method with a sample question. The generated text response from the agent is then printed to the console, verifying the agent's ability to process and respond to prompts.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-26-llm-agents/index.md#_snippet_6

LANGUAGE: typescript
CODE:
```
// test.ts
import { myAgent } from "./src/agent";

async function test() {
  const response = await myAgent.generateText("How can I filter arrays in JavaScript?");
  console.log(response.text);
}

test();
```

----------------------------------------

TITLE: Instantiate Agent with XsAIProvider
DESCRIPTION: Demonstrates how to create a VoltAgent instance using the configured XsAIProvider, setting the agent's name, instructions, and the specific model identifier for the target API.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_6

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { XsAIProvider } from "@voltagent/xsai";

// Using OpenAI configuration from above
const xsaiProvider = new XsAIProvider({ apiKey: process.env.OPENAI_API_KEY! });

const agent = new Agent({
  name: "Compatible Agent",
  instructions: "An agent using an OpenAI-compatible API via xsAI",
  llm: xsaiProvider,
  // Model identifier specific to the target API (e.g., OpenAI, Groq, local)
  model: "gpt-4o-mini",
});
```

----------------------------------------

TITLE: Configuring Server Environment Variables - Env
DESCRIPTION: Defines environment variables needed for the server to connect to external services like Composio. Requires obtaining API keys and integration IDs from the respective platforms. The FRONTEND_URL is optional.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-drive-mcp/README.md#_snippet_4

LANGUAGE: env
CODE:
```
COMPOSIO_API_KEY="your_composio_api_key"
GOOGLE_INTEGRATION_ID="your_google_integration_id"

# Optional: Specify the frontend URL if it's different from the default
# FRONTEND_URL="http://localhost:5173"
```

----------------------------------------

TITLE: Example .env Configuration for Zapier MCP
DESCRIPTION: Provides an example of the required environment variables in a .env file for connecting to a Zapier MCP server and providing AWS credentials for Amazon Bedrock (or an OpenAI key if using that provider).
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-zapier-mcp/README.md#_snippet_1

LANGUAGE: env
CODE:
```
# .env
ZAPIER_MCP_URL=https://your-zapier-mcp-server-url
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_SESSION_TOKEN=your_aws_session_token  # Optional, if using temporary credentials
```

----------------------------------------

TITLE: Install @voltagent/voice Package
DESCRIPTION: Install the @voltagent/voice package using npm, yarn, or pnpm.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/voice
```

LANGUAGE: bash
CODE:
```
yarn add @voltagent/voice
```

LANGUAGE: bash
CODE:
```
pnpm add @voltagent/voice
```

----------------------------------------

TITLE: Configuring GoogleGenAIProvider with Gemini API Key
DESCRIPTION: This snippet illustrates two ways to initialize the `GoogleGenAIProvider` using a Gemini API key: directly providing the key or relying on the `GEMINI_API_KEY` environment variable.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/google-ai.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { GoogleGenAIProvider } from "@voltagent/google-ai";

// Option 1: Direct API Key
const googleProviderApiKey = new GoogleGenAIProvider({
  apiKey: "YOUR_GEMINI_API_KEY"
});

// Option 2: Environment Variable (GEMINI_API_KEY)
// Ensure process.env.GEMINI_API_KEY is set
const googleProviderEnv = new GoogleGenAIProvider({});
```

----------------------------------------

TITLE: Handling Get Voices Errors in Custom Provider (TypeScript)
DESCRIPTION: This catch block handles errors that occur when fetching voice metadata. It logs the error, emits a custom error event, and returns an empty array, indicating that no voices could be retrieved.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_11

LANGUAGE: TypeScript
CODE:
```
catch (error: any) {
      const errorMessage = error.message || "Failed to fetch custom voices";
      this.emit("error", {
        message: errorMessage,
        code: MyCustomErrorCode.ApiError,
        details: error,
      });
      // Return empty array or throw, depending on desired behavior
      return [];
    }
```

----------------------------------------

TITLE: Using Provider-Specific Options in VoltAgent Generation Methods (TypeScript)
DESCRIPTION: This example illustrates how to pass arbitrary provider-specific options to VoltAgent's generation methods like `streamText`. It leverages an index signature in the `ProviderOptions` type to allow custom parameters (e.g., `experimental_activeTools`, `anotherProviderOption`) alongside standard options, enhancing flexibility for integrating unique provider features.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_4

LANGUAGE: typescript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

const agent = new Agent({
  name: "Example Agent",
  llm: new VercelProvider(),
  model: openai("gpt-4o-mini")
});

await agent.streamText("Tell me a joke", {
  provider: {
    // Standard options can still be used
    temperature: 0.7,
    // Provider-specific options are now allowed by the type
    experimental_activeTools: ["tool1", "tool2"],
    anotherProviderOption: "someValue"
  }
});
```

----------------------------------------

TITLE: Creating a Toolkit with createToolkit Helper in TypeScript
DESCRIPTION: This TypeScript helper function `createToolkit` facilitates the creation of `Toolkit` instances. It performs basic validation, ensuring a `name` is provided, and sets default values for `description`, `addInstructions`, and `tools` if not explicitly specified. It returns a fully formed `Toolkit` object.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_9

LANGUAGE: TypeScript
CODE:
```
// packages/core/src/tool/toolkit.ts
export const createToolkit = (options: Toolkit): Toolkit => {
  if (!options.name) {
    throw new Error("Toolkit name is required");
  }
  if (!options.tools || options.tools.length === 0) {
    console.warn(`Toolkit '${options.name}' created without any tools.`);
  }

  return {
    name: options.name,
    description: options.description || "", // Default empty description
    instructions: options.instructions,
    addInstructions: options.addInstructions || false, // Default to false
    tools: options.tools || [], // Default to empty array
  };
};
```

----------------------------------------

TITLE: Installing Anthropic AI Provider Dependencies (Bash)
DESCRIPTION: This command installs the necessary npm packages for using the Anthropic AI provider with VoltAgent. It includes `@voltagent/core` for core agent functionalities, `@voltagent/anthropic-ai` for the Anthropic integration, and `zod` for schema validation, particularly when using `generateObject`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/anthropic-ai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/core @voltagent/anthropic-ai zod
```

----------------------------------------

TITLE: Processing Audio Stream and Simulating STT API Call (TypeScript)
DESCRIPTION: This snippet demonstrates how to process an incoming audio stream chunk by chunk, concatenate it into a single buffer, and then simulates a Speech-to-Text (STT) API call with a delay before returning a placeholder transcript. It's part of a custom `listen` method implementation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_8

LANGUAGE: TypeScript
CODE:
```
let fullAudio = Buffer.alloc(0);
        for await (const chunk of audio) {
          fullAudio = Buffer.concat([fullAudio, chunk]);
        }
        await new Promise((resolve) => setTimeout(resolve, 500)); // Simulate API call
        return "Simulated full transcript of audio.";
        // --- End Placeholder ---
      }
```

----------------------------------------

TITLE: Install Project Dependencies (Bash)
DESCRIPTION: Installs all necessary project dependencies listed in the `package.json` file using npm. This command must be run after cloning the repository or creating a new app to ensure all required libraries are available.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-vertex-ai/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm install
```

----------------------------------------

TITLE: Configure XsAIProvider for Local Endpoint (Ollama)
DESCRIPTION: Illustrates configuring the XsAIProvider to connect to a local OpenAI-compatible endpoint, such as Ollama running with an adapter, specifying a local baseURL and potentially a placeholder API key.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_5

LANGUAGE: typescript
CODE:
```
import { XsAIProvider } from "@voltagent/xsai";

// Example connecting to a local endpoint (like Ollama with an OpenAI adapter)
const localProvider = new XsAIProvider({
  apiKey: "ollama", // Often not required or a placeholder for local models
  baseURL: "http://localhost:11434/v1/", // Default Ollama endpoint
});
```

----------------------------------------

TITLE: Creating VoltAgent Example Project - Bash
DESCRIPTION: Uses the npx utility to execute the create-voltagent-app CLI, generating a new project directory based on the 'with-google-drive-mcp' example. This is the first step to setting up the example application.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-drive-mcp/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npx create-voltagent-app@latest -- --example with-google-drive-mcp
```

----------------------------------------

TITLE: Override Anthropic Generation Parameters
DESCRIPTION: Shows how to pass Anthropic-specific parameters (like temperature, max_tokens) for a single request by using the 'provider' key within the options object of generation methods.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/anthropic-ai.md#_snippet_6

LANGUAGE: typescript
CODE:
```
// Example: Overriding temperature for a specific call
const response = await agent.generateText("Write a creative story.", {
  provider: {
    temperature: 0.9,
    max_tokens: 1024,
    // Any other valid Anthropic parameters
  },
});
```

----------------------------------------

TITLE: Running VoltAgent in Development with Yarn
DESCRIPTION: This command starts the VoltAgent server in development mode using `yarn`. It executes the `dev` script defined in `package.json`, leveraging `tsx watch` for live reloading during development.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_15

LANGUAGE: bash
CODE:
```
yarn dev
```

----------------------------------------

TITLE: Creating VoltAgent App with Turso Example (Bash)
DESCRIPTION: This command uses the npm package manager to initialize a new VoltAgent project. It fetches the latest version of the `create-voltagent-app` tool and scaffolds a project based on the 'with-turso' example template.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-turso/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-turso
```

----------------------------------------

TITLE: Create VoltAgent App from Example (Bash)
DESCRIPTION: This command uses the npm package manager to create a new VoltAgent project. It invokes the latest version of the `voltagent-app` CLI tool and specifies the `with-peaka-mcp` example template, providing a quick starting point for exploring VoltAgent capabilities.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-peaka-mcp/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-peaka-mcp
```

----------------------------------------

TITLE: Initializing a VoltAgent Project with npm
DESCRIPTION: This snippet demonstrates the initial steps to set up a new VoltAgent project using the `create-voltagent-app` CLI. It creates a new project directory, navigates into it, and then starts the development server, enabling immediate development and testing of agents.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-21-introducing-developer-console/index.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest my-first-agent
cd my-first-agent
npm run dev # or yarn dev / pnpm dev
```

----------------------------------------

TITLE: Running Development Server for Specific Packages
DESCRIPTION: This command starts the development server for specified backend packages within the monorepo. Changes made to these packages will automatically trigger recompilation, facilitating rapid development. It uses `pnpm dev` with `--scope` to target specific packages like `@voltagent/core` and `@voltagent/cli`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_4

LANGUAGE: sh
CODE:
```
pnpm dev --scope @voltagent/core --scope @voltagent/cli
```

----------------------------------------

TITLE: Building Specific VoltAgent Package with pnpm - Shell
DESCRIPTION: This command allows building a specific package within the VoltAgent monorepo using pnpm's --scope option. It's useful for focused development, allowing you to compile only the package you are actively working on, such as @voltagent/core in the example.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_3

LANGUAGE: sh
CODE:
```
# Example: Build the core package
pnpm build --scope @voltagent/core
```

----------------------------------------

TITLE: Creating a Next.js Server Action for VoltAgent (TypeScript)
DESCRIPTION: This Server Action defines an asynchronous function `calculateExpression` that uses the initialized VoltAgent to process a given expression, returning only the numeric result. It enables server-side AI computations triggered from the client.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/integrations/nextjs.md#_snippet_6

LANGUAGE: typescript
CODE:
```
"use server";

import { agent } from "@/voltagent"; // Adjust path if needed

export async function calculateExpression(expression: string) {
  const result = await agent.generateText(
    `Calculate ${expression}. Only respond with the numeric result.`
  );

  return result.text;
}
```

----------------------------------------

TITLE: Quick Chat with Fine-Tuned Model (Shell)
DESCRIPTION: This command allows for a quick interactive chat session with a fine-tuned model or adapter, using its configuration file to load the model for immediate testing and interaction.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-17-llmafactory/index.md#_snippet_6

LANGUAGE: Shell
CODE:
```
llamafactory-cli chat path_to_your_finetuned_model_or_adapter_config.yaml
```

----------------------------------------

TITLE: Example Usage of Custom Voice Provider (TypeScript)
DESCRIPTION: This commented-out snippet shows how to instantiate the custom voice provider, use its `speak` method to generate audio, and pipe the resulting stream to a file. It illustrates the basic interaction pattern with the custom provider class.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_12

LANGUAGE: TypeScript
CODE:
```
// Example usage of the custom provider
// const myVoice = new MyCustomVoiceProvider({ apiKey: "YOUR_CUSTOM_API_KEY" });
// const audio = await myVoice.speak("Hello from my custom provider!");
// audio.pipe(createWriteStream("custom_output.mp3"));
```

----------------------------------------

TITLE: Installing Client Dependencies - Bash
DESCRIPTION: Changes directory to the client folder, installs its required dependencies using npm, and then returns to the root project directory. This prepares the frontend for execution.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-drive-mcp/README.md#_snippet_3

LANGUAGE: bash
CODE:
```
cd ../client
npm install
cd ..
```

----------------------------------------

TITLE: Installing Server Dependencies - Bash
DESCRIPTION: Navigates into the server directory and uses npm to install all required dependencies for the server-side application. This prepares the backend for execution.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-drive-mcp/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
cd server
npm install
```

----------------------------------------

TITLE: Installing Client Dependencies Bash
DESCRIPTION: Executes the `npm install` command within the `client` directory to download and install all required Node.js packages listed in the `package.json` for the client-side chat interface.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_5

LANGUAGE: Bash
CODE:
```
npm install
```

----------------------------------------

TITLE: Starting the VoltAgent Development Server
DESCRIPTION: Run the development server for the VoltAgent application using your preferred package manager. This command starts the agent and makes it accessible.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-24-rag-chatbot/index.md#_snippet_6

LANGUAGE: bash
CODE:
```
npm run dev
```

LANGUAGE: bash
CODE:
```
yarn dev
```

LANGUAGE: bash
CODE:
```
pnpm dev
```

----------------------------------------

TITLE: Starting VoltAgent Development Server (Bash)
DESCRIPTION: Run this command in your project directory to compile and start the VoltAgent server using tsx, enabling interaction with your defined agents.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/cli/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Running the VoltAgent development server
DESCRIPTION: Navigate into your new project directory and execute this command to start the VoltAgent development server using `tsx`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/supabase/README.md#_snippet_5

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Cloning VoltAgent Google Drive Example Bash
DESCRIPTION: This command uses the `create-voltagent-app` utility to download the pre-built Google Drive chatbot example project template directly into a new directory. It's the first step in setting up the project locally.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_0

LANGUAGE: Bash
CODE:
```
npm create voltagent-app@latest -- --example with-google-drive-mcp
```

----------------------------------------

TITLE: Creating a VoltAgent App with Langfuse Example
DESCRIPTION: This command uses npm's create command to initialize a new VoltAgent project. It specifically uses the 'latest' version of the 'voltagent-app' package and selects the 'with-langfuse' example template to set up the project with Langfuse integration.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-langfuse/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example with-langfuse
```

----------------------------------------

TITLE: Configuring Langfuse Exporter in TypeScript
DESCRIPTION: Create an instance of `LangfuseExporter`, configuring it with your Langfuse public key, secret key, and optionally the base URL, preferably using environment variables.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/observability/langfuse.md#_snippet_2

LANGUAGE: typescript
CODE:
```
const langfuseExporter = new LangfuseExporter({
  publicKey: process.env.LANGFUSE_PUBLIC_KEY, // Your Langfuse Public Key
  secretKey: process.env.LANGFUSE_SECRET_KEY, // Your Langfuse Secret Key
  baseUrl: process.env.LANGFUSE_BASE_URL, // Optional: Defaults to Langfuse Cloud URL
  // debug: true, // Optional: Enable detailed logging from the exporter
});
```

----------------------------------------

TITLE: Installing LLaMA-Factory with Torch and Metrics (Python/Shell)
DESCRIPTION: This command installs LLaMA-Factory in editable mode, including dependencies for PyTorch and metrics. It's recommended to run this within a virtual environment. Additional extras like `bitsandbytes` or `vllm` can be specified for specific functionalities.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-17-llmafactory/index.md#_snippet_3

LANGUAGE: Shell
CODE:
```
pip install -e ".[torch,metrics]"
```

----------------------------------------

TITLE: Configure XsAIProvider for OpenAI
DESCRIPTION: Demonstrates how to instantiate the XsAIProvider for use with the standard OpenAI API, reading the API key from environment variables.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_3

LANGUAGE: typescript
CODE:
```
import { XsAIProvider } from "@voltagent/xsai";

// Example using OpenAI API key from environment variables
const openaiProvider = new XsAIProvider({
  apiKey: process.env.OPENAI_API_KEY!, // Assumes OPENAI_API_KEY is set
});
```

----------------------------------------

TITLE: Integrating the Calculator Component into a Next.js Page (TypeScript)
DESCRIPTION: This Next.js page component imports and renders the `Calculator` UI component. It serves as the main entry point for the application's calculator functionality, demonstrating how to incorporate client-side components into a server-rendered Next.js application structure.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/integrations/nextjs.md#_snippet_8

LANGUAGE: TypeScript
CODE:
```
import { Calculator } from "./components/calculator";

export default function HomePage() {
  return (
    <main>
      <h1>VoltAgent Next.js Example</h1>
      <Calculator />
    </main>
  );
}
```

----------------------------------------

TITLE: Creating the Source Directory
DESCRIPTION: This command creates a new directory named `src`, which is the standard location for your application's source code, including the main agent definition file.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_10

LANGUAGE: bash
CODE:
```
mkdir src
```

----------------------------------------

TITLE: Refactor Agent Instructions Field - TypeScript
DESCRIPTION: This snippet shows a diff illustrating the change in defining an Agent instance. The 'description' field is replaced with the 'instructions' field to align with the preferred API usage for providing behavioral guidance to the agent. This change is part of a refactor preparing for the eventual deprecation of 'description' for Agent definitions.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/cli/CHANGELOG.md#_snippet_0

LANGUAGE: diff
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Update Agent Definition from description to instructions in JavaScript
DESCRIPTION: This code snippet shows a diff illustrating the refactor to use the 'instructions' field instead of 'description' when defining an Agent instance. This change aligns examples with the preferred API usage for providing behavioral guidance to the agent, preparing for the eventual deprecation of the 'description' field for this purpose.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/vercel-ai/CHANGELOG.md#_snippet_0

LANGUAGE: JavaScript
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Chatting with a Fine-Tuned Model using LLaMA-Factory CLI
DESCRIPTION: This command-line snippet demonstrates how to initiate a chat session with a fine-tuned LLM using the `llamafactory-cli` tool. It requires specifying the configuration file (`your_model_config.yaml`) for the desired model, enabling quick interaction and testing of the deployed model's capabilities.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-17-llmafactory/index.md#_snippet_1

LANGUAGE: Shell
CODE:
```
llamafactory-cli chat your_model_config.yaml
```

----------------------------------------

TITLE: Implementing Timeout with Promise.race (TypeScript)
DESCRIPTION: Illustrates a basic approach to implementing a timeout for an asynchronous operation within a tool's `execute` function using `Promise.race`. It races the main operation promise against a promise that rejects after a specified delay.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/tools.md#_snippet_11

LANGUAGE: TypeScript
CODE:
```
execute: async (args) => {
  const timeoutPromise = new Promise((_, reject) => {
    setTimeout(() => reject(new Error("Request timed out")), 5000);
  });

  const resultPromise = fetchDataFromApi(args);

  return Promise.race([resultPromise, timeoutPromise]);
};
```

----------------------------------------

TITLE: Adding Development and Build Scripts to package.json
DESCRIPTION: This JSON snippet adds essential scripts to `package.json`: `type` for ES module support, `build` for TypeScript compilation, `dev` for development with hot-reloading using `tsx watch`, `start` for production, and `volt` for CLI commands.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_13

LANGUAGE: json
CODE:
```
"type": "module",
"scripts": {
  "build": "tsc",
  "dev": "tsx watch --env-file=.env ./src",
  "start": "node dist/index.js",
  "volt": "volt"
}
```

----------------------------------------

TITLE: Starting the VoltAgent Development Server
DESCRIPTION: These commands initiate the VoltAgent development server using the specified package manager. The `dev` script typically uses `tsx watch` to compile and run the application, providing live reloading during development.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm run dev
```

LANGUAGE: bash
CODE:
```
yarn dev
```

LANGUAGE: bash
CODE:
```
pnpm dev
```

----------------------------------------

TITLE: Running the VoltAgent Development Server
DESCRIPTION: After setting up the project, run this command in your project directory to start the VoltAgent development server using tsx.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/voice/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Installing Langfuse Exporter with npm
DESCRIPTION: Install the necessary `@voltagent/langfuse-exporter` package using npm or yarn.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/observability/langfuse.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/langfuse-exporter
```

----------------------------------------

TITLE: Updating Agent Definition Field in TypeScript
DESCRIPTION: This snippet shows a diff illustrating the change in the Agent constructor from using the 'description' field to the 'instructions' field. This update aligns examples and package code with the preferred API for providing behavioral guidance to the agent, preparing for the eventual deprecation of the 'description' field for this purpose.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/supabase/CHANGELOG.md#_snippet_0

LANGUAGE: diff
CODE:
```
```diff
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```
```

----------------------------------------

TITLE: Installing VoltAgent and Vercel AI SDK Packages (Bash)
DESCRIPTION: This command provides the necessary `npm` installation instructions for the core VoltAgent package, the Vercel AI provider, and the OpenAI SDK package. It ensures all required dependencies are available for setting up a VoltAgent project that integrates with Vercel AI SDK.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-21-vercel-ai-sdk/index.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm install @voltagent/core @voltagent/vercel-ai @ai-sdk/openai
```

----------------------------------------

TITLE: Creating New VoltAgent Project (Bash)
DESCRIPTION: Use the `create-voltagent-app` command-line interface tool to quickly scaffold a new VoltAgent project directory.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/google-ai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest
```

----------------------------------------

TITLE: Defining createReasoningTools Options (TypeScript)
DESCRIPTION: This TypeScript type definition details the configuration options available for the `createReasoningTools` helper. It lists boolean flags to control the inclusion of tools, instructions, and default examples, as well as an option for providing custom few-shot examples. This interface guides users on how to customize the toolkit creation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/tools/reasoning-tool.mdx#_snippet_1

LANGUAGE: TypeScript
CODE:
```
type CreateReasoningToolsOptions = {
  /**
   * Add detailed instructions and few-shot examples to the agent's system prompt.
   * @default true
   */
  addInstructions?: boolean;
  /**
   * Include the 'think' tool in the toolkit.
   * @default true
   */
  think?: boolean;
  /**
   * Include the 'analyze' tool in the toolkit.
   * @default true
   */
  analyze?: boolean;
  /**
   * Include default few-shot examples along with instructions (if addInstructions is true).
   * @default true
   */
  addFewShot?: boolean;
  /**
   * Provide custom few-shot examples instead of the default ones.
   * Ignored if addInstructions or addFewShot is false.
   * @default Predefined examples (see code)
   */
  fewShotExamples?: string;
};
```

----------------------------------------

TITLE: Building All VoltAgent Packages with pnpm - Shell
DESCRIPTION: This pnpm command compiles all packages within the VoltAgent monorepo. It's used to build the entire project, ensuring all components are ready for testing or deployment. This is a common step after making changes to the codebase.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_2

LANGUAGE: sh
CODE:
```
pnpm build
```

----------------------------------------

TITLE: Refactoring Agent Definition to Use Instructions Field (JavaScript)
DESCRIPTION: This snippet demonstrates the refactoring of an `Agent` instance definition. It shows the transition from using the `description` field to the `instructions` field, which is now the preferred method for providing behavioral guidance to the agent's underlying LLM. This change aligns with upcoming API deprecations.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_15

LANGUAGE: diff
CODE:
```
  const agent = new Agent({
    name: "My Assistant",
-   description: "A helpful assistant.",
+   instructions: "A helpful assistant.",
    llm: new VercelAIProvider(),
    model: openai("gpt-4o-mini"),
  });
```

----------------------------------------

TITLE: Installing VoltAgent Groq AI Provider
DESCRIPTION: Instructions on how to install the @voltagent/groq-ai package using different Node.js package managers (npm, yarn, pnpm).
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/groq-ai/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm install @voltagent/groq-ai
# or
yarn add @voltagent/groq-ai
# or
pnpm add @voltagent/groq-ai
```

----------------------------------------

TITLE: Example Usage of createToolkit and createTool in TypeScript
DESCRIPTION: This example demonstrates how to define individual tools using `createTool` with Zod schemas for input validation, and then how to group these tools into a `Toolkit` using the `createToolkit` helper. It shows how to configure shared instructions and enable their automatic addition to the agent's system prompt.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_10

LANGUAGE: TypeScript
CODE:
```
import { createTool, createToolkit } from "@voltagent/core";
import { z } from "zod";

// Define some tools first
const getWeather = createTool({
  name: "getWeather",
  description: "Gets the weather for a location.",
  schema: z.object({ location: z.string() }),
  run: async ({ location }) => ({ temperature: "25C", condition: "Sunny" }),
});

const searchWeb = createTool({
  name: "searchWeb",
  description: "Searches the web for a query.",
  schema: z.object({ query: z.string() }),
  run: async ({ query }) => ({ results: ["Result 1", "Result 2"] }),
});

// Create a toolkit using the helper
const webInfoToolkit = createToolkit({
  name: "web_information",
  description: "Tools for getting information from the web.",
  addInstructions: true, // Add the instructions to the system prompt
  tools: [getWeather, searchWeb],
});

console.log(webInfoToolkit);
/*
Output:
{
  name: 'web_information',
  description: 'Tools for getting information from the web.',
  instructions: 'Use these tools to find current information online.',
  addInstructions: true,
  tools: [ [Object Tool: getWeather], [Object Tool: searchWeb] ]
}
*/
```

----------------------------------------

TITLE: Install xsAI Provider Dependencies (yarn)
DESCRIPTION: Installs the necessary packages for using the xsAI provider with yarn, including the core VoltAgent library, the xsAI provider itself, the xsai library, and zod for object generation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/xsai.md#_snippet_1

LANGUAGE: bash
CODE:
```
yarn add @voltagent/core @voltagent/xsai xsai zod
```

----------------------------------------

TITLE: Set OpenAI API Key (.env)
DESCRIPTION: Creates or updates the .env file in the project root to store the OpenAI API key required by the LLM provider.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-25-what-is-an-mcp-server/index.md#_snippet_3

LANGUAGE: dotenv
CODE:
```
OPENAI_API_KEY=your_openai_api_key_here
```

----------------------------------------

TITLE: Importing Langfuse Exporter in TypeScript
DESCRIPTION: Import the `LangfuseExporter` class along with other required VoltAgent and LLM provider imports in your main application file.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/observability/langfuse.md#_snippet_1

LANGUAGE: typescript
CODE:
```
import { Agent, VoltAgent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";

// highlight-next-line
import { LangfuseExporter } from "@voltagent/langfuse-exporter";
// ... other imports like your LLM provider and tools
```

----------------------------------------

TITLE: Configuring OpenAI API Key in .env File (Env)
DESCRIPTION: Illustrates how to set the `OPENAI_API_KEY` environment variable within a `.env` file. This key is essential for the VoltAgent to authenticate and make requests to the OpenAI API for generating text or using models. Replace the placeholder with your actual key.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-thinking-tool/README.md#_snippet_2

LANGUAGE: env
CODE:
```
OPENAI_API_KEY=your_openai_api_key_here
```

----------------------------------------

TITLE: Import createPrompt Utility
DESCRIPTION: Imports the necessary functions and types from the @voltagent/core library to utilize the createPrompt utility for creating and managing dynamic prompts.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/utils/create-prompt.md#_snippet_1

LANGUAGE: TypeScript
CODE:
```
import { createPrompt, PromptTemplate, PromptCreator } from "@voltagent/core";
// Other helper types like TemplateVariables, ExtractVariableNames, AllowedVariableValue are also exported.
```

----------------------------------------

TITLE: Importing Core and Voice Providers for Voltagent
DESCRIPTION: This snippet imports necessary classes from `@voltagent/core`, `@voltagent/vercel-ai`, `@ai-sdk/openai`, and `@voltagent/voice` for agent and voice functionalities, along with Node.js `fs` and `stream` utilities required for file operations and stream piping.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/overview.md#_snippet_13

LANGUAGE: TypeScript
CODE:
```
import { Agent } from "@voltagent/core";
import { VercelAIProvider } from "@voltagent/vercel-ai";
import { openai } from "@ai-sdk/openai";
// Import voice providers
import { OpenAIVoiceProvider, ElevenLabsVoiceProvider } from "@voltagent/voice";
import { createReadStream, createWriteStream } from "fs";
import { pipeline } from "stream/promises";
```

----------------------------------------

TITLE: Installing Project Dependencies with pnpm - Shell
DESCRIPTION: This command uses pnpm to install all project dependencies for the VoltAgent monorepo. It also handles linking workspace packages, which is crucial for local development. This step should be executed after cloning the repository.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_1

LANGUAGE: sh
CODE:
```
pnpm install
```

----------------------------------------

TITLE: Setting Up and Running Documentation Locally
DESCRIPTION: This sequence of commands outlines the typical setup for running the project's documentation locally. It involves navigating to the documentation directory (e.g., `website`), installing dependencies with `pnpm install`, and then starting the development server using `pnpm start` or an equivalent script.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_10

LANGUAGE: sh
CODE:
```
cd website # Or your actual documentation directory
pnpm install
pnpm start # Or the relevant dev script (e.g., dev, develop)
```

----------------------------------------

TITLE: Removing Subagent from Supervisor Agent (TypeScript)
DESCRIPTION: Illustrates how to remove a previously added subagent from a supervisor agent using its unique ID via the `removeSubAgent` method. This action also unregisters the relationship in the AgentRegistry.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/subagents.md#_snippet_6

LANGUAGE: typescript
CODE:
```
// Remove a subagent by its ID
// This also unregisters the relationship in AgentRegistry
supervisorAgent.removeSubAgent(factCheckerAgent.id);
```

----------------------------------------

TITLE: LLM Agent Interaction Flow Diagram
DESCRIPTION: This Mermaid sequence diagram illustrates the step-by-step process of an LLM agent responding to a user query. It demonstrates how the agent interacts with memory, the LLM, and external tools (like a WeatherAPI) to analyze context, retrieve information, process results, and formulate a response, highlighting its proactive and reasoning capabilities.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-26-llm-agents/index.md#_snippet_0

LANGUAGE: Mermaid
CODE:
```
%%{init: {'theme':'base', 'themeVariables': {'primaryColor': '#10b981', 'primaryTextColor': '#10b981', 'primaryBorderColor': '#10b981', 'lineColor': '#10b981', 'secondaryColor': '#ecfdf5', 'tertiaryColor': '#d1fae5', 'background': '#ffffff', 'mainBkg': '#ecfdf5', 'secondBkg': '#d1fae5', 'tertiaryBkg': '#a7f3d0'}}}%%
sequenceDiagram
participant U as User
participant A as Agent
participant L as LLM
participant T as Tools
participant M as Memory

    U->>A: What's the weather in New York?
    A->>M: Check previous conversations
    M-->>A: User context
    A->>L: Analyze question + context
    L-->>A: Use weather tool
    A->>T: Call WeatherAPI New York
    T-->>A: temp 72°F condition sunny
    A->>L: Process tool result
    L-->>A: Weather in New York is 72°F and sunny
    A->>M: Save conversation
    A->>U: Formatted response
```

----------------------------------------

TITLE: Installing Langfuse Exporter Package (Bash)
DESCRIPTION: This command installs the necessary npm package for the Langfuse Exporter, allowing integration of VoltAgent with Langfuse for observability.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/langfuse-exporter/CHANGELOG.md#_snippet_1

LANGUAGE: bash
CODE:
```
npm install @voltagent/langfuse-exporter
```

----------------------------------------

TITLE: Installing Langfuse Exporter for VoltAgent (Bash)
DESCRIPTION: This command installs the `@voltagent/langfuse-exporter` package, which is necessary to integrate Langfuse observability with VoltAgent. It is a prerequisite for configuring the exporter and enabling tracing.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_2

LANGUAGE: bash
CODE:
```
npm install @voltagent/langfuse-exporter
```

----------------------------------------

TITLE: Defining Toolkit Type in TypeScript
DESCRIPTION: This TypeScript type definition outlines the structure of a `Toolkit` in VoltAgent. It bundles related tools, allowing for shared instructions and control over whether these instructions are automatically added to an agent's system prompt. Key properties include `name`, `description`, `instructions`, `addInstructions`, and an array of `tools`.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_8

LANGUAGE: TypeScript
CODE:
```
export type Toolkit = {
  /**
   * Unique identifier name for the toolkit.
   */
  name: string;
  /**
   * A brief description of what the toolkit does. Optional.
   */
  description?: string;
  /**
   * Shared instructions for the LLM on how to use the tools within this toolkit.
   * Optional.
   */
  instructions?: string;
  /**
   * Whether to automatically add the toolkit's `instructions` to the agent's system prompt.
   * Defaults to false.
   */
  addInstructions?: boolean;
  /**
   * An array of Tool instances that belong to this toolkit.
   */
  tools: Tool<any>[];
};
```

----------------------------------------

TITLE: Simulating Fetching Available Voices (TypeScript)
DESCRIPTION: This snippet simulates fetching available voice metadata from a service by introducing a delay and returning a hardcoded array of `VoiceMetadata` objects. It serves as a placeholder for actual API logic within a custom `getVoices` method.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/agents/voice.md#_snippet_10

LANGUAGE: TypeScript
CODE:
```
await new Promise((resolve) => setTimeout(resolve, 100)); // Simulate API call
      return [
        { id: "custom-voice-1", name: "Custom Voice One", language: "en", gender: "female" },
        { id: "custom-voice-2", name: "Custom Voice Two", language: "es", gender: "male" },
      ];
      // --- End Placeholder ---
```

----------------------------------------

TITLE: Conventional Commit Message Format
DESCRIPTION: This snippet illustrates the required format for commit messages, adhering to the Conventional Commits specification. It includes a `<type>` (e.g., `feat`, `fix`), an optional `<scope>` (typically the package name), and a concise `<description>` of the change.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_11

LANGUAGE: text
CODE:
```
<type>(<scope>): <description>
```

----------------------------------------

TITLE: Cloning LLaMA-Factory GitHub Repository (Shell)
DESCRIPTION: This command clones the LLaMA-Factory GitHub repository with a depth of 1, meaning it only fetches the latest commit, which is sufficient for getting started and saves bandwidth.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-17-llmafactory/index.md#_snippet_2

LANGUAGE: Shell
CODE:
```
git clone --depth 1 https://github.com/hiyouga/LLaMA-Factory.git
```

----------------------------------------

TITLE: Start VoltAgent Development Server (Bash)
DESCRIPTION: Runs the development script defined in package.json to start the VoltAgent server and the configured MCP servers.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-25-what-is-an-mcp-server/index.md#_snippet_6

LANGUAGE: bash
CODE:
```
npm run dev
```

LANGUAGE: bash
CODE:
```
yarn dev
```

LANGUAGE: bash
CODE:
```
pnpm dev
```

----------------------------------------

TITLE: Creating New VoltAgent Project with Example - Bash
DESCRIPTION: This command initializes a new VoltAgent project using `npm create`. It fetches the latest version of the `voltagent-app` package and clones the 'github-repo-analyzer' example template into a new directory, providing a quick way to start with a functional project.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/github-repo-analyzer/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
npm create voltagent-app@latest -- --example github-repo-analyzer
```

----------------------------------------

TITLE: Run Development Server (Bash)
DESCRIPTION: Starts the development server for the VoltAgent project. This command typically compiles the code, watches for changes, and makes the agent accessible for testing and development.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-vertex-ai/README.md#_snippet_3

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Starting VoltAgent Development Server (Bash)
DESCRIPTION: Run the `npm run dev` command within your project directory to compile and start the VoltAgent server, making your agent accessible via the VoltAgent Console.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/google-ai/README.md#_snippet_3

LANGUAGE: bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Starting VoltAgent Server Bash
DESCRIPTION: Executes the `npm run dev` script defined in the server's `package.json`, which typically starts the VoltAgent server in development mode, making it listen for requests.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_9

LANGUAGE: Bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Creating a New Changeset Entry
DESCRIPTION: This command initiates the process of creating a new changeset file, which is used for managing versioning and changelogs in a monorepo. It prompts the user to select affected packages, choose a semantic version bump, and provide a description of the changes.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_12

LANGUAGE: sh
CODE:
```
pnpm changeset
```

----------------------------------------

TITLE: Making Manual OpenAI API Calls in JavaScript
DESCRIPTION: This snippet demonstrates a traditional, manual approach to interacting with the OpenAI API in JavaScript. It shows a direct API call to create chat completions, where `userInput` is sent as a user message. This method requires custom code for every new feature, leading to increased complexity and repetitive development.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-23-llm-agent-framework/index.md#_snippet_0

LANGUAGE: javascript
CODE:
```
// Manual API call every time
const response = await openai.chat.completions.create({
  messages: [{ role: "user", content: userInput }],
});
// Custom code for every feature...
```

----------------------------------------

TITLE: Launching LLaMA-Factory Web UI (Shell)
DESCRIPTION: This command starts the Gradio-based web user interface for LLaMA-Factory, allowing users to configure and run fine-tuning jobs through a graphical interface instead of command-line YAML files.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-17-llmafactory/index.md#_snippet_5

LANGUAGE: Shell
CODE:
```
llamafactory-cli webui
```

----------------------------------------

TITLE: Creating a New Next.js Application (Bash)
DESCRIPTION: These commands initialize a new Next.js project using the latest version and navigate into its directory, preparing for further configuration and dependency installation.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/integrations/nextjs.md#_snippet_1

LANGUAGE: bash
CODE:
```
npx create-next-app@latest my-voltagent-app
cd my-voltagent-app
```

----------------------------------------

TITLE: Navigating to Server Directory (Start) Bash
DESCRIPTION: Changes the current directory to the `server` directory in preparation for starting the server-side application logic.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_8

LANGUAGE: Bash
CODE:
```
cd server
```

----------------------------------------

TITLE: Starting Local Development Server with Yarn
DESCRIPTION: This command initiates a local development server, typically opening a browser window to display the website. It enables live reloading, reflecting most code changes without requiring a server restart.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/README.md#_snippet_1

LANGUAGE: Shell
CODE:
```
$ yarn start
```

----------------------------------------

TITLE: Navigating to Project Root Bash
DESCRIPTION: This command changes the current directory back to the main `with-google-drive-mcp` project root after installing client dependencies, preparing for the next steps like configuration and starting the application.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_6

LANGUAGE: Bash
CODE:
```
cd ..
```

----------------------------------------

TITLE: Installing Dependencies with pnpm
DESCRIPTION: Command to install project dependencies using the pnpm package manager. Alternatives like npm or yarn can also be used.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-zapier-mcp/README.md#_snippet_2

LANGUAGE: bash
CODE:
```
pnpm install
# or npm install / yarn install
```

----------------------------------------

TITLE: Cloning VoltAgent Repo and Navigating Example Directory (Bash)
DESCRIPTION: Clones the main VoltAgent GitHub repository and then changes the current directory to the specific 'with-thinking-tool' example directory. This is the initial step to obtain the necessary project files locally. Requires Git to be installed.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-thinking-tool/README.md#_snippet_0

LANGUAGE: bash
CODE:
```
git clone https://github.com/voltagent/voltagent.git
cd voltagent/examples/with-thinking-tool
```

----------------------------------------

TITLE: Navigating into the project directory
DESCRIPTION: Changes the current directory in the terminal to the newly created `github-repo-analyzer` project directory.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-21-first-ai-agent-github-repo-analyzer/index.md#_snippet_1

LANGUAGE: bash
CODE:
```
cd github-repo-analyzer
```

----------------------------------------

TITLE: Navigating into the Project Directory
DESCRIPTION: Change the current directory to the newly created VoltAgent project directory.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-24-rag-chatbot/index.md#_snippet_1

LANGUAGE: bash
CODE:
```
cd with-rag-chatbot
```

----------------------------------------

TITLE: Running Tests for a Specific Backend Package
DESCRIPTION: This command executes tests for a designated backend package within the monorepo. It utilizes `pnpm test` combined with the `--scope` flag to target only the specified package, which is useful after modifying a particular module.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_6

LANGUAGE: sh
CODE:
```
pnpm test --scope @voltagent/core
```

----------------------------------------

TITLE: VoltAgent Server Startup Message (Bash)
DESCRIPTION: This snippet shows the expected output in the terminal when the VoltAgent server starts successfully, typically after running `npm run dev`. It confirms the server is running, indicates the local HTTP address and port it's listening on, and provides the direct link to open the Developer Console in a browser.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CONSOLE.md#_snippet_1

LANGUAGE: bash
CODE:
```
══════════════════════════════════════════════════
  VOLTAGENT SERVER STARTED SUCCESSFULLY
══════════════════════════════════════════════════
  ✓ HTTP Server: http://localhost:3141

  Developer Console:    https://console.voltagent.dev
══════════════════════════════════════════════════
[VoltAgent] All packages are up to date
```

----------------------------------------

TITLE: Setting Up OpenAI API Key in Environment Variables (Env)
DESCRIPTION: This snippet demonstrates how to define the `OPENAI_API_KEY` in a `.env.local` file, which is crucial for authenticating requests to the OpenAI API when using the Vercel AI SDK.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/integrations/nextjs.md#_snippet_5

LANGUAGE: env
CODE:
```
OPENAI_API_KEY="your-openai-api-key-here"
# Add other environment variables if needed
```

----------------------------------------

TITLE: Initializing a New npm Project
DESCRIPTION: This command initializes a new npm project in the current directory, creating a `package.json` file with default values. The `-y` flag bypasses the interactive prompts, making it suitable for quick setup.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_4

LANGUAGE: bash
CODE:
```
npm init -y
```

----------------------------------------

TITLE: Configuring OpenAI API Key in .env
DESCRIPTION: Create a `.env` file in the root of your project directory and add your OpenAI API key to it. This key is required for the LLM provider.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-24-rag-chatbot/index.md#_snippet_4

LANGUAGE: bash
CODE:
```
OPENAI_API_KEY=your_openai_api_key_here
```

----------------------------------------

TITLE: Starting VoltAgent Development Server - Bash
DESCRIPTION: Navigates to the server directory and runs the development script defined in its package.json using npm. This starts the backend server, typically on http://localhost:3000.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-drive-mcp/README.md#_snippet_5

LANGUAGE: bash
CODE:
```
cd server
npm run dev
```

----------------------------------------

TITLE: Running LLaMA-Factory Fine-Tuning Job via CLI (Shell)
DESCRIPTION: This command initiates a fine-tuning job using the `llamafactory-cli` tool, specifying a YAML configuration file that defines the model, dataset, and hyperparameters for the training process.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-17-llmafactory/index.md#_snippet_4

LANGUAGE: Shell
CODE:
```
llamafactory-cli train examples/train_lora/llama3_lora_sft.yaml
```

----------------------------------------

TITLE: Navigating to the Project Directory
DESCRIPTION: This command changes the current directory to the newly created VoltAgent project, `my-agent-app`, which is a necessary step before running development commands or installing further dependencies.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_1

LANGUAGE: bash
CODE:
```
cd my-agent-app
```

----------------------------------------

TITLE: Navigating to Client Directory (Start) Bash
DESCRIPTION: Changes the current directory to the `client` directory in preparation for starting the client-side chat interface application.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_10

LANGUAGE: Bash
CODE:
```
cd client
```

----------------------------------------

TITLE: Generating Test Coverage for All Packages
DESCRIPTION: This command executes tests for all packages in the monorepo and generates a combined code coverage report. It's used to get an overall view of test coverage across the entire project.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_9

LANGUAGE: sh
CODE:
```
pnpm test:all:coverage
```

----------------------------------------

TITLE: Running Tests for All Packages
DESCRIPTION: This command initiates the test suite across all packages within the monorepo. It provides a quick way to ensure that all components are functioning correctly after broader changes or before a major release.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_7

LANGUAGE: sh
CODE:
```
pnpm test:all
```

----------------------------------------

TITLE: Navigating to Server Directory Bash
DESCRIPTION: This command changes the current directory to the `server` subdirectory within the project root, which contains the VoltAgent logic for the chatbot.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_2

LANGUAGE: Bash
CODE:
```
cd server
```

----------------------------------------

TITLE: Create Data Directory and Test File (Bash)
DESCRIPTION: Uses bash commands to create the 'data' directory required by the MCP filesystem server and creates a simple test file within it.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-25-what-is-an-mcp-server/index.md#_snippet_4

LANGUAGE: bash
CODE:
```
mkdir data
echo "Hello from the MCP agent's accessible file!" > data/test.txt
```

----------------------------------------

TITLE: Migrating VoltAgent Hooks: After Refactoring (TypeScript)
DESCRIPTION: This snippet demonstrates the updated signature for custom agent hooks in VoltAgent, where all hooks now accept a single argument object. This change improves readability and explicitly separates `output` and `error` properties for `onEnd` and `onToolEnd`, simplifying error handling and success path logic.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_7

LANGUAGE: typescript
CODE:
```
import type {
  OnStartHookArgs,
  OnEndHookArgs,
  OnToolStartHookArgs,
  OnToolEndHookArgs,
  // ... other needed types
} from "@voltagent/core";

const myHooks = {
  onStart: async (args: OnStartHookArgs) => {
    const { agent, context } = args;
    /* ... */
  },
  onEnd: async (args: OnEndHookArgs) => {
    const { agent, output, error, context } = args;
    if (error) {
      // Handle error (error is VoltAgentError)
    } else if (output) {
      // Handle success (output is AgentOperationOutput)
    }
  },
  onToolStart: async (args: OnToolStartHookArgs) => {
    const { agent, tool, context } = args;
    /* ... */
  },
  onToolEnd: async (args: OnToolEndHookArgs) => {
    const { agent, tool, output, error, context } = args;
    if (error) {
      // Handle tool error (error is VoltAgentError)
    } else {
      // Handle tool success (output is the result)
    }
  },
  // ...
};
```

----------------------------------------

TITLE: Creating and Navigating to a New Project Directory (Manual Setup)
DESCRIPTION: These commands manually create a new directory named `my-voltagent-project` and then change the current working directory into it. This is the initial step for a manual VoltAgent project setup.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/getting-started/quick-start.md#_snippet_3

LANGUAGE: bash
CODE:
```
mkdir my-voltagent-project
cd my-voltagent-project
```

----------------------------------------

TITLE: Installing Project Dependencies
DESCRIPTION: Install the necessary project dependencies using your preferred package manager (npm, yarn, or pnpm) from the project directory.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-24-rag-chatbot/index.md#_snippet_5

LANGUAGE: bash
CODE:
```
npm install
```

LANGUAGE: bash
CODE:
```
yarn install
```

LANGUAGE: bash
CODE:
```
pnpm install
```

----------------------------------------

TITLE: Install Vercel AI Provider (pnpm)
DESCRIPTION: Installs the necessary VoltAgent core and Vercel AI provider packages using the pnpm package manager.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/providers/vercel-ai.md#_snippet_2

LANGUAGE: bash
CODE:
```
pnpm add @voltagent/core @voltagent/vercel-ai
```

----------------------------------------

TITLE: Installing Server Dependencies Bash
DESCRIPTION: Executes the `npm install` command within the `server` directory to download and install all required Node.js packages listed in the `package.json` for the server-side logic.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_3

LANGUAGE: Bash
CODE:
```
npm install
```

----------------------------------------

TITLE: Install Dependencies - VoltAgent - Bash
DESCRIPTION: Commands to install project dependencies using npm, yarn, or pnpm. Requires Node.js (v18 or newer).
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-anthropic/README.md#_snippet_0

LANGUAGE: Bash
CODE:
```
npm install
# or
yarn
# or
pnpm install
```

----------------------------------------

TITLE: Starting Chat Client Bash
DESCRIPTION: Executes the `npm run dev` script defined in the client's `package.json`, which typically starts the web development server for the chat interface, allowing access in a browser.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_11

LANGUAGE: Bash
CODE:
```
npm run dev
```

----------------------------------------

TITLE: Navigating to Example Project Directory - Bash
DESCRIPTION: Changes the current working directory to the root of the newly created example project. This directory contains both the server and client subdirectories.
SOURCE: https://github.com/voltagent/voltagent/blob/main/examples/with-google-drive-mcp/README.md#_snippet_1

LANGUAGE: bash
CODE:
```
cd with-google-drive-mcp
```

----------------------------------------

TITLE: Navigating to Project Directory Bash
DESCRIPTION: This command changes the current directory in the terminal to the root directory of the newly fetched `with-google-drive-mcp` project, preparing for subsequent setup steps.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_1

LANGUAGE: Bash
CODE:
```
cd with-google-drive-mcp
```

----------------------------------------

TITLE: Navigating into the Project Directory (Bash)
DESCRIPTION: Changes the current directory in the terminal to the newly created VoltAgent project directory, `mcp-filesystem-agent`, to prepare for further development.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-25-what-is-an-mcp-server/index.md#_snippet_1

LANGUAGE: bash
CODE:
```
cd mcp-filesystem-agent
```

----------------------------------------

TITLE: Deploying Website Without SSH with Yarn
DESCRIPTION: This command deploys the website without using SSH, requiring the GitHub username to be provided. It's useful for building and pushing to a `gh-pages` branch, especially when hosting on GitHub Pages.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/README.md#_snippet_4

LANGUAGE: Shell
CODE:
```
$ GIT_USER=<Your GitHub username> yarn deploy
```

----------------------------------------

TITLE: Adding a Dependency to a Specific Package
DESCRIPTION: This snippet demonstrates how to add a new dependency to a specific package within the monorepo. First, navigate into the target package's directory (e.g., `packages/core`), then use `pnpm add` to install the desired library, such as 'lodash'.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_5

LANGUAGE: sh
CODE:
```
cd packages/core
pnpm add lodash
```

----------------------------------------

TITLE: Navigating to Client Directory Bash
DESCRIPTION: This command first moves up one directory level from `server` back to the project root and then changes the directory into the `client` subdirectory, which contains the user interface code.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-28-building-google-drive-chatbot/index.md#_snippet_4

LANGUAGE: Bash
CODE:
```
cd ../client
```

----------------------------------------

TITLE: Example Changeset Markdown File Content
DESCRIPTION: This snippet provides an example of the content within a `.changeset/*.md` file. It specifies the semantic version bumps for affected packages in the front matter and includes a detailed, Conventional Commits-style description of the changes, often referencing related GitHub issues.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_13

LANGUAGE: md
CODE:
```
---
"@voltagent/core": minor
"@voltagent/cli": patch
---

feat(core): Implement awesome feature X

This feature allows users to do Y.

fix(cli): Correct flag parsing issue

Resolves #456
Fixes #789
```

----------------------------------------

TITLE: Generating Test Coverage for a Specific Package
DESCRIPTION: This command runs tests for a specific package and generates a code coverage report. The `-- --coverage` flag is passed through to the underlying test runner to enable coverage reporting for the targeted package.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/docs/community/contributing.md#_snippet_8

LANGUAGE: sh
CODE:
```
pnpm test --scope @voltagent/core -- --coverage
```

----------------------------------------

TITLE: Defining VoltAgent Hooks with Positional Arguments (Legacy)
DESCRIPTION: This snippet demonstrates the legacy signature for defining custom agent hooks in VoltAgent, where `onStart`, `onEnd`, `onToolStart`, and `onToolEnd` accept multiple positional arguments. The `onEnd` hook uses an `isError` flag and a combined `outputOrError` parameter to distinguish between success and failure.
SOURCE: https://github.com/voltagent/voltagent/blob/main/packages/core/CHANGELOG.md#_snippet_6

LANGUAGE: TypeScript
CODE:
```
const myHooks = {
  onStart: async (agent, context) => {
    /* ... */
  },
  onEnd: async (agent, outputOrError, context, isError) => {
    if (isError) {
      // Handle error (outputOrError is the error)
    } else {
      // Handle success (outputOrError is the output)
    }
  },
  onToolStart: async (agent, tool, context) => {
    /* ... */
  },
  onToolEnd: async (agent, tool, result, context) => {
    // Assuming result might contain an error or be the success output
  },
  // ...
};
```

----------------------------------------

TITLE: Building Static Website Content with Yarn
DESCRIPTION: This command compiles the website into static content, placing the generated files in the `build` directory. The output can then be deployed to any static content hosting service.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/README.md#_snippet_2

LANGUAGE: Shell
CODE:
```
$ yarn build
```

----------------------------------------

TITLE: Importing ObservabilityPrioritizer Component (JavaScript)
DESCRIPTION: This snippet imports the `ObservabilityPrioritizer` React component from a local path within the Docusaurus site structure. This component is likely used to display interactive content related to prioritizing observability aspects in LLM applications, enhancing the blog post's educational value.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-13-llm-observability/index.md#_snippet_0

LANGUAGE: JavaScript
CODE:
```
import ObservabilityPrioritizer from '@site/src/components/blog-widgets/ObservabilityPrioritizer';
```

----------------------------------------

TITLE: Importing LlamaFactoryNavigator Component in JavaScript
DESCRIPTION: This snippet imports the `LlamaFactoryNavigator` React component from a local path within the Docusaurus site structure. This component is likely used to embed interactive navigation or information related to LLaMA-Factory directly into the blog post, enhancing user experience by providing relevant links or controls.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-17-llmafactory/index.md#_snippet_0

LANGUAGE: JavaScript
CODE:
```
import LlamaFactoryNavigator from '@site/src/components/blog-widgets/LlamaFactoryNavigator';
```

----------------------------------------

TITLE: Migrating VoltAgent Hooks: Before Refactoring (TypeScript)
DESCRIPTION: This snippet shows the previous signature of custom agent hooks in VoltAgent, where `onEnd` and `onToolEnd` used positional arguments including an `isError` flag and a combined `outputOrError` parameter. This structure required conditional logic to differentiate between success and error outcomes.
SOURCE: https://github.com/voltagent/voltagent/blob/main/CHANGELOG.md#_snippet_6

LANGUAGE: typescript
CODE:
```
const myHooks = {
  onStart: async (agent, context) => {
    /* ... */
  },
  onEnd: async (agent, outputOrError, context, isError) => {
    if (isError) {
      // Handle error (outputOrError is the error)
    } else {
      // Handle success (outputOrError is the output)
    }
  },
  onToolStart: async (agent, tool, context) => {
    /* ... */
  },
  onToolEnd: async (agent, tool, result, context) => {
    // Assuming result might contain an error or be the success output
  },
  // ...
};
```

----------------------------------------

TITLE: Importing Blog UI Components - JavaScript
DESCRIPTION: This snippet imports custom React components used to enhance the blog post's interactive features. These components, including a feature matcher, scenario selector, and a Mermaid diagram viewer, are essential for rendering specific UI elements within the article.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-21-vercel-ai-sdk/index.md#_snippet_0

LANGUAGE: JavaScript
CODE:
```
import VercelAiSdkFeatureMatcher from '@site/src/components/blog-widgets/VercelAiSdkFeatureMatcher';
import IntegrationScenarioSelector from '@site/src/components/blog-widgets/IntegrationScenarioSelector';
import ZoomableMermaid from '@site/src/components/blog-widgets/ZoomableMermaid';
```

----------------------------------------

TITLE: Installing LangChain Framework with pip
DESCRIPTION: This command installs the LangChain orchestration framework using pip, Python's package installer. It is the initial step to set up the development environment for building LLM applications with LangChain.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-19-llm-orchestration/index.md#_snippet_1

LANGUAGE: Python
CODE:
```
pip install langchain.
```

----------------------------------------

TITLE: Importing LlmIssueSpotter Component (JavaScript)
DESCRIPTION: This snippet imports the `LlmIssueSpotter` React component from a local path within the Docusaurus site structure. This component is likely used to provide interactive content or tools for identifying issues in LLM applications, serving as a practical demonstration or aid for readers.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-05-13-llm-observability/index.md#_snippet_1

LANGUAGE: JavaScript
CODE:
```
import LlmIssueSpotter from '@site/src/components/blog-widgets/LlmIssueSpotter';
```

----------------------------------------

TITLE: VoltAgent Server Startup Output
DESCRIPTION: Example output displayed in the terminal upon successful startup of the VoltAgent development server, showing the local HTTP address and the Developer Console URL.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/blog/2025-04-21-first-ai-agent-github-repo-analyzer/index.md#_snippet_5

LANGUAGE: bash
CODE:
```
══════════════════════════════════════════════════
  VOLTAGENT SERVER STARTED SUCCESSFULLY
══════════════════════════════════════════════════
  ✓ HTTP Server: http://localhost:3141

  Developer Console: https://console.voltagent.dev
══════════════════════════════════════════════════
```

----------------------------------------

TITLE: Deploying Website via SSH with Yarn
DESCRIPTION: This command deploys the website using SSH for authentication. It's a convenient method for building and pushing to a `gh-pages` branch when GitHub Pages is used for hosting.
SOURCE: https://github.com/voltagent/voltagent/blob/main/website/README.md#_snippet_3

LANGUAGE: Shell
CODE:
```
$ USE_SSH=true yarn deploy
```